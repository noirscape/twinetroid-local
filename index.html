<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8">

<title>Twinetroid</title>

<style title="Twine CSS">@-webkit-keyframes appear{0%{opacity:0}to{opacity:1}}@keyframes appear{0%{opacity:0}to{opacity:1}}@-webkit-keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@keyframes fade-in-out{0%,to{opacity:0}50%{opacity:1}}@-webkit-keyframes rumble{50%{-webkit-transform:translateY(-0.2em);transform:translateY(-0.2em)}}@keyframes rumble{50%{-webkit-transform:translateY(-0.2em);transform:translateY(-0.2em)}}@-webkit-keyframes shudder{50%{-webkit-transform:translateX(0.2em);transform:translateX(0.2em)}}@keyframes shudder{50%{-webkit-transform:translateX(0.2em);transform:translateX(0.2em)}}@-webkit-keyframes box-flash{0%{background-color:white;color:white}}@keyframes box-flash{0%{background-color:white;color:white}}@-webkit-keyframes pulse{0%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}20%{-webkit-transform:scale(1.2, 1.2);transform:scale(1.2, 1.2)}40%{-webkit-transform:scale(0.9, 0.9);transform:scale(0.9, 0.9)}60%{-webkit-transform:scale(1.05, 1.05);transform:scale(1.05, 1.05)}80%{-webkit-transform:scale(0.925, 0.925);transform:scale(0.925, 0.925)}to{-webkit-transform:scale(1, 1);transform:scale(1, 1)}}@keyframes pulse{0%{-webkit-transform:scale(0, 0);transform:scale(0, 0)}20%{-webkit-transform:scale(1.2, 1.2);transform:scale(1.2, 1.2)}40%{-webkit-transform:scale(0.9, 0.9);transform:scale(0.9, 0.9)}60%{-webkit-transform:scale(1.05, 1.05);transform:scale(1.05, 1.05)}80%{-webkit-transform:scale(0.925, 0.925);transform:scale(0.925, 0.925)}to{-webkit-transform:scale(1, 1);transform:scale(1, 1)}}@-webkit-keyframes shudder-in{0%, to{-webkit-transform:translateX(0em);transform:translateX(0em)}5%, 25%, 45%{-webkit-transform:translateX(-1em);transform:translateX(-1em)}15%, 35%, 55%{-webkit-transform:translateX(1em);transform:translateX(1em)}65%{-webkit-transform:translateX(-0.6em);transform:translateX(-0.6em)}75%{-webkit-transform:translateX(0.6em);transform:translateX(0.6em)}85%{-webkit-transform:translateX(-0.2em);transform:translateX(-0.2em)}95%{-webkit-transform:translateX(0.2em);transform:translateX(0.2em)}}@keyframes shudder-in{0%, to{-webkit-transform:translateX(0em);transform:translateX(0em)}5%, 25%, 45%{-webkit-transform:translateX(-1em);transform:translateX(-1em)}15%, 35%, 55%{-webkit-transform:translateX(1em);transform:translateX(1em)}65%{-webkit-transform:translateX(-0.6em);transform:translateX(-0.6em)}75%{-webkit-transform:translateX(0.6em);transform:translateX(0.6em)}85%{-webkit-transform:translateX(-0.2em);transform:translateX(-0.2em)}95%{-webkit-transform:translateX(0.2em);transform:translateX(0.2em)}}.debug-mode tw-expression[type=hookref]{background-color:rgba(115,123,140,0.15)}.debug-mode tw-expression[type=hookref]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"?" attr(name)}.debug-mode tw-expression[type=variable]{background-color:rgba(140,128,115,0.15)}.debug-mode tw-expression[type=variable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"$" attr(name)}.debug-mode tw-expression[type=tempVariable]{background-color:rgba(140,128,115,0.15)}.debug-mode tw-expression[type=tempVariable]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"_" attr(name)}.debug-mode tw-expression[type=macro]:nth-of-type(4n+0){background-color:rgba(136,153,102,0.15)}.debug-mode tw-expression[type=macro]:nth-of-type(2n+1){background-color:rgba(102,153,102,0.15)}.debug-mode tw-expression[type=macro]:nth-of-type(4n+2){background-color:rgba(102,153,136,0.15)}.debug-mode tw-expression[type=macro][name="display"]{background-color:rgba(0,170,255,0.1) !important}.debug-mode tw-expression[type=macro][name="if"],.debug-mode tw-expression[type=macro][name="if"]+tw-hook:not([name]),.debug-mode tw-expression[type=macro][name="unless"],.debug-mode tw-expression[type=macro][name="unless"]+tw-hook:not([name]),.debug-mode tw-expression[type=macro][name="elseif"],.debug-mode tw-expression[type=macro][name="elseif"]+tw-hook:not([name]),.debug-mode tw-expression[type=macro][name="else"],.debug-mode tw-expression[type=macro][name="else"]+tw-hook:not([name]){background-color:rgba(0,255,0,0.1) !important}.debug-mode tw-expression[type=macro].false{background-color:rgba(255,0,0,0.2) !important}.debug-mode tw-expression[type=macro].false+tw-hook:not([name]){display:none}.debug-mode tw-expression[type=macro][name="a"],.debug-mode tw-expression[type=macro][name="array"],.debug-mode tw-expression[type=macro][name="datamap"],.debug-mode tw-expression[type=macro][name="dataset"],.debug-mode tw-expression[type=macro][name="colour"],.debug-mode tw-expression[type=macro][name="color"],.debug-mode tw-expression[type=macro][name="num"],.debug-mode tw-expression[type=macro][name="number"],.debug-mode tw-expression[type=macro][name="text"],.debug-mode tw-expression[type=macro][name="print"]{background-color:rgba(255,255,0,0.2) !important}.debug-mode tw-expression[type=macro][name="put"],.debug-mode tw-expression[type=macro][name="set"]{background-color:rgba(255,128,0,0.2) !important}.debug-mode tw-expression[type=macro][name="script"]{background-color:rgba(255,191,0,0.2) !important}.debug-mode tw-expression[type=macro][name="style"]{background-color:rgba(185,198,198,0.2) !important}.debug-mode tw-expression[type=macro][name^="link"],.debug-mode tw-expression[type=macro][name^="click"],.debug-mode tw-expression[type=macro][name^="mouseover"],.debug-mode tw-expression[type=macro][name^="mouseout"]{background-color:rgba(128,223,32,0.2) !important}.debug-mode tw-expression[type=macro][name^="replace"],.debug-mode tw-expression[type=macro][name^="prepend"],.debug-mode tw-expression[type=macro][name^="append"],.debug-mode tw-expression[type=macro][name^="remove"]{background-color:rgba(223,96,32,0.2) !important}.debug-mode tw-expression[type=macro][name="live"]{background-color:rgba(32,96,223,0.2) !important}.debug-mode tw-expression[type=macro]::before{content:"(" attr(name) ":)";padding:0 0.5rem;font-size:1rem;vertical-align:middle;line-height:normal;background-color:inherit;border:1px solid rgba(255,255,255,0.5)}.debug-mode tw-hook{background-color:rgba(0,85,255,0.1) !important}.debug-mode tw-hook::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"["}.debug-mode tw-hook::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]"}.debug-mode tw-hook[name]::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"]<" attr(name) "|"}.debug-mode tw-pseudo-hook{background-color:rgba(255,170,0,0.1) !important}.debug-mode tw-collapsed::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"{"}.debug-mode tw-collapsed::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"}"}.debug-mode tw-verbatim::before,.debug-mode tw-verbatim::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:"`"}.debug-mode tw-align[style*="text-align: center"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 50%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: left"]{background:linear-gradient(to right, rgba(255,204,189,0.25) 0%, rgba(255,204,189,0) 100%)}.debug-mode tw-align[style*="text-align: right"]{background:linear-gradient(to right, rgba(255,204,189,0) 0%, rgba(255,204,189,0.25) 100%)}.debug-mode tw-column{background-color:rgba(189,228,255,0.2)}.debug-mode tw-enchantment{animation:enchantment 0.5s infinite;-webkit-animation:enchantment 0.5s infinite;border:1px solid}.debug-mode tw-link::after,.debug-mode tw-broken-link::after{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(passage-name)}.debug-mode tw-include{background-color:rgba(204,128,51,0.1)}.debug-mode tw-include::before{font-size:0.8rem;padding-left:0.2rem;padding-right:0.2rem;vertical-align:top;content:attr(type) ' "' attr(title) '"'}@keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}@-webkit-keyframes enchantment{0%,to{border-color:#ffb366}50%{border-color:#6fc}}tw-debugger{position:fixed;box-sizing:border-box;bottom:0;right:0;z-index:999999;min-width:10em;min-height:1em;padding:1em;font-size:1.25em;font-family:sans-serif;border-left:solid #000 2px;border-top:solid #000 2px;border-top-left-radius:.5em;background:#fff;opacity:1}tw-debugger select{margin-right:1em;width:12em}tw-debugger button{border-radius:3px;border:solid #999 1px;margin:auto 4px;background-color:#fff;font-size:inherit}tw-debugger button.enabled{background-color:#eee;box-shadow:inset #ddd 3px 5px 0.5em}tw-debugger .variables{display:-webkit-box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:absolute;bottom:100%;left:-2px;right:0;padding:1em;max-height:40vh;overflow-y:scroll;overflow-x:hidden;z-index:999998;background:#fff;border:inherit;border-top-left-radius:.5em;border-bottom-left-radius:.5em;font-size:0.8em}tw-debugger .variables:empty,tw-debugger .variables[hidden]{display:none}tw-debugger .variables .variable-row{display:-webkit-box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row;flex-shrink:0}tw-debugger .variables .variable-row:nth-child(2n){background:#EEE}tw-debugger .variables .variable-name{display:inline-block;width:50%}tw-debugger .variables .variable-name::before{content:"$"}tw-debugger .variables .variable-name.temporary::before{content:"_"}tw-debugger .variables .variable-name .temporary-variable-scope{opacity:0.8;font-size:0.75em}tw-debugger .variables .variable-name .temporary-variable-scope::before{content:" in "}tw-debugger .variables .variable-value{display:inline-block;width:50%}tw-link,.link,tw-icon,.enchantment-clickblock{cursor:pointer}tw-link,.enchantment-link{color:#4169E1;font-weight:bold;text-decoration:none;transition:color 0.2s ease-in-out}tw-enchantment[style^="color"] tw-link:not(:hover),tw-enchantment[style*=" color"] tw-link:not(:hover),tw-enchantment[style^="color"] .enchantment-link:not(:hover),tw-enchantment[style*=" color"] .enchantment-link:not(:hover){color:inherit}tw-link:hover,.enchantment-link:hover{color:#00bfff}tw-link:active,.enchantment-link:active{color:#DD4B39}.visited{color:#6941e1}tw-enchantment[style^="color"] .visited:not(:hover),tw-enchantment[style*=" color"] .visited:not(:hover){color:inherit}.visited:hover{color:#E3E}tw-broken-link{color:#993333;border-bottom:2px solid #993333;cursor:not-allowed}tw-enchantment[style^="color"] tw-broken-link:not(:hover),tw-enchantment[style*=" color"] tw-broken-link:not(:hover){color:inherit}.enchantment-mouseover{border-bottom:1px dashed #666}.enchantment-mouseout{border:rgba(64,149,191,0.25) 1px solid}.enchantment-mouseout:hover{background-color:rgba(64,149,191,0.25);border:transparent 1px solid;border-radius:0.2em}.enchantment-clickblock{box-shadow:inset 0 0 0 0.5vmax;display:block;color:rgba(65,105,225,0.5);transition:color 0.2s ease-in-out}.enchantment-clickblock:hover{color:rgba(0,191,255,0.5)}.enchantment-clickblock:active{color:rgba(222,78,59,0.5)}html{margin:0;height:100%;overflow-x:hidden}*,:before,:after{position:relative;box-sizing:inherit}body{margin:0;height:100%}tw-storydata{display:none}tw-story{display:-webkit-box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-orient:vertical;-webkit-flex-direction:column;-moz-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font:100% Georgia, serif;box-sizing:border-box;width:100%;min-height:100%;font-size:1.5em;line-height:1.5em;padding:5% 20%;margin:0;background-color:#000;color:#fff}tw-passage{display:block}br+br{display:block;height:0;margin:0.8ex 0}tw-sidebar{left:-5em;width:3em;position:absolute;text-align:center;display:block}tw-icon{display:block;margin:0.5em 0;opacity:0.1;font-size:2.75em}tw-icon:hover{opacity:0.3}tw-hook:empty,tw-expression:empty{display:none}tw-error{display:inline-block;border-radius:0.2em;padding:0.2em;font-size:1rem;cursor:help}tw-error.error{background-color:rgba(223,58,190,0.4);color:#fff}tw-error.warning{background-color:rgba(223,140,58,0.4);color:#fff;display:none}.debug-mode tw-error.warning{display:inline}tw-error-explanation{display:block;font-size:0.8rem;line-height:1rem}tw-error-explanation-button{cursor:pointer;line-height:0em;border-radius:1px;border:1px solid black;font-size:0.8rem;margin:0 0.4rem;opacity:0.5}tw-error-explanation-button .folddown-arrowhead{display:inline-block}tw-notifier{border-radius:0.2em;padding:0.2em;font-size:1rem;background-color:rgba(223,182,58,0.4);display:none}.debug-mode tw-notifier{display:inline}tw-notifier::before{content:attr(message)}tw-colour{border:1px solid black;display:inline-block;width:1em;height:1em}h1{font-size:3em}h2{font-size:2.25em}h3{font-size:1.75em}h1,h2,h3,h4,h5,h6{line-height:1em;margin:0.3em 0 0.6em 0}pre{font-size:1rem}small{font-size:70%}big{font-size:120%}mark{color:rgba(0,0,0,0.6);background-color:#ff9}ins{color:rgba(0,0,0,0.6);background-color:rgba(255,242,204,0.5);border-radius:0.5em;box-shadow:0em 0em 0.2em #ffe699;text-decoration:none}center{text-align:center;margin:0 auto;width:60%}blink{text-decoration:none;animation:fade-in-out 1s steps(1, end) infinite alternate;-webkit-animation:fade-in-out 1s steps(1, end) infinite alternate}tw-align{display:block}tw-columns{display:-webkit-box;display:-webkit-flex;display:-moz-flex;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-orient:horizontal;-webkit-flex-direction:row;-moz-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;-webkit-justify-content:space-between;-moz-justify-content:space-between;justify-content:space-between}tw-outline{color:white;text-shadow:-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000}tw-shadow{text-shadow:0.08em 0.08em 0.08em #000}tw-emboss{text-shadow:0.08em 0.08em 0em #000;color:white}tw-condense{letter-spacing:-0.08em}tw-expand{letter-spacing:0.1em}tw-blur{color:transparent;text-shadow:0em 0em 0.08em #000}tw-blurrier{color:transparent;text-shadow:0em 0em 0.2em #000}tw-blurrier::selection{background-color:transparent;color:transparent}tw-blurrier::-moz-selection{background-color:transparent;color:transparent}tw-smear{color:transparent;text-shadow:0em 0em 0.02em rgba(0,0,0,0.75),-0.2em 0em 0.5em rgba(0,0,0,0.5),0.2em 0em 0.5em rgba(0,0,0,0.5)}tw-mirror{display:inline-block;transform:scaleX(-1);-webkit-transform:scaleX(-1)}tw-upside-down{display:inline-block;transform:scaleY(-1);-webkit-transform:scaleY(-1)}tw-fade-in-out{text-decoration:none;animation:fade-in-out 2s ease-in-out infinite alternate;-webkit-animation:fade-in-out 2s ease-in-out infinite alternate}tw-rumble{-webkit-animation:rumble linear 0.1s 0s infinite;animation:rumble linear 0.1s 0s infinite;display:inline-block}tw-shudder{-webkit-animation:shudder linear 0.1s 0s infinite;animation:shudder linear 0.1s 0s infinite;display:inline-block}tw-shudder-in{animation:shudder-in 1s ease-out;-webkit-animation:shudder-in 1s ease-out}.transition-in{-webkit-animation:appear 0ms step-start;animation:appear 0ms step-start}.transition-out{-webkit-animation:appear 0ms step-end;animation:appear 0ms step-end}[data-t8n^=fade-in].transition-in{-webkit-animation:appear .8s;animation:appear .8s}[data-t8n^=fade-in].transition-out{display:none}[data-t8n^=dissolve].transition-in{-webkit-animation:appear .8s;animation:appear .8s}[data-t8n^=dissolve].transition-out{-webkit-animation:appear .8s reverse;animation:appear .8s reverse}[data-t8n^=shudder-in].transition-in,.transition-in[data-t8n^=shudder]{display:inline-block;-webkit-animation:shudder-in .8s;animation:shudder-in .8s}[data-t8n^=shudder-out].transition-out,.transition-out[data-t8n^=shudder]{display:inline-block;-webkit-animation:shudder-out .8s;animation:shudder-out .8s}[data-t8n^=boxflash].transition-in{-webkit-animation:box-flash .8s;animation:box-flash .8s}[data-t8n^=pulse].transition-in{-webkit-animation:pulse .8s;animation:pulse .8s;display:inline-block}[data-t8n^=pulse].transition-out{-webkit-animation:pulse .8s reverse;animation:pulse .8s reverse;display:inline-block}[data-t8n$=fast]{animation-duration:.4s;-webkit-animation-duration:.4s}[data-t8n$=slow]{animation-duration:1.6s;-webkit-animation-duration:1.6s}

</style>

</head>



<body>



<tw-story></tw-story>



<tw-storydata name="Twinetroid" startnode="184" creator="Twine" creator-version="2.2.1" ifid="641E7208-0EFE-4BB0-9DF7-5B94469C6031" zoom="1" format="Harlowe" format-version="2.1.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">.hidden tw-link, .hidden .enchantment-link {

    color: transparent;

}



tw-include[title="Hidden Link Setup"] {

    display: none;

}



.hiddenText tw-passage, .hidden {

    color: transparent;

}



tw-include[title="Hidden Passages Setup"] {

    display: none;

}



tw-include[title="Sidebar"] {

    position: fixed;

    top: 0;

    left: 0;

    width: 20%;                        /* padding-right of the tw-story element. */

    max-height: 100%;

    margin-top: calc(5% + 171px);    /* padding-top of the tw-story element plus computed height of the tw-sidebar element. */

    padding: 0.5em;

    background-color: transparent;

    text-align: right;

}







tw-include[type="startup"], tw-hook[name="workarea"] {

    display: none;

}

tw-hook[name="map"] {

    font-family: monospace; 

    line-height: 1.75;

    font-size: 16pt;

}





tw-sidebar tw-icon.redo

{

  display: none;

}



tw-sidebar tw-icon.undo

{

  display: none;

}



tw-sidebar

{

  position: fixed;

    top: 0;

    left: 0;

    width: 20%;                        /* padding-right of the tw-story element. */

    max-height: 100%;

    margin-top: calc(5% + 171px);    /* padding-top of the tw-story element plus computed height of the tw-sidebar element. */

    padding: 0.5em;

    background-color: transparent;

    text-align: left;

}



.titleLink tw-link { color : black; }























































</style><script role="script" id="twine-user-script" type="text/twine-javascript">

































































</script><tw-tag name="Death-Trap" color="red"></tw-tag>,<tw-tag name="Missiles" color="purple"></tw-tag>,<tw-tag name="Energy-Tank" color="yellow"></tw-tag>,<tw-tag name="Need-to-Fix" color="purple"></tw-tag>,<tw-tag name="Hidden-Passage" color="blue"></tw-tag>,<tw-tag name="Secret-Passage" color="blue"></tw-tag>,<tw-tag name="Red-Door" color="orange"></tw-tag>,<tw-tag name="Item-Room" color="green"></tw-tag>,<tw-tag name="Elevator" color="purple"></tw-tag>,<tw-tag name="Energy-Pack" color="yellow"></tw-tag>,<tw-tag name="Combat-Ended" color="purple"></tw-tag>,<tw-tag name="GAME-OVER" color="red"></tw-tag>,<tw-tag name="Missile-Check" color="red"></tw-tag>,<tw-tag name="MISSION-COMPLETE" color="green"></tw-tag>,<tw-tag name="footer" color="yellow"></tw-tag>,<tw-tag name="header" color="green"></tw-tag>,<tw-tag name="DEBUG-ROOM" color="red"></tw-tag><tw-passagedata pid="1" name="PROLOGUE" tags="Prologue" position="250,100" size="100,100">=&gt;&lt;=

##PROLOGUE

&lt;==

&lt;img src=./images/TitleScreen.jpg&gt;



Welcome to the future.



The era of Galactic Pioneering has come to a close, and the Galactic Federation has been established.



In deep space, individuals calling themselves Space Pirates have been working in the shadows. There are stories of bands of thieves who roamed the oceans during Ancient Earth&#39;s Age of Exploration, and these Pirates have been named after those bands. Although the location of these heinous acts has changed to outer space, [[the Pirates have not changed one bit.-&gt;The Galactic Federation Police]]</tw-passagedata><tw-passagedata pid="2" name="The Galactic Federation Police" tags="Prologue" position="400,100" size="100,100">The Federation Bureau organized the Galactic Federation Police to deal with the Pirates.



However, space is vast, and the Space Pirates’ military potential far exceeds that of the Federation Police. 



Fed up and unable to capture the Space Pirates, the Federation Police finally posted bounties on their heads. By the time this policy became widespread, there was a profession called Space Warriors, better known as Space Hunters: in other words, bounty hunting had become socially acceptable.



The Space Hunters began to flourish, and the Pirates began to unite. The small, weak Pirate organizations were amalgamated into one large, strong group. 



[[And they became even more powerful.-&gt;A Terrible Discovery]]</tw-passagedata><tw-passagedata pid="3" name="A Terrible Discovery" tags="Prologue" position="550,100" size="100,100">Now something terrible has happened!



A bio-capsule containing a Metroid, a mysterious life-form that destroyed the civilization of the distant planet SR388, has been stolen by the Pirates. 



The bio-capsule is a container growing the cell cultures of the Metroid. If the Metroid remains in this state of suspended animation, the Galaxy is safe. However, should it revive and start to multiply, [[the Metroid would be terror incarnate.-&gt;Metroids]]</tw-passagedata><tw-passagedata pid="4" name="Metroids" tags="Prologue" position="700,100" size="100,100">##Metroids



At first glance, Metroids are just another species of aerial life-form. However, they have the ability to latch onto other creatures and absorb their life energy. Therefore, the Federation Bureau’s Special Investigation Corps established a Metroid research team, which began studying them. 



Metroids in suspended animation can be revived after being exposed to beta rays for a period of 24 hours. The research team took a sample from the bio capsule and revived it. However, that single Metroid annihilated the research team. The Federation Bureau was at last able to eradicate that one creature by sending in the entire Third Division of the Federation Army. There is one thing that can be said for certain about the Metroids: they are an ultimate life-form with tremendous energy and [[a vitality-&gt;A Bio-Weapon]] far beyond anyone&#39;s reckoning!</tw-passagedata><tw-passagedata pid="5" name="The Planet Zebes" tags="Prologue" position="1000,100" size="100,100">After a desperate search by the Federation Police, the Pirates’ stronghold was discovered. It is an asteroid called Zebes. 



Zebes is controlled by Mother Brain, an enormous computer in the center of the fortress that runs all mechanical functions of the fortified asteroid.



The Federation Police mustered all of their forces to attack the fortress. 



However, the Pirates&#39; defenses could not be overpowered by a frontal assault. 



[[All the power of the Federation Police accomplished nothing.-&gt;A Desperate Plan]]</tw-passagedata><tw-passagedata pid="6" name="A Desperate Plan" tags="Prologue" position="1150,100" size="100,100">So the Federation Police placed this task in the hands of a Space Hunter. 



But this was no ordinary bounty. It came in the form of a commission sent directly from the Federation to Samus Aran, the strongest Space Hunter in the Galaxy and the one who has had the greatest success thus far. Furthermore, Samus was presented with an unbelievably large bounty. 



However, this bounty will only be issued on the condition these orders are actually carried out [[successfully...-&gt;The Galaxy&#39;s Greatest Warrior, Samus Aran]]</tw-passagedata><tw-passagedata pid="7" name="The Galaxy&#39;s Greatest Warrior, Samus Aran" tags="Prologue" position="1300,100" size="100,100">##The Galaxy&#39;s Greatest Warrior, Samus Aran

&lt;img src=./images/IntroSamus.jpg&gt;



Infused with cyborg implants throughout the entire body, Samus is a hero with superhuman abilities.



The space suit Samus uses has the ability to absorb an enemy’s power - however, more detailed information is not readily available. Nevertheless, so far, Samus has on numerous occasions completed missions that were said to be impossible. This Hunter has been called a modern-day hero, and while no one knows Samus&#39;s true identity, there are those who claim he is a man from Earth...



[[Will Samus Aran be able to accomplish this mission safely?-&gt;Game Start]]

</tw-passagedata><tw-passagedata pid="8" name="01" tags="Brinstar" position="750,2200" size="100,100">###Room A-1

(if: $combat is 1)[I have successfully infiltrated the asteroid Zebes. Zebes consists of three levels. This is Area A, Brinstar, with cavern walls of limestone and a floor of bare rock.



The capsule is thought to be located in Area C, the heart of the asteroid. There at the center of the Space Pirate organization is the giant computer called Mother Brain. My first step to accomplishing this mission is to get there as quickly as possible.



For some unknown reason, there are no human traces within Zebes. Instead, it&#39;s crawling with bizarre life-forms. Although I don’t know the thoughts of the Pirates, at the moment, it looks like this asteroid is one enormous booby trap. Traps have been set all about, and a strange life-form obstructs my progress. The enemy attacks at once!



Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)Since I can only go [[North-&gt;02]] from here, I head in that direction.]</tw-passagedata><tw-passagedata pid="9" name="02" tags="Brinstar Hidden-Passage" position="750,2050" size="100,100">###Room A-2

At first glance, it seems I can only go North from this room. However, according to my Radar, there is also a room to the East, but its entrance is hidden.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)Now that the enemy has been defeated, I can take a closer look at the rock wall. There is a huge rockslide covering what apparently used to be a doorway. (if: $items contains &quot;Bombs&quot;)[Perhaps if I used my Bombs... (click: &quot;Bombs...&quot;)[The bombs blast apart the rock pile, opening up the passageway. [[I go East through the tunnel.-&gt;20]]] Curiously, more rubble fills the tunnel after I pass through.](else:)[However, I can&#39;t do anything about it at the moment. I will have to come back later if I can locate some appropriate equipment.]



[[Go North-&gt;03]]]</tw-passagedata><tw-passagedata pid="10" name="03" tags="Brinstar" position="750,1900" size="100,100">###Room A-3

This room is different from &lt;b&gt;Room A-2&lt;/b&gt; in that it doesn&#39;t lead anywhere but North and South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;04]]

[[Go South-&gt;02]]]</tw-passagedata><tw-passagedata pid="11" name="04" tags="Brinstar" position="750,1750" size="100,100">###Room A-4

From this point, the room continues a long way to the West. Apart from that, there is only a Blue Door leading South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go West-&gt;05]]

[[Go South-&gt;03]]]</tw-passagedata><tw-passagedata pid="12" name="05" tags="Brinstar" position="599,1750" size="100,100">###Room A-5

This room is part of the same chamber as &lt;b&gt;Room A-4&lt;/b&gt;, and is a corridor stretching from East to West. In addition, there is a Blue Door to the North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;06]]

[[Go East-&gt;04]]

[[Go West-&gt;07]]]</tw-passagedata><tw-passagedata pid="13" name="06" tags="Brinstar" position="600,1600" size="100,100">###Room A-6

This room is just a passageway connecting the corridors to the South and North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(go-to: &quot;Zeb&quot;)]

	(else-if: $random is 2)[(go-to: &quot;Rio&quot;)]

	(else-if: $random is 4)[(go-to: &quot;Rio&quot;)]

	(else:)[(go-to: &quot;Geemer&quot;)]

}]](else:)[(set: $combat to 1)

The battle is over.



[[Go North-&gt;12]]

[[Go South-&gt;05]]]</tw-passagedata><tw-passagedata pid="14" name="12" tags="Brinstar" position="600,1450" size="100,100">###Room A-12

This corridor keeps going to the East and West, and there are Blue Doors to the North and South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;25]]

[[Go East-&gt;13]]

[[Go West-&gt;14]]

[[Go South-&gt;06]]]</tw-passagedata><tw-passagedata pid="15" name="25" tags="Brinstar" position="600,1300" size="100,100">###Room A-25

This corridor continues a long way to the North, and there is a Blue Door to the South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;29]]

[[Go South-&gt;12]]]</tw-passagedata><tw-passagedata pid="16" name="29" tags="Brinstar Energy-Pack" position="600,1150" size="100,100">###Room A-29

This room just runs North and South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)The corridor extends to the North and South from this chamber.



(if: $energyPacks contains &quot;A&quot;)[[[Go North-&gt;30]]

[[Go South-&gt;25]]](else:)[An Energy Tank lies on a pedestal in the center of the room.(click: &quot;Energy Tank &quot;)[



(text-color: yellow)[Energy Tank A] acquired. (set: $maxEnergy to $maxEnergy + 30, $energy to $maxEnergy, $energyPacks to it + (a: &quot;A&quot;))(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]](Maximum Energy is now $maxEnergy. All Energy Tanks have been filled.)



[[Go North-&gt;30]]

[[Go South-&gt;25]]]]]</tw-passagedata><tw-passagedata pid="17" name="30" tags="Brinstar" position="600,1000" size="100,100">###Room A-30

In this room, there is a Blue Door to the North and a corridor to the South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;31]]

[[Go South-&gt;29]]]</tw-passagedata><tw-passagedata pid="18" name="07" tags="Brinstar" position="450,1750" size="100,100">###Room A-7

This is just a corridor stretching East and West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)[[Go East-&gt;05]]

[[Go West-&gt;08]]]</tw-passagedata><tw-passagedata pid="19" name="31" tags="Brinstar" position="600,850" size="100,100">###Room A-31

From this room, there are Blue Doors leading to the South and West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)[[Go West-&gt;36]]

[[Go South-&gt;30]]]</tw-passagedata><tw-passagedata pid="20" name="36" tags="" position="450,850" size="100,100">###Room A-36

There are Blue Doors to the South and East. Aside from that, there is a corridor to the West, but I can’t go that way due to the strong magnetic field.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)[[Go East-&gt;31]]

[[Go South-&gt;37]]]</tw-passagedata><tw-passagedata pid="21" name="37" tags="Brinstar Red-Door" position="450,1000" size="100,100">###Room A-37

This room just runs North to South. (if: (history:) contains &quot;38&quot;)[There is an open Red Door to the South.](else:)[However, since there is a Red Door to the South, I can&#39;t go further unless I destroy it.]



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Sidehopper&quot;)]](else:)[(set: $combat to 1)(if: (history:) contains &quot;38&quot;)[The Red Door has been opened, so I have already been into the next room.



[[Go North-&gt;36]]

[[Go South-&gt;38 ]]](else:)[(if: $missiles &gt; 1)[[[Fire 2 Missiles at the Red Door-&gt;38]]](else:)[I need at least 2 Missiles to open the Red Door. It remains sealed.&lt;br&gt;&lt;br&gt; [[Go North-&gt;36]]]]]

</tw-passagedata><tw-passagedata pid="22" name="20" tags="Secret-Room Brinstar" position="901,2050" size="100,100">###Room A-20

To the West is the secret passage leading to &lt;b&gt;Room A-2&lt;/b&gt;. This room continues to the East. Apart from that, there is a Blue Door to the North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Sidehopper&quot;)]](else:)[(set: $combat to 1)(if: $kraidDefeated is 0)[[[Go North-&gt;22]]](else:)[Kraid is defeated, and the Blue Door has turned gray.]

[[Go East-&gt;21]]

[[Go West-&gt;02]]]</tw-passagedata><tw-passagedata pid="23" name="13" tags="Brinstar" position="750,1450" size="100,100">###Room A-13

This corridor continues to the West and East, and there is a Blue Door facing North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;16]]

[[Go East-&gt;15]]

[[Go West-&gt;12]]]</tw-passagedata><tw-passagedata pid="24" name="15" tags="Brinstar Dead-End" position="900,1450" size="100,100">###Room A-15

This is a dead end. The room only leads West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Sidehopper&quot;)]](else:)[(set: $combat to 1)[[Head back West-&gt;13]]]</tw-passagedata><tw-passagedata pid="25" name="16" tags="Brinstar" position="750,1300" size="100,100">###Room A-16

This room is a corridor leading North, and there is also a Blue Door to the South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;17]]

[[Go South-&gt;13]]]</tw-passagedata><tw-passagedata pid="26" name="17" tags="Brinstar Missiles" position="749,1150" size="100,100">###Room A-17

There is a pool of some sort of caustic liquid in this room with a pedestal in the center. However, there is enough room to safely maneuver around the pool.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;1&quot;)[[[Go North-&gt;18]]&lt;br&gt;[[Go South-&gt;16]]](else:)[A Missile Pod lies on the pedestal, but it is easy to reach.(click: &quot;Missile Pod &quot;)[



((text-color: red)[Missile Pod (1)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;1&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]



This corridor leads North and South.



[[Go North-&gt;18]]

[[Go South-&gt;16]]]]]</tw-passagedata><tw-passagedata pid="27" name="18" tags="Brinstar Secret-Passage" position="750,1000" size="100,100">###Room A-18

In addition to the corridor running all the way to the South, there is a Blue Door to the North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)Head South to &lt;b&gt;Room A-17&lt;/b&gt; or North to &lt;b&gt;Room A-19&lt;/b&gt;. In addition, my Radar reveals a passage    to a hidden room. It faces East. It is &lt;b&gt;Room A-39&lt;/b&gt;. However, I can&#39;t seem to locate the entrance... (click: &quot;   &quot;)[However, a closer inspection reveals loose rocks near the ceiling on the East wall. I fire my Beam, and the blockage crumbles to the floor with a loud rumble. [[I climb through the passageway into Room A-39, and more rocks fill the hole behind me.-&gt;39]]]



[[Go North-&gt;19]]

[[Go South-&gt;17]]]</tw-passagedata><tw-passagedata pid="28" name="19" tags="Elevator" position="750,850" size="100,100">###Room A-19: Brinstar Elevator Room 

{(link:&quot;Save game?&quot;)[

  (if:(save-game:&quot;Slot A&quot;))[

    Game saved!

  ](else: )[

    Sorry, I couldn&#39;t save your game.

  ]

]}



I can descend to Area B, Norfair. If I don’t want to go down, I can only head South.



[[Descend-&gt;41]]

[[Go South-&gt;18]]

(set: $startRoom to &quot;01&quot;, $location to &quot;Brinstar&quot;)</tw-passagedata><tw-passagedata pid="29" name="41" tags="Elevator" position="2700,1000" size="100,100">###Room B-41: Norfair Elevator Room

{(link:&quot;Save game?&quot;)[

  (if:(save-game:&quot;Slot A&quot;))[

    Game saved!

  ](else: )[

    Sorry, I couldn&#39;t save your game.

  ]

]

(set: $displayStats to 1)}



I can go up to Area A, Brinstar. If I don’t want to go up or just came down, there are Blue Doors leading from this room to the North and South, so I can move forward in either direction.



[[Ascend-&gt;19]]

[[Go North-&gt;43]]

[[Go South-&gt;42]]

(set: $startRoom to &quot;41&quot;, $location to &quot;Norfair&quot;)</tw-passagedata><tw-passagedata pid="30" name="38 Map" tags="Brinstar Item-Room Missiles" position="1220,1149" size="100,100">###Room A-38 - Brinstar Map Room

My Missiles slam into the locked Red Door. After firing 2 rounds, the door collapses noisily. (text-color: red)[(-2 Missiles.)](set: $missiles to $missiles - 2)



The door brings down a mass of rock with it, raising a thick shroud of dust. The room dims, but finally my field of vision into the next chamber clears. I enter the room.



A statue of a strange monster has been placed in the center of the room, and there is a plate at its feet. On the plate is a map of Brinstar. (Brinstar Map Acquired. I can now view the map below the Navigation Options.)(set: $items to it + (a: &quot;BrinstarMap&quot;))



The statue cradles a Missile Pod. (text-color: red)[Missile Pod (2) acquired. (set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;2&quot;))(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]Maximum Missiles increased to $maxMissiles.)] 



I store the above information in my computer. There are no hidden rooms here. [[I retrace my steps.-&gt;37]]</tw-passagedata><tw-passagedata pid="31" name="22" tags="Brinstar" position="900,1900" size="100,100">###Room A-22: Kraid&#39;s Room

“Warning!”



A shrill alarm sounds as an alert blares from my Command Computer.



“Warning. Warning. There are massive life signs coming from the next room. It appears to be Kraid, the boss monster of Area A, Brinstar. You can turn back from this room now. It is recommended you fight Kraid under ideal conditions.”



This room contains a series of chambers three rooms deep, each divided by a shutter door. The enemy doesn&#39;t know I&#39;m here yet. Obviously, I can still flee. Of course, since this is the boss of Brinstar, Kraid will be no ordinary opponent. Should I proceed with my current equipment, or come back again later? 



[[Proceed with current equipment-&gt;Kraid&#39;s Sidehopper]]

[[Go back at once and return later-&gt;Kraid Advice]]</tw-passagedata><tw-passagedata pid="32" name="21" tags="Brinstar Dead-End" position="1050,2050" size="100,100">###Room A-21

This is a dead end. There are no passages to hidden rooms, either, and the room just continues West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)[[Return West-&gt;20]]]</tw-passagedata><tw-passagedata pid="33" name="Kraid" tags="" position="1400,4225" size="100,100">(set: $displayMap to 0)&lt;img src=./images/Kraid.jpg&gt;



Although the Doublehopper was defeated, there is no time to relax. A saurian creature appears, covered with countless enormous spikes. It is slightly over three meters in height. The Command Computer says, “This is Kraid.”



Kraid’s attack method is to hurl the spikes growing throughout its body as a weapon. Without any kind of introduction, he fires his spikes.



{

	(if: $missiles &gt;= 2)[(display: &quot;Kraid Weapon Missiles 1&quot;)]

	(else:)[(display: &quot;Kraid Weapon No Missiles&quot;)]

}</tw-passagedata><tw-passagedata pid="34" name="08" tags="Brinstar" position="300,1750" size="100,100">###Room A-8

This is a corridor running East to West from here to room [A-4]. Apart from that, there is a Blue Door leading South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go East-&gt;07]]

[[Go South-&gt;09]]]</tw-passagedata><tw-passagedata pid="35" name="10" tags="Brinstar Hidden-Passage" position="300,2050" size="100,100">###Room A-10: Statue Room

This room ends in a gate. In front of the gate are two large statues of grotesque beasts: a massive lizard covered in spikes and fur and a fierce multi-eyed dragon. These must be Kraid and Ridley, the bosses of Brinstar and Norfair.



{

(if: $GateOpen is 0)[(display: &quot;Statue Room Description&quot;)](else:)[I&#39;ve inserted Kraid and Ridley&#39;s Key Stones. The gate to Mother Brain is now open. I can proceed to the Elevator room leading to Tourian.&lt;br&gt;&lt;br&gt;

]

(if: $GateOpen is 1)[[[Go North-&gt;09]]&lt;br&gt;[[Go South-&gt;11]]](else-if: $items contains &quot;KraidStone&quot; and &quot;RidleyStone&quot;)[[[Go back North-&gt;09]]](else:)[[[I don&#39;t have both Key Stones, so I must go back North to &lt;b&gt;Room A-9&lt;/b&gt;.-&gt;09]]]

}</tw-passagedata><tw-passagedata pid="36" name="Kraid Advice" tags="" position="1049,1899" size="100,100">I should come back after replenishing my Energy and Missiles. I [[exit through the Blue Door to the South-&gt;20]] and return to &lt;b&gt;Room A-20.&lt;/b&gt;</tw-passagedata><tw-passagedata pid="37" name="39" tags="Brinstar Red-Door" position="900,1000" size="100,100">###Room A-39

West is a passage leading to &lt;b&gt;Hidden Room A-18&lt;/b&gt; that I can blast with my Beam to go back through. (if: (history:) contains &quot;40&quot;)[To the South is an opened Red Door.](else:)[To the South there is a Red Door I can&#39;t pass through unless I use Missiles to destroy it.]



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Sidehopper&quot;)]](else:)[(set: $combat to 1){

(if: (history:) contains &quot;40&quot;)[The Red Door has been opened, so there is nothing in the next room. [[Go back West-&gt;18]]]

(else:)[(if: $missiles &gt; 1)[[[I fire 2 Missiles at the Red Door.-&gt;40]]](else:)[

I need at least 2 Missiles to open the Red Door. [[Go back &lt;b&gt;to Room A-18&lt;/b&gt;-&gt;18]]]]

}]</tw-passagedata><tw-passagedata pid="38" name="40" tags="Brinstar Item-Room" position="900,1150" size="100,100">###Room A-40

&lt;img src=./images/VariaRoom.jpg&gt;



I fire the Missiles at the door, which opens up to a dark, empty hole. I move into the chamber ahead, &lt;b&gt;Room A-40&lt;/b&gt;. (text-color: red)[(-2 Missiles.)](set: $missiles to $missiles - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



The room looks like some kind of laboratory. Although the floor&#39;s overall makeup—a sort of rocky cavern—hasn&#39;t changed, an organic computer made of crystals has been installed here. There is a pedestal in the center on which some kind of tiny machine has been placed, and the ambiance is noticeably different from that of the other room. The machine placed on the pedestal is an electromagnetic barrier generator that blunts enemy attacks. I add it to my equipment.



((text-color: orange)[Varia] acquired. Damage is reduced by 50%.)(set: $items to it + (a: &quot;Varia&quot;))(replace: ?Varia)[|Varia&gt;[Varia]]



There is nothing else in this room.



[[Return North-&gt;39]]</tw-passagedata><tw-passagedata pid="39" name="14" tags="Brinstar" position="450,1450" size="100,100">###Room A-14

This room is merely a corridor leading East and West. However, it seems like there might be something interesting here...



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)...However, there are no hidden passages leading to other rooms. In any event, this chamber only continues East and West.



[[Go East-&gt;12]]

[[Go West-&gt;23]]]</tw-passagedata><tw-passagedata pid="40" name="23" tags="Brinstar" position="300,1450" size="100,100">###Room A-23

Like &lt;b&gt;Room A-14&lt;/b&gt; to the East, this is part of a corridor that only runs from East to West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go East-&gt;14]]

[[Go West-&gt;24]]]</tw-passagedata><tw-passagedata pid="41" name="24" tags="Brinstar" position="150,1450" size="100,100">###Room A-24

In this room, there is a long corridor running all the way to the East and a Blue Door to the North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;26]]

[[Go East-&gt;23]]]</tw-passagedata><tw-passagedata pid="42" name="26" tags="Brinstar Hidden-Passage" position="149,1299" size="100,100">###Room A-26

This room has only a Blue Door to the South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(go-to: &quot;Zeb&quot;)]

	(else-if: $random is 2)[(go-to: &quot;Rio&quot;)]

	(else-if: $random is 4)[(go-to: &quot;Rio&quot;)]

	(else:)[(go-to: &quot;Geemer&quot;)]

}]](else:)[(set: $combat to 1)However, Radar picks up passages to hidden rooms to the North and East.   The hidden rooms are &lt;b&gt;A-28&lt;/b&gt; and &lt;b&gt;A-27&lt;/b&gt;(if: (history:) contains &quot;28&quot;)[. I have already collected the Bombs from &lt;b&gt;Room A-27&lt;/b&gt; so there is no need for me to go East.](else:)[.     ] There is something odd about the rock formation on the North wall. &lt;span class=&quot;revealsText&quot;&gt;I take a closer look. (click: &quot;I take a closer look.&quot;)[There&#39;s something odd about the rock formation here. When I move to the side, the answer is finally revealed: there is a carefully hidden passage disguised as an optical illusion! [[I proceed North to Room A-28.-&gt;28]]] &lt;/span&gt;



(click: &quot;.     &quot;)[After carefully searching the East wall, I discover a flaw in its surface. Shooting it reveals the hidden passage to &lt;b&gt;[[Room A-27&lt;/b&gt;. I go forward, and rubble fills the passageway behind me.-&gt;27]]]



[[Go South-&gt;24]]]</tw-passagedata><tw-passagedata pid="43" name="27" tags="GAME-OVER" position="300,1300" size="100,100">###Room A-27

There is a strange stone statue in this room with a metal plate at its feet. On the plate is written the means of defeating the Metroids. It reads, “Placing the Metroids in a frozen state will put them in suspended animation. You can destroy them at that time. However, much Energy is required to do this.”



The statue is also cradling a large egg of some kind. I crack it open and find Bombs inside. ((text-color: &quot;blue&quot;)[Bombs] acquired.(set: $items to it + (a: &quot;Bombs&quot;))(set: $Bombs to &quot;Bombs&quot;)(replace: ?Bombs)[|Bombs&gt;[$Bombs]] I can now destroy weak walls to open up secret passages.)



[[Go East-&gt;26]]</tw-passagedata><tw-passagedata pid="44" name="28" tags="" position="150,1150" size="100,100">###Room A-28

To the South is a hidden passage leading to the neighboring room. In addition, there is a Blue Door to the North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rio&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;32]]

[[Go South-&gt;26]]]</tw-passagedata><tw-passagedata pid="45" name="35" tags="Brinstar Trap-Room" position="150,850" size="100,100">###Room A-35

The moment I come through the Blue Door, I start floating. I quickly grab the edge of the door, halting my movement.



...A powerful magnetic field pulls at me from West to East. There is a massive magnetic field generator attached to the West wall, running steadily. There is a vaulted pit to the East, and although it&#39;s a considerable distance, I could definitely jump it if I were assisted by the magnetic pull. 



Aside from that, there is only the Blue Door to the South and the corridor with the vaulted pit to the East leading from this room. However, when I scan this room with my Radar, I find a secret door continuing North to a hidden room. However, I can’t easily grope my way along the North wall due to the force of the magnetic pull. 



(if: (history:) contains &quot;35&#39;&quot;)[I&#39;ve already entered the Hidden Room to the North.](else:)[Attempt to reach the hidden room.(click: &quot;Attempt to reach the hidden room.&quot;)[{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(go-to: &quot;99&quot;)]

	(else:)[(go-to: &quot;Poor Timing!&quot;)]

}]]

[[Fly East through the magnetic field (2 rooms distance) to Room &lt;b&gt;A-36&lt;/b&gt;.-&gt;36]]</tw-passagedata><tw-passagedata pid="46" name="99" tags="Brinstar Energy-Tank" position="150,700" size="100,100">###A-35&#39;

I fire the Booster Rockets equipped to my legs and jump to the wall on the North side of the room. Although the magnetic field pulls me back, I somehow overcome it and latch on to the wall. I go through the hidden passage and head to the hidden room on the other side. An Energy Tank has been placed here. ((text-color: yellow)[Energy Tank (B)] acquired. All Energy Tanks have been filled.)(set: $maxEnergy to $maxEnergy + 30, $energy to $maxEnergy, $energyPacks to it + (a: &quot;B&quot;))(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]]



I go back South again. In doing so, the flow of the magnetic field throws me two rooms East, and I rocket over to [[Room 36-&gt;36]].</tw-passagedata><tw-passagedata pid="47" name="Poor Timing!" tags="Brinstar" position="298,852" size="100,100">I cling to the wall on the North side of the room, fire my booster rockets, and jump. 



However, my timing for firing the boosters was off. All of a sudden, the powerful grip of the magnetic field flowing from the generator takes hold and flings me off to the East. I land with a heavy thud. I seem to have been thrown the distance of two rooms.



[[Accessing my computer, I verify I am in &lt;b&gt;Room A-36&lt;/b&gt;.-&gt;36]]</tw-passagedata><tw-passagedata pid="48" name="Geemer" tags="" position="1400,1674" size="100,100">(set: $displayMap to 0)A Geemer approaches. The Geemer is Combat Level I.	

(if: (history:) contains &quot;Geemer&quot;)[ ](else:)[(display: &quot;Scan Geemer&quot;)]

Should I attack it? Even though the Geemer is my opponent, the Normal Beam is sufficient. However, it&#39;s OK to use a different weapon.



(display: &quot;Fight the Geemer&quot;)</tw-passagedata><tw-passagedata pid="49" name="Fight the Geemer" tags="" position="1550,1600" size="100,100">{

(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Geemer Beams Wave&quot;)]

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Geemer Beams Ice&quot;)]

(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Geemer Beams Normal&quot;)]

}

Run, or do nothing to my opponent  (click: &quot;Run, or do nothing to my opponent  &quot;)[(replace: &quot;opponent  &quot;)[opponent](replace: &quot;Ice Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Normal Beam  &quot;)[](replace: &quot;Run  &quot;)[Run]&lt;hr&gt;(display: &quot;Run from the Geemer&quot;)]</tw-passagedata><tw-passagedata pid="50" name="Rio" tags="" position="1400,1974" size="100,100">(set: $displayMap to 0)An enemy creature draws near. It’s a Rio! The Rio’s is Command Level II.



(if: (history:) contains &quot;Rio&quot;)[Well, should I fight the Rio here?](else:)[(display: &quot;Scan Rio&quot;)]



(display: &quot;Fight the Rio&quot;)</tw-passagedata><tw-passagedata pid="51" name="Sidehopper" tags="" position="1400,2400" size="100,100">(set: $displayMap to 0)Suddenly, a Sidehopper rushes at me!



(if: (history:) contains &quot;Sidehopper&quot;)[I will need Missiles or something more powerful than the Normal Beam to defeat it. If I have none of these weapons, I have to run away.](else:)[(display: &quot;Scan Sidehopper&quot;)]



Select a Weapon:

(display: &quot;Fight Sidehopper&quot;)</tw-passagedata><tw-passagedata pid="52" name="Zeb" tags="" position="1401,2875" size="100,100">(set: $displayMap to 0, $lastRoom to (history:)&#39;s last)Something is flying at me. It’s a Zeb! Although they&#39;re weak Command Level I enemies, they attack one after another. If I beat them, I can replenish my Energy and Missiles...



(if: (history:) contains &quot;Zeb&quot;)[](else:)[(display: &quot;Scan Zeb&quot;)]Should I fight or ignore it and run?



(display: &quot;Fight Zeb&quot;)</tw-passagedata><tw-passagedata pid="53" name="Scan Geemer" tags="" position="2150,1750" size="100,100">&lt;img src=./images/Geemer.jpg&gt;



Although this is the middle of a fight, my computer will first give me an explanation of my enemy&#39;s Command Level. A Command Level is an enemy&#39;s strength class calculated from data entered into my Command Computer. The classes are divided into levels I through IV, with the number indicating how formidable the enemy is. I&#39;ll apply that information to the decisions I make in battle.

</tw-passagedata><tw-passagedata pid="54" name="Run from the Geemer" tags="Combat-Ended" position="1550,1750" size="100,100">The Geemer moves slowly. Since I won’t get much from a fight, I skip this battle. I jump over my earthbound enemy and let it go past.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="55" name="Energy Ball" tags="Combat-Ended" position="1400,1450" size="100,100">The enemy is destroyed, leaving an Energy Ball in its remains. (text-color: yellow)[(+1 Energy)] (set: $energy to $energy + 1)(if: $energy &gt; $maxEnergy)[(set: $energy to $maxEnergy)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(set: $combat to 0)(link:&quot;The battle is over.&quot;)[(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="56" name="Missile" tags="Combat-Ended" position="1700,1450" size="100,100">The enemy is destroyed, leaving a Missile in its remains. (text-color: red)[(+1 Missile)](set: $missiles to $missiles + 1)(if: $missiles &gt; $maxMissiles)[(set: $missiles to $maxMissiles)](replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



(set: $combat to 0)(link:&quot;The battle is over.&quot;)[(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="57" name="Nothing" tags="Combat-Ended" position="1850,1450" size="100,100">The enemy vanishes, leaving (text-color: red)[nothing] behind.



(set: $combat to 0)(link:&quot;The battle is over.&quot;)[(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="58" name="Missed the Geemer" tags="" position="1700,1751" size="100,100">However, my aim is slightly off, and the attack misses. The enemy Geemer just has the ability to crawl on the ground. However, in my rush, my aim was too far off, and I am hit by its ramming attack. I take damage. (text-color: red)[(-1 Energy)](set: $energy to $energy -1)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



The damage was only slight, but it was dealt by a Geemer, the weakest enemy! What should I do? Should I continue fighting? The Geemer has gotten to the wall and is coming at me again. Or is it better to just ignore it and run away? If I fight, go with a beam weapon I have.



(display: &quot;Fight the Geemer&quot;)]</tw-passagedata><tw-passagedata pid="59" name="Ice Beam Hits Geemer" tags="" position="1850,1750" size="100,100">The Ice Beam hits the Geemer squarely. It instantly freezes. As soon as I see this, I rapidly fire the Ice Beam and destroy the frozen Geemer.



{

	(set: $random to (random: 1,6))

	(if: $random is 1)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 6)[(display: &quot;Nothing&quot;)]

	(else:)[(display: &quot;Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="60" name="Fight the Rio" tags="" position="1550,1900" size="100,100">{

	(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Rio Beams Wave&quot;)]

	(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Rio Beams Ice&quot;)]

	(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Rio Beams Normal&quot;)]

	(if: $missiles &gt; 0)[(display: &quot;Rio Weapons Missiles&quot;)]

	(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Rio Weapons Screw Attack&quot;)]

}Run Away  (click: &quot;Run Away  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Normal Beam  &quot;, &quot;Screw Attack  &quot;, &quot;Missiles  &quot;, &quot;Normal Beam only  &quot;)[]&lt;hr&gt;(display: &quot;Run from the Rio&quot;)]</tw-passagedata><tw-passagedata pid="61" name="Missed the Rio" tags="Combat-Ended" position="2300,1900" size="100,100">My attack fails. It is impossible to match the movement speed of the Rio. Simultaneously, its talons bite into my suit. I fly back and slam to a stop at the wall. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



{

(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Rio Beams Wave&quot;)]

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Rio Beams Ice&quot;)]

(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Rio Beams Normal&quot;)]

(if: $missiles &gt; 0)[(display: &quot;Rio Weapons Missiles&quot;)]

(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Rio Weapons Screw Attack&quot;)]

}(link:&quot;Run  &quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)]](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="62" name="Run from the Rio" tags="" position="1550,2200" size="100,100">However, I can&#39;t run away that easily. The Rio loops around in the air and rushes at me.

	

{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Escape Rio Fails&quot;)]

	(else:)[(display: &quot;Escape Rio Success&quot;)]

}</tw-passagedata><tw-passagedata pid="63" name="Brinstar Combat Test" tags="" position="350,2350" size="100,100">You can fight what you want here.



Geemer  (click: &quot;Geemer  &quot;)[(go-to: &quot;Geemer&quot;)]

Rio    (click: &quot;Rio  &quot;)[(go-to: &quot;Rio&quot;)]

Sidehopper  (click: &quot;Sidehopper  &quot;)[(go-to: &quot;Sidehopper&quot;)]

Zeb    (click: &quot;Zeb  &quot;)[(go-to: &quot;Zeb&quot;)]

Kraid&#39;s Sidehopper    (click: &quot;Kraid&#39;s Sidehopper  &quot;)[(go-to: &quot;Kraid&#39;s Sidehopper&quot;)]

Doublehopper  (click: &quot;Doublehopper  &quot;)[(go-to: &quot;Doublehopper&quot;)]

Kraid  (click: &quot;Kraid  &quot;)[(go-to: &quot;Kraid&quot;)]

[[01]]

[[35]]

[[37]]



Get Varia (click: &quot;Get Varia&quot;)[(set: $items to it + (a: &quot;Varia&quot;))(replace: ?Varia)[|Varia&gt;[Varia]]]

Get Bombs (click: &quot;Get Bombs&quot;)[(set: $items to it + (a: &quot;Bombs&quot;))(replace: ?Bombs)[|Bombs&gt;[Bombs]]]



Get Kraid Key Stone (click: &quot;Get Kraid Key Stone&quot;)[(set: $items to it + (a: &quot;KraidStone&quot;))]

Get Ridley Key Stone (click: &quot;Get Ridley Key Stone&quot;)[(set: $items to it + (a: &quot;RidleyStone&quot;))]

[[10]]

(set: $GateOpen to 0, $KraidGate to 0, $RidleyGate to 0)



Get Normal Beam (click: &quot;Get Normal Beam&quot;)[(set: $items to it + (a: &quot;Normal Beam&quot;))(set: $items to it - (a: &quot;Ice Beam&quot;, &quot;Wave Beam&quot;)) --You got Normal Beam(replace: ?Beam)[|Beam&gt;[Normal Beam]]]

Get Ice Beam (click: &quot;Get Ice Beam&quot;)[(set: $items to it + (a: &quot;Ice Beam&quot;))(set: $items to it - (a: &quot;Normal Beam&quot;, &quot;Wave Beam&quot;)) --You got Ice Beam!(replace: ?Beam)[|Beam&gt;[Ice Beam]]]

Get Wave Beam (click: &quot;Get Wave Beam&quot;)[(set: $items to it + (a: &quot;Wave Beam&quot;))(set: $items to it - (a: &quot;Ice Beam&quot;, &quot;Normal Beam&quot;)) --You got Wave Beam(replace: ?Beam)[|Beam&gt;[Wave Beam]]]

Get Screw Attack (click: &quot;Get Screw Attack&quot;)[(set: $items to it + (a: &quot;Screw Attack&quot;))(replace: ?ScrewAttack)[|ScrewAttack&gt;[ScrewAttack]]]



Get Missiles (10) (click: &quot;Get Missiles (10)&quot;)[(set: $maxMissiles to it + 10, $missiles to it + 10)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]

Get Missiles (20)  (click: &quot;Get Missiles (20)&quot;)[(set: $maxMissiles to it + 20, $missiles to it + 20)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]

Refill Missiles (click: &quot;Refill Missiles&quot;)[(set: $missiles to $maxMissiles)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]]

Lose All Missiles (click: &quot;Lose All Missiles&quot;)[(set: $missiles to 0)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]]



Get Energy Tank (30)(click: &quot;Get Energy Tank (30)&quot;)[(set: $maxEnergy to it + 30, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]]]

Get Energy Tank (60)(click: &quot;Get Energy Tank (60)&quot;)[(set: $maxEnergy to it + 60, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]]]

Refill Energy(click: &quot;Refill Energy&quot;)[(set: $energy to $maxEnergy, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]]

Dangerously Low (click: &quot;Dangerously Low&quot;)[(set: $energy to 1)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]]



(set: $location to &quot;Brinstar&quot;)</tw-passagedata><tw-passagedata pid="64" name="Attack Missed Rio 2" tags="Combat-Ended" position="2000,2050" size="100,100">The Rio dodges my attack. Simultaneously, there is a massive blow to my shoulder. I suffer an attack from the Rio’s talons. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Should I run? Should I still fight? If I fight, with what weapon? 



{

(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Rio Beams Wave&quot;)]

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Rio Beams Ice&quot;)]

(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Rio Beams Normal&quot;)]

(if: $missiles &gt; 0)[(display: &quot;Rio Weapons Missiles&quot;)]

(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Rio Weapons Screw Attack&quot;)]

}Run  (click: &quot;Run  &quot;)[(set: $combat to 0, $displayMap to 1)(go-to: (history: )&#39;s last)]]</tw-passagedata><tw-passagedata pid="65" name="Rio Destroyed" tags="" position="2150,1900" size="100,100">Attack successful!



My attack hits, and instantly the Rio seems to shrink before it expands and disappears in an explosion. Its dying cry of agony echoes through the room.



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Missile&quot;)]

	(else-if: $random is 2)[(display: &quot;Energy Ball&quot;)]

	(else:)[(display: &quot;Nothing&quot;)]

}</tw-passagedata><tw-passagedata pid="66" name="Screw Attack Hits Rio" tags="" position="1850,2050" size="100,100">I jump, spin like a top, and ram into the Rio—a Screw Attack!



Powerful energy envelops my entire body, diffusing as I strike and damaging my opponent. The Screw Attack&#39;s power has enough force to defeat all enemies in a single hit. However, it requires great skill to successfully guide my body while spinning, and its drawback is there are many ways to fail.



This time the attack succeeds beautifully. 



The Rio takes the Screw Attack and is blown to bits in one fell swoop.



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 2)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="67" name="Scan Rio" tags="" position="2000,2200" size="100,100">&lt;img src=./images/Rio.jpg&gt;



The Rio is a creature resembling an enormous moth. The creature’s length when it spreads its wings is 1.15 meters, and it swoops down to attack with its enormous talons. The Rio flies through the air with its wings and uses its talons almost entirely in its attacks. The Rio’s attack method is also simple: it swoops down at high speed and strikes with its large talons.



However, if my only means of attack is the Normal Beam, this is not an opponent to make light of. As for the Rio&#39;s Command Level, Level II may be one step above the Geemer, the weakest enemy, but it&#39;s better to proceed with caution at first.



Given my current status, choose whether I should fight the Rio now.</tw-passagedata><tw-passagedata pid="68" name="A Bio-Weapon" tags="" position="850,100" size="100,100">If the Pirates understood the power of the Metroid they stole, it would be disastrous. It is dreadful to imagine what would happen if the Pirates were to manufacture that life-form into a weapon and us it against the Galactic Federation... 



[[Before that happens, it must be recaptured, no matter the cost.-&gt;The Planet Zebes]]</tw-passagedata><tw-passagedata pid="69" name="A hidden link" tags="" position="500,375" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="70" name="34" tags="Item-Room" position="300,1151" size="100,100">###Room A-34

(if: (history:) contains &quot;34&quot;)[](else:)[The Missile fires, pulling a tail of white smoke behind it. The smoke hangs thickly. I fire one more shot after it and feel the wall shudder as it is struck. Simultaneously, cracks spider down the door with a squeal, and a large hole bursts open. (text-color: red)[(-2 Missiles.)](set: $missiles to $missiles - 2)&lt;br&gt;&lt;br&gt;]A strange statue stands on a pedestal in the center of the adjoining room. The statue holds up a weapon as if in offering. I add it to my equipment.(set: $items to it + (a: &quot;Ice Beam&quot;))(set: $items to it - (a: &quot;Normal Beam&quot;, &quot;Wave Beam&quot;))(replace: ?Beam)[|Beam&gt;[Ice Beam]]



((text-color: blue)[Ice Beam] acquired. My current beam is replaced. If I replace the Ice Beam somewhere else, I can come back to this room when I need it later.)



It looks like there&#39;s nothing else in the room. What&#39;s more, there aren&#39;t any hidden rooms. 



[[Go back North-&gt;33]]</tw-passagedata><tw-passagedata pid="71" name="33" tags="" position="300,999" size="100,100">###Room A-33

To the West is a hidden passage looping back to &lt;b&gt;Room A-32&lt;/b&gt;. To the South is (if: (history:) contains &quot;34&quot;)[an open](else:)[a locked] Red Door.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 5)[(go-to: &quot;Sidehopper&quot;)]

	(else-if: $random is 4)[(go-to: &quot;Geemer&quot;)]

	(else-if: $random is 6)[(go-to: &quot;Geemer&quot;)]

	(else:)[(go-to: &quot;Rio&quot;)]

}]](else:)[(set: $combat to 1)



The battle is over. 



(if: (history:) contains &quot;34&quot;)[[[Go South to collect the Ice Beam-&gt;34]]

[[Go back West-&gt;32]]](else:)[(if: $missiles &gt; 1)[[[I fire 2 Missiles at the Red Door.-&gt;34]]](else:)[I need at least 2 Missiles to open the Red Door. [[Go back West-&gt;32]]]]]</tw-passagedata><tw-passagedata pid="72" name="32" tags="Secret-Passage" position="149,1000" size="100,100">###Room A-32

This room has only Blue Doors to the North and South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)As it turns out, there is a passage to a hidden room in the East side of this chamber. It is &lt;b&gt;Room A-33&lt;/b&gt;. A pool of lava bubbles near the wall. &lt;span class=&quot;revealsText&quot;&gt;I step closer...(click: &quot;I step closer...&quot;)[and find it is a holographic projection. There&#39;s a strange (if: $items contains &quot;Bombs&quot;)[alloy on the floor blocking the passage forward. (click: &quot;alloy&quot;)[I blast it open with a Bomb, revealing a passage to [[Room A-33.-&gt;33]]]](else:)[alloy on the floor blocking the passage forward.]]&lt;/span&gt;



[[Go North-&gt;35]]

[[Go South-&gt;28]]]</tw-passagedata><tw-passagedata pid="73" name="09" tags="" position="300,1900" size="100,100">###Room A-9

This is just a chamber running North to South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Zeb&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;08]]

[[Go South-&gt;10]]]</tw-passagedata><tw-passagedata pid="74" name="38 " tags="" position="449,1303" size="100,100">###Room A-38



This is the room where I collected some Missiles. I can also review the plate at the base of the statue:

(display: &quot;Secret Passage Instructions&quot;)

The statue in the center of the room and the plate at its feet are the same as they were before, but the impression of devastation has grown strong, either because the seal on the Red Door has been removed, or due to the sudden in-rush of fresh air. In addition, not even the shadows of enemies can be found in this room. There do not seem to be any hidden rooms, either.



[[I decide to go back to &lt;b&gt;Room A-37&lt;/b&gt;.-&gt;37]]</tw-passagedata><tw-passagedata pid="75" name="11" tags="Elevator" position="300,2200" size="100,100">###Room A-11: Brinstar, Elevator Room

{(link:&quot;Save game?&quot;)[

  (if:(save-game:&quot;Slot A&quot;))[

    Game saved!

  ](else: )[

    Sorry, I couldn&#39;t save your game.

  ]

]}



I can go down to the floor below, Area C, Tourian. If I don&#39;t want to go down, I can only go back North.



[[Go back North-&gt;10]]

[[Descend-&gt;80]]

(set: $startRoom to &quot;01&quot;, $location to &quot;Brinstar&quot;)</tw-passagedata><tw-passagedata pid="76" name="Secret Passage Instructions" tags="" position="1097,1149" size="100,100">

&lt;i&gt;Brinstar Evacuation Procedure:&lt;/i&gt;



* Block the passage in &lt;b&gt;Room A-2&lt;/b&gt; with rock. Anyone who wants to get to Kraid will need explosives.

* Place &lt;b&gt;Room A-32&lt;/b&gt; under lockdown. Cloak the entrance and seal the passage with Bomb-proof material, not weak alloy.

* In &lt;b&gt;Room A-18&lt;/b&gt;, fill in the tunnel to the right of the &quot;passage&quot; with rubble. Mask it to look like natural.</tw-passagedata><tw-passagedata pid="77" name="Hidden Link Setup" tags="footer" position="500,250" size="100,100">&lt;script&gt;

    /*

        Hidden links that are always hidden:

            &lt;span class=&quot;hidden&quot;&gt;[[A hidden link]]&lt;/span&gt;

    */

    $(&#39;.hidden&#39;)

        .addClass(&#39;hidden&#39;);



    /*

        Hidden links that hide unless you&#39;re hovering over them:

            &lt;span class=&quot;hides&quot;&gt;[[A hidden link]]&lt;/span&gt;

    */

    $(&#39;.hides&#39;)

        .addClass(&#39;hidden&#39;)

        .on(&#39;mouseenter&#39;, function () {

            $(this).removeClass(&#39;hidden&#39;);

        })

        .on(&#39;mouseleave&#39;, function () {

            $(this).addClass(&#39;hidden&#39;);

        });



    /*

        Hidden links that reveal themselves when you hover over them:

            &lt;span class=&quot;reveals&quot;&gt;[[A hidden link]]&lt;/span&gt;

    */

    $(&#39;.reveals&#39;)

        .addClass(&#39;hidden&#39;)

        .one(&#39;mouseenter&#39;, function () {

            $(this).removeClass(&#39;hidden&#39;);

        });

		

	$(&#39;.normal&#39;)

&lt;/script&gt;</tw-passagedata><tw-passagedata pid="78" name="Hidden Passages Setup" tags="footer" position="625,250" size="100,100">&lt;script&gt;

    /*

        Hidden text that hides unless you&#39;re hovering over it:

            &lt;span class=&quot;hides&quot;&gt;Enter text here&lt;/span&gt;

    */

    $(&#39;.hidesText&#39;)

        .addClass(&#39;hidden&#39;)

        .on(&#39;mouseenter&#39;, function () {

            $(this).removeClass(&#39;hidden&#39;);

        })

        .on(&#39;mouseleave&#39;, function () {

            $(this).addClass(&#39;hidden&#39;);

        });



    /*

        Hidden links that reveal themselves when you hover over them:

            &lt;span class=&quot;reveals&quot;&gt;Enter text here&lt;/span&gt;

    */

    $(&#39;.revealsText&#39;)

        .addClass(&#39;hidden&#39;)

        .one(&#39;mouseenter&#39;, function () {

            $(this).removeClass(&#39;hidden&#39;);

        });

		

	$(&#39;.normal&#39;)

&lt;/script&gt;</tw-passagedata><tw-passagedata pid="79" name="Scan Sidehopper" tags="" position="2000,2650" size="100,100">The Sidehopper is a half-mechanical cyborg. There are powerful springs attached to its legs that it uses for quick attacks. It is also the high Command Level IV. This opponent shouldn&#39;t be taken lightly. At any rate, the enemy is now rushing at me.</tw-passagedata><tw-passagedata pid="80" name="Fight Sidehopper" tags="" position="1550,2350" size="100,100">{

	(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Sidehopper Beam Wave&quot;)]

	(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Sidehopper Beam Ice&quot;)]

	(if: $items contains &quot;Normal Beam&quot;)[The Normal Beam is not powerful enough to fight a Sidehopper.&lt;br&gt;]

	(if: $missiles &gt; 0)[(display: &quot;Sidehopper Weapon Missiles&quot;)]

	(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Sidehopper Weapon Screw Attack&quot;)]

}Run  (click: &quot;Run  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;)[](replace: &quot;Run  &quot;)[Run]&lt;hr&gt;(display: &quot;Attempt Sidehopper Escape&quot;)]</tw-passagedata><tw-passagedata pid="81" name="Wave Beam Sidehopper" tags="" position="1700,2350" size="100,100">The Sidehopper attacks. Although it gives me a brutal strike using its powerful springs, I also give it a taste of my beam. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



The beam’s flash instantly swallows the frozen Sidehopper. The ice melts, and the creature coughs twice before it twitches, shudders, takes a leap, and explodes in mid-air.



{

	(set: $random to (random: 1,6))

	(if: $random is (3))[(display: &quot;Nothing&quot;)]

	(else-if: $random is 1)[(display: &quot;Medium Energy Ball&quot;)]

	(else-if: $random is 4)[(display: &quot;Medium Energy Ball&quot;)]

	(else:)[(display: &quot;Missile&quot;)]

}]</tw-passagedata><tw-passagedata pid="82" name="Medium Energy Ball" tags="Combat-Ended" position="1550,1450" size="100,100">An Energy Ball appears in the remains of the dead enemy. (text-color: yellow)[(+3 Energy.)](set: $energy to $energy + 3)(if: $energy &gt; $maxEnergy)[(set: $energy to $maxEnergy)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(set: $combat to 0)(link:&quot;The battle is over.&quot;)[(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="83" name="Ice Beam Sidehopper" tags="" position="1549,2500" size="100,100">I immediately fire the Ice Beam. The Sidehopper is instantly frozen. Now I can run away. Should I run or fight it now?



The enemy is currently frozen, but if I attack, it might melt.



Use the Ice Beam again  (click: &quot;Use the Ice Beam again  &quot;)[(replace: &quot;Screw Attack  &quot;, &quot;Missiles  &quot;, &quot;Run  &quot;)[]&lt;hr&gt;I continue my attack with the Ice Beam. The Ice Beam is 50% effective against a Sidehopper.

{

	(set: $random to (random: 1,2))

	(if: $random is 2)[(display: &quot;Ice Beam Misses Sidehopper&quot;)]

	(else:)[(display: &quot;Ice Beam Misses Sidehopper 2&quot;)]

}]

{

	(if: $missiles &gt; 0)[(display: &quot;Sidehopper Weapon Missiles&quot;)]

	(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Sidehopper Weapon Screw Attack&quot;)]

}Run  (click: &quot;Run  &quot;)[(replace: &quot;Fight  &quot;)[]&lt;hr&gt;(display: &quot;Escape Sidehopper&quot;)]</tw-passagedata><tw-passagedata pid="84" name="Escape Sidehopper" tags="Combat-Ended" position="1700,2650" size="100,100">I somehow manage to evade the Sidehopper and successfully avoid fighting. I don&#39;t even take damage!



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="85" name="Fight Frozen Sidehopper" tags="" position="1700,2500" size="100,100">What weapon should I use?



The enemy is currently frozen, but if I attack, it might melt.



Use the Ice Beam again  (click: &quot;Use the Ice Beam again  &quot;)[(replace: &quot;Screw Attack  &quot;, &quot;Missiles  &quot;, &quot;Run  &quot;)[]&lt;hr&gt;I continue my attack with the Ice Beam. The Ice Beam is 50% effective against a Sidehopper.

{

	(set: $random to (random: 1,2))

	(if: $random is 2)[(display: &quot;Ice Beam Misses Sidehopper&quot;)]

	(else:)[(display: &quot;Ice Beam Misses Sidehopper 2&quot;)]

}]

	(if: $missiles &gt; 0)[(display: &quot;Sidehopper Weapon Missiles&quot;)]

	(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Sidehopper Weapon Screw Attack&quot;)]</tw-passagedata><tw-passagedata pid="86" name="Screw Attack Sidehopper" tags="" position="1850,2350" size="100,100">I use the Screw Attack. The Screw Attack is 50% effective against the Sidehopper.



{

	(set: $random to (random: 1,2))

	(if: $random is 2)[(display: &quot;Screw Attack Hits Sidehopper&quot;)]

	(else:)[(display: &quot;Screw Attack Misses Sidehopper&quot;)]

}</tw-passagedata><tw-passagedata pid="87" name="Screw Attack Hits Sidehopper" tags="" position="2000,2350" size="100,100">Attack successful! The enemy&#39;s movements are quick, and although it gives me some trouble, I am somehow able to beat it. The creature screams a single shriek through the air.



{

	(set: $random to (random: 1,6))

	(if: $random is 2)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 1)[(display: &quot;Missile&quot;)]

	(else-if: $random is 3)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="88" name="Screw Attack Misses Sidehopper" tags="" position="2150,2350" size="100,100">The Screw Attack fails. I miss and just jump into the air close to the enemy. It&#39;s now an even match for my opponent. The Sidehopper attacks without hesitation. Of course, it uses the reinforced springs on its legs. I take the damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Should I continue again with the attack? Or should I run?

(display: &quot;Fight Sidehopper&quot;)]</tw-passagedata><tw-passagedata pid="89" name="Escape Screw Attack Sidehopper" tags="" position="2300,2350" size="100,100">I give up the attack and flee.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Escape Sidehopper&quot;)]

	(else:)[(display: &quot;Escape Sidehopper Fails&quot;)]

}</tw-passagedata><tw-passagedata pid="90" name="Escape Sidehopper Fails" tags="Combat-Ended" position="1850,2650" size="100,100">I feign rushing to attack, but change actions mid-motion. I take the Sidehopper’s attack, but the feint succeeds, and I somehow escape. However, my damage was also great. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)]](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="91" name="Attempt Sidehopper Escape" tags="" position="1550,2650" size="100,100">However, I can&#39;t get away so easily. The Sidehopper’s attack is much faster than humans can react. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



The Sidehopper attacks again.



{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Escape Sidehopper&quot;)]

	(else:)[(display: &quot;Escape Sidehopper Fails&quot;)]

	}]

</tw-passagedata><tw-passagedata pid="92" name="Missiles Sidehopper" tags="" position="2150,2500" size="100,100">I fire a Missile at the Sidehopper. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



Missiles are 100% effective against the Sidehopper. However, whether or not they hit is another story, as they have about 50% accuracy.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Missile Misses Sidehopper&quot;)]

	(else:)[(display: &quot;Missile Hits Sidehopper&quot;)]

}</tw-passagedata><tw-passagedata pid="93" name="Missile Misses Sidehopper" tags="" position="2300,2500" size="100,100">The Missile misses. The Sidehopper dodges it and strikes again using its tremendous jumping power. This attack’s speed was incredible, and since I could only fire my suit&#39;s boosters slightly, it was impossible to avoid. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Select a Weapon:

(display: &quot;Fight Sidehopper&quot;)]</tw-passagedata><tw-passagedata pid="94" name="Ice Beam Misses Sidehopper" tags="" position="1850,2500" size="100,100">

The Sidehopper attacks. Although it gives me a brutal strike using its powerful springs, I also give it a taste of my beam. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



The beam’s flash instantly swallows the frozen Sidehopper. The ice melts, and the creature coughs twice before it twitches, shudders, takes a leap, and explodes in mid-air.



{

	(set: $random to (random: 1,6))

	(if: $random is 3)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 1)[(display: &quot;Medium Energy Ball&quot;)]

	(else-if: $random is 4)[(display: &quot;Medium Energy Ball&quot;)]

	(else:)[(display: &quot;Missile&quot;)]

}]</tw-passagedata><tw-passagedata pid="95" name="Ice Beam Misses Sidehopper 2" tags="" position="2000,2500" size="100,100">The Sidehopper jumps high. My attack with the Ice Beam misses. The enemy uses its powerful springs to strike. Its thick legs spring into a powerful jump. A large blow sends my flying, and my back hits the wall. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



However, I&#39;m also not finished. While the Sidehopper is leaping, I keep attacking with the Ice Beam. Since I already damaged it a bit, the Sidehopper’s body crumbles from this attack. Simultaneously, it explodes. I took some damage, but am somehow able to defeat the Sidehopper.



{

	(set: $random to (random: 1,6))

	(if: $random is 3)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 2)[(display: &quot;Medium Energy Ball&quot;)]

	(else-if: $random is 5)[(display: &quot;Medium Energy Ball&quot;)]

	(else:)[(display: &quot;Missile&quot;)]

}]</tw-passagedata><tw-passagedata pid="96" name="Scan Zeb" tags="" position="2000,3250" size="100,100">The Zeb is a creature that lives in great numbers inside vent openings all over this asteroid. They have a sense of hearing akin to radar. If I approach these enemies, they will leap out of the vent openings and rush at me. Since they are Command Level I, the same as the Geemer, I can beat them rather easily, even if my only equipment is the Normal Beam. What&#39;s more, this creature leaves behind Energy Balls or Missiles in its remains, so it&#39;s fine to just dispatch a few of these creatures. They are convenient opponents when I want to save time.



</tw-passagedata><tw-passagedata pid="97" name="Fight Zeb" tags="" position="1550,2800" size="100,100">{

	(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Zeb Beams Wave&quot;)]

	(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Zeb Beams Ice&quot;)]

	(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Zeb Beams Normal&quot;)]

}Ignore it and run  (click: &quot;Ignore it and run  &quot;)[(replace: &quot;Wave Beam&quot;, &quot;Ice Beam&quot;, &quot;Normal Beam  &quot;)[](replace: &quot;run  &quot;)[run]&lt;hr&gt;(display: &quot;Run from Zeb&quot;)]</tw-passagedata><tw-passagedata pid="98" name="Run from Zeb" tags="" position="1550,3250" size="100,100">I ignore the Zeb coming at me and run. However, the Zeb moves fast. If I have the Ice Beam and use it to freeze the Zeb, I can run, but if not...



(if: $items contains (&quot;Ice Beam&quot;))[(display: &quot;Zeb Beams Ice Escape&quot;)](else:)[I don&#39;t have the Ice Beam. (click: &quot;I don&#39;t have the Ice Beam.&quot;)[(replace: &quot;Beam. &quot;)[Beam.]&lt;hr&gt;(display: &quot;Escape Zeb Fails&quot;)]]</tw-passagedata><tw-passagedata pid="99" name="Escape Zeb Successful" tags="Combat-Ended" position="1700,3249" size="100,100">A flash of light shoots out of the Ice Beam. The Zeb stops in mid-air for a split second, then falls down. Although the Zeb is a creature that attacks continuously, they won&#39;t attack when their comrade is frozen. In the meantime, I can successfully escape. Naturally, enemies won’t attack when they are frozen, so I completely avoid taking damage. 



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: $lastRoom)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="100" name="Escape Zeb Fails" tags="Combat-Ended" position="1850,3250" size="100,100">Zebs have a sense of hearing like radar, and the enemy feels me draw near. However, their range of hearing is extremely narrow. If I move away even just a little, they might not be able to detect me. I fire my suit&#39;s boosters and make a run for it.



...However, the Zeb’s speed is greater. The Zeb commences with a ramming attack. My maneuvering controls go wild! I take damage. (text-color: red)[(-1 Energy)](set: $energy to $energy -1)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Even so, I am able to leave the range of their hearing before the next Zeb can come out.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: $lastRoom)]](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="101" name="Beam Hits Zeb" tags="" position="1850,2800" size="100,100">My attack is successful. The beam hit the Zeb as it flies through my line of fire, blowing it to bits.



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Zeb Energy Ball&quot;)]

	(else-if: $random is 2)[(display: &quot;Zeb Nothing&quot;)]

	(else-if: $random is 3)[(display: &quot;Zeb Missiles&quot;)]

}</tw-passagedata><tw-passagedata pid="102" name="Zeb Energy Ball" tags="" position="1550,3100" size="100,100">An Energy Ball springs forth from the remains of the destroyed Zeb. (text-color: yellow)[(+2 Energy)](set: $energy to $energy + 2)(if: $energy &gt; $maxEnergy)[(set: $energy to $maxEnergy)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(display: &quot;Fight Another Zeb&quot;)</tw-passagedata><tw-passagedata pid="103" name="Fight Another Zeb" tags="" position="2000,3100" size="100,100">The figure of the next Zeb emerges from the mouth of the air vent. Once again, it rushes at my at high speed. I should fight if I want to stock up on Energy as well as Missiles. If not, ignore it and run.



Fight  (click: &quot;Fight  &quot;)[

{

	(if: $items contains &quot;Normal Beam&quot;)[(go-to: &quot;Zeb Normal Beam&quot;)]

	(else:)[(go-to: &quot;Beam Shoots Toward Zeb&quot;)]

}]

Ignore it and run  (click: &quot;Ignore it and run&quot;)[(replace: &quot;Fight  &quot;)[]&lt;hr&gt;(display: &quot;Run from Zeb&quot;)]</tw-passagedata><tw-passagedata pid="104" name="Zeb Missiles" tags="" position="1700,3100" size="100,100">The Zeb is destroyed, leaving Missiles behind in its remains. (text-color: red)[(+2 Missiles)](set: $missiles to $missiles + 2)(if: $missiles &gt; $maxMissiles)[(set: $missiles to $maxMissiles)](replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



(display: &quot;Fight Another Zeb&quot;)</tw-passagedata><tw-passagedata pid="105" name="Zeb Nothing" tags="" position="1850,3100" size="100,100">The Zeb has been destroyed, leaving (text-color: red)[nothing] behind in its remains.



(display: &quot;Fight Another Zeb&quot;)</tw-passagedata><tw-passagedata pid="106" name="Beam Misses Zeb" tags="" position="1999,2801" size="100,100">However, my attack fails. I take damage from the Zeb&#39;s high-speed ramming attack. (text-color: red)[(-1 Energy)](set: $energy to $energy -1)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Should I continue with another attack, or is it better to run away?



Fight  (click: &quot;Fight  &quot;)[(replace: &quot;Fight  &quot;)[Fight](replace: &quot;Ignore it and run  &quot;)[]&lt;hr&gt;(display: &quot;Beam Shoots Toward Zeb&quot;)]

Ignore it and run  (click: &quot;Ignore it and run&quot;)[(replace: &quot;Fight  &quot;)[]&lt;hr&gt;(display: &quot;Run from Zeb&quot;)]]</tw-passagedata><tw-passagedata pid="107" name="Beam Shoots Toward Zeb" tags="" position="1700,2800" size="100,100">My beam shoots towards the Zeb.



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Beam Misses Zeb&quot;)]

	(else:)[(display: &quot;Beam Hits Zeb&quot;)]

}

</tw-passagedata><tw-passagedata pid="108" name="Normal Beam Hits Zeb" tags="" position="1700,2950" size="100,100">Even though I&#39;m using the Normal Beam, the enemy isn&#39;t that scary once I can land a direct hit. The destructive power of the Normal Beam isn’t just for show. The Zeb is defeated.



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Zeb Nothing&quot;)]

	(else:)[(display: &quot;Zeb Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="109" name="Normal Beam Misses Zeb" tags="" position="1850,2950" size="100,100">However, the Zeb avoids my attack. At the same time, I take a blow from the Zeb chasing me through the air at high speed. I take damage. (text-color: red)[(-1 Energy)](set: $energy to $energy -1)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Should I still attack? Or else, is it OK to run?



Fight  (click: &quot;Fight  &quot;)[(replace: &quot;Fight  &quot;)[Fight](replace: &quot;Ignore it and run  &quot;)[]&lt;hr&gt;(display: &quot;Zeb Normal Beam&quot;)]

Ignore it and run  (click: &quot;Ignore it and run&quot;)[(replace: &quot;Fight  &quot;)[]&lt;hr&gt;(display: &quot;Run from Zeb&quot;)]]</tw-passagedata><tw-passagedata pid="110" name="Zeb Normal Beam" tags="" position="1550,2950" size="100,100">I attack the Zeb with the Normal Beam. Since my opponent is a Command Level I Zeb, even the Normal Beam should be able to defeat it.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Normal Beam Hits Zeb&quot;)]

	(else:)[(display: &quot;Normal Beam Misses Zeb&quot;)]

}</tw-passagedata><tw-passagedata pid="111" name="Kraid&#39;s Sidehopper" tags="" position="1400,3400" size="100,100">(set: $displayMap to 0)The instant I decided to proceed, the shutter in front of me clangs open. Simultaneously, a Sidehopper appears. I can’t go forward unless I defeat the Sidehopper. I have to use Missiles.



{

	(if: $missiles &gt; 0)[(display: &quot;Kraid&#39;s Sidehopper Weapon Missiles&quot;)]

	(else:)[(display: &quot;Kraid&#39;s Sidehopper Missiles Out&quot;)]

}</tw-passagedata><tw-passagedata pid="112" name="Missile Kraid&#39;s Sidehopper" tags="" position="1550,3400" size="100,100">I fire a Missile at the Sidehopper. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[First, there is a deafening sound like clanging metal. Then comes the slow, muffled roar of the Sidehopper. Finally, the ear-splitting boom of a loud explosion shakes the room. [[The Missile hits the Sidehopper, smashing it to atoms.-&gt;Doublehopper]]]

	(else:)[(display: &quot;Kraid&#39;s Sidehopper Missile Misses&quot;)]

}</tw-passagedata><tw-passagedata pid="113" name="Kraid&#39;s Sidehopper No Missiles" tags="" position="1850,3400" size="100,100">The Sidehopper’s leaping power is incredible. It first jumps as if to swing around to my right. I take a stance to guard this side, but in the next moment, it jumps to my left. The creature&#39;s attack is a feint making full use of its leaping abilities.



I feel the impact in my left shoulder. The Sidehopper’s enormous two-meter-tall body slams into me. I take an extremely large amount of damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-8 Energy)](set: $energy to $energy - 8)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



{

	(if: $energy &gt; 0)[(display: &quot;Escape Kraid&#39;s Sidehopper&quot;)]

	(else:)[(display: &quot;Kraid&#39;s Sidehopper Death&quot;)]

}</tw-passagedata><tw-passagedata pid="114" name="Escape Kraid&#39;s Sidehopper" tags="" position="2000,3400" size="100,100">I take a lot damage, but successfully avoid the Sidehopper&#39;s next ramming attack. I manage to escape since the creature is slowed down under its own weight. I get away before it can raise itself up. This enemy is the same as the other enemies I&#39;ve encountered, so if I can get away, [[there is no way it will come after me.-&gt;Doublehopper]]</tw-passagedata><tw-passagedata pid="115" name="Doublehopper" tags="" position="1400,3625" size="100,100">&lt;img src=./images/Doublehopper.jpg&gt;



I enter a small room. Then, another shutter drops. This time, I use a beam weapon, and the shutter melts. There is something on the other side of the melted hole. It’s a creature I haven’t seen before. My Command Computer begins a high-speed data analysis. The figure resembles a Sidehopper. And yet, while the Sidehopper has two legs, this one has four cyborg legs.



Computer Output:



“Doublehopper. An evolved Sidehopper with additional modifications. This cyborg creature guards the area immediately outside Kraid’s Room.”



The Doublehopper’s attack abilities are completely unknown. Should I fight with my current equipment? Or else, go back to refill my Energy and Missiles?



Fight with current equipment  (click: &quot;Fight with current equipment  &quot;)[(replace: &quot;Go back  &quot;)[](display: &quot;Fight Doublehopper&quot;)]

Go back  (click: &quot;Go back  &quot;)[(replace: &quot;Fight with current equipment  &quot;)[]&lt;hr&gt;However, before I can get away, the Doublehopper comes around behind me. It takes a giant leap...

{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Doublehopper Escape Fails&quot;)]

	(else:)[(display: &quot;Escape Doublehopper Success&quot;)]

}]</tw-passagedata><tw-passagedata pid="116" name="Kraid&#39;s Sidehopper Death" tags="GAME-OVER" position="2150,3400" size="100,100">The Sidehopper’s next attack has enough force to stop my movement instantly. And, the creature doesn&#39;t miss. The Sidehopper’s next strike damages my legs with a direct hit. Given my current state of immobility, this attack has more than double the power of the previous one. As a result, my legs are completely paralyzed. 



My legs may have been modified with multiple cyborg enhancements, but they have become brittle after so much damage has been loaded onto them. Now that I am unable to move, the Sidehopper inflicts a series of consecutive attacks.



My chances of being rescued aren’t even one in a million.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="117" name="Kraid&#39;s Sidehopper Missile Misses" tags="" position="1700,3400" size="100,100">The Missile passes under the Sidehopper&#39;s legs, and after a short flight, smashes into the wall. Part of the wall crumbles down. The Missile attack failed.



{

	(if: $missiles &gt; 0)[(display: &quot;Kraid&#39;s Sidehopper Weapon Missiles&quot;)]

	(else:)[(display: &quot;Kraid&#39;s Sidehopper Missiles Out&quot;)]

}</tw-passagedata><tw-passagedata pid="118" name="Fight Doublehopper" tags="" position="1550,3550" size="100,100">Select a weapon to use against the Doublehopper.



{

	(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Doublehopper Beam Wave&quot;)]

	(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Doublehopper Beam Ice&quot;)]

	(if: $missiles &gt; 0)[(display: &quot;Doublehopper Weapon Missiles&quot;)]

}Run  (click: &quot;Run  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;)[]&lt;hr&gt;(display: &quot;Attempt Sidehopper Escape&quot;)]</tw-passagedata><tw-passagedata pid="119" name="Attempt Escape Doublehopper" tags="" position="1550,4000" size="100,100">A warning issues from my Command Computer:



“It is virtually impossible to achieve victory over the Doublehopper with your current equipment. For the moment, it would be best to challenge the creature again after pulling back and better equipping yourself.”



I immediately take the advice and pull back. Once I collect the weapons, I can go back again to the entrance of Kraid’s room.



The problem is...will I escape the Doublehopper without any trouble?



(display: &quot;Escape Doublehopper&quot;)</tw-passagedata><tw-passagedata pid="120" name="Escape Doublehopper" tags="" position="1700,4000" size="100,100">However, before I can get away, the Doublehopper comes around behind me. It takes a giant leap...



{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Doublehopper Escape Fails&quot;)]

	(else:)[(display: &quot;Escape Doublehopper Success&quot;)]

}</tw-passagedata><tw-passagedata pid="121" name="Doublehopper Escape Fails" tags="GAME-OVER" position="1850,4000" size="100,100">I try to avoid the Doublehopper’s jump attack, but my footing is a little unstable. The creature&#39;s enormous body falls on me from about ten meters in the air. I can’t avoid the attack. The Sidehopper’s massive density increases its gravitational acceleration. The damage from that single attack exceeds all my Energy. My body is crushed without a trace. The Doublehopper continues to jump in triumph...



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="122" name="Wave Beam Misses Doublehopper" tags="" position="1850,3550" size="100,100">The Wave Beam slices through the air. However, the Doublehopper avoids the Wave Beam with its enhanced legs. Then, still avoiding the attack, it repeats the jump, striking at me. In a flash, the creature&#39;s upper body swings down on me. I immediately raise my arm in defense, but the Doublehopper&#39;s power is tremendous. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



But I still continue to attack.  (click: &quot;But I still continue to attack.&quot;)[(replace: &quot;attack.  &quot;)[attack.]&lt;hr&gt;(display: &quot;Doublehopper Wave Beam&quot;)]]</tw-passagedata><tw-passagedata pid="123" name="Doublehopper Wave Beam" tags="" position="1700,3550" size="100,100">I spray the Doublehopper with the Wave Beam.



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Wave Beam Misses Doublehopper&quot;)]

	(else:)[(display: &quot;Wave Beam Damaged Doublehopper&quot;)]

}</tw-passagedata><tw-passagedata pid="124" name="Wave Beam Damaged Doublehopper" tags="" position="2000,3550" size="100,100">I successfully deal the Doublehopper a considerably large blow. The creature makes a big jump trying to avoid the Wave Beam. However, based on previous experience, I predicted the Doublehopper would make this move, and the Wave Beam oscillates up and down and two bursts slam into it. As expected, the creature can&#39;t dodge the attack, even with its jumping power.



(click: &quot;As expected, the creature can&#39;t dodge the attack, even with its jumping power.&quot;)[&lt;hr&gt;(display: &quot;Wave Beam Doublehopper Again&quot;)]</tw-passagedata><tw-passagedata pid="125" name="Wave Beam Doublehopper Again" tags="" position="2150,3550" size="100,100">Although the Doublehopper has taken damage and its movement has slowed, I still haven’t defeated it. I press on with another attack. I pump the Wave Beam into the Doublehopper again.



{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Wave Beam Misses Doublehopper 2&quot;)]

	(else:)[The Wave Beam finishes off the Doublehopper. The creature finally bursts, exploding from the inside. The beast is slain. [[I can proceed forward.-&gt;Kraid]]]

}</tw-passagedata><tw-passagedata pid="126" name="Wave Beam Misses Doublehopper 2" tags="" position="2300,3550" size="100,100">However, this attack missed. My prediction of the Doublehopper’s move was wrong. Although I simply confused left with right, I actually take a large amount of damage. The attack, taken from an unexpected direction, is a heavy blow. If I could have accurately predicted the direction of the blow, I could have defended against it, or at least prepared for it...



The creature&#39;s attack lands squarely on my right flank. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-8 Energy)](set: $energy to $energy - 8)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Well, that wasn&#39;t the least bit painless... Nevertheless, I am able to respond with my best counterattack. Even while I am blown back by the attack, I am able to give the Doublehopper a taste of the Wave Beam. However, the creature also manages to execute a large jump. The Doublehopper continues to press on with the attack.  (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-8 Energy)](set: $energy to $energy - 8)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(click: &quot;The Doublehopper continues to press on with the attack.  &quot;)[(replace: &quot;attack.  &quot;)[attack.]&lt;hr&gt;(display: &quot;Wave Beam Doublehopper Again&quot;)]]]</tw-passagedata><tw-passagedata pid="127" name="Doublehopper Ice Beam" tags="" position="1550,3700" size="100,100">I attack the Doublehopper with the Ice Beam.



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Ice Beam Hits Doublehopper&quot;)]

	(else:)[(display: &quot;Ice Beam Misses Doublehopper&quot;)]	

}</tw-passagedata><tw-passagedata pid="128" name="Ice Beam Hits Doublehopper" tags="" position="1700,3700" size="100,100">Even though it’s an Ice Beam attack, if I continue to adjust the exposure levels just right, I can damage the Doublehopper. If I can do that, the creature will remain frozen and won’t be able to attack. I keep firing. 



(click: &quot;I keep firing. &quot;)[&lt;hr&gt;(display: &quot;Ice Beam Doublehopper Again&quot;)]</tw-passagedata><tw-passagedata pid="129" name="Ice Beam Doublehopper Again" tags="" position="2000,3700" size="100,100">I continue attacking with the Ice Beam.



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Ice Beam Misses Doublehopper 2&quot;)]

	(else:)[(display: &quot;Ice Beam Destroys Doublehopper&quot;)]

}</tw-passagedata><tw-passagedata pid="130" name="Ice Beam Misses Doublehopper" tags="" position="1850,3700" size="100,100">Using the Ice Beam was a mistake. While it&#39;s possible to beat the Doublehopper when it&#39;s well-frozen if I fire the beam just right, I ended up taking an attack from the speedy Doublehopper. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



The Doublehopper regains its abilities the instant the ice melts and strikes using the springs on its forelegs. The impact of the springs on the creature&#39;s forelegs sends me flying backward even as I succeed in firing the Ice Beam once more. 



Attack again.  (click: &quot;Attack again.  &quot;)[(replace: &quot;Attack again.  &quot;)[Attack again.]&lt;hr&gt;(display: &quot;Doublehopper Ice Beam&quot;)]]</tw-passagedata><tw-passagedata pid="131" name="Ice Beam Misses Doublehopper 2" tags="" position="2300,3700" size="100,100">The Ice Beam attack fails. My aim shifts slightly, and during the interval where the beam missed, the Doublehopper recovers and strikes. The creature&#39;s forelimbs draw before my eyes. In the next instant, they send me flying. The enhanced springs are effective, and its impact is tremendous, sending me flying ten meters easily. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



My back slams to a stop against the wall. However, in that instant, I somehow manage to successfully land a blow with the Ice Beam on the Doublehopper. I seize the opportunity and attack again. (click: &quot;I seize the opportunity and attack again. &quot;)[(replace: &quot;again.  &quot;)[again.]&lt;hr&gt;(display: &quot;Ice Beam Doublehopper Again&quot;)]]</tw-passagedata><tw-passagedata pid="132" name="Ice Beam Destroys Doublehopper" tags="" position="2150,3700" size="100,100">&lt;i&gt;SKREEEE!&lt;/i&gt;



A shriek flies from the insectoid mouth of the Doublehopper. I definitely dealt it some damage. I press on with the attack and continue with the Ice Beam for a few seconds more. Before long, the Doublehopper’s body begins to twitch and tremble. When the Doublehopper&#39;s voltage reaches its peak, [[the creature explodes from the inside.-&gt;Kraid]]</tw-passagedata><tw-passagedata pid="133" name="Doublehopper Missiles" tags="" position="1550,3850" size="100,100">I fire a stream of Missiles at the Doublehopper.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Missiles Miss Doublehopper&quot;)]

	(else:)[(display: &quot;Missiles Destroy Doublehopper&quot;)]	

}</tw-passagedata><tw-passagedata pid="134" name="Missiles Miss Doublehopper" tags="" position="1700,3850" size="100,100">I predict the Doublehopper&#39;s jump as best I can and fire Missiles to meet its arc. The room turns into a pandemonium with the sounds of Missiles firing, explosions, and screeching metal. (if: $missiles &gt; 6)[I score seven hits](else-if: $missiles is 1)[I score a hit!)](else:)[I score $missiles hits] (if: $missiles &gt; 9)[After ten Missiles are fired, an](else-if: $missiles is 1)[An](else:)[After all my missiles are fired, an] incredibly loud explosion echoes throughout the chamber. The Doublehopper is unable to withstand the assault and explodes. Although I consumed (if: $missiles &gt; 10)[ten Missiles](else:)[all my Missiles], [[the Doublehopper has been defeated.-&gt;Kraid]] (text-color: red)[(if: $missiles &gt; 9)[(-10 Missiles)](else-if: $missiles is 1)[-1 Missile](else:)[(-$missiles Missiles)]]

{

	(set: $missiles to $missiles -10)

	(if: $missiles &lt; 0)[(set: $missiles to 0)]

	(else:)[]

	(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]

}</tw-passagedata><tw-passagedata pid="135" name="Missiles Destroy Doublehopper" tags="" position="1850,3850" size="100,100">The Missiles strike one after another. With a sound like creaking metal, five dull, intermittent explosions synchronize with the sound of the Doublehopper shattering into pieces. The creature succumbed to an attack from (if: $missiles &gt;= 5)[5](else:)[$missiles] Missiles. (text-color: red)[(-(if: $missiles &gt;= 5)[5](else:)[$missiles] Missiles.)]

{

	(set: $missiles to $missiles - 5)

	(if: $missiles &lt; 0)[(set: $missiles to 0)]

	(else:)[]

	(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]

}



[[I proceed to the next chamber.-&gt;Kraid]]</tw-passagedata><tw-passagedata pid="136" name="Kraid No Missiles" tags="" position="1550,4450" size="100,100">My Command Computer warns, “You can’t win against Kraid without Missiles.”



I distract Kraid by firing a beam at his backside. In that instant, I try to somehow escape the room while avoiding Kraid’s attack. 



I should leave Kraid’s Room for now and come back after replenishing my Energy and Missiles.



(display: &quot;Attempt to Escape Kraid&quot;)</tw-passagedata><tw-passagedata pid="137" name="Attempt to Escape Kraid" tags="Combat-Ended" position="1700,4450" size="100,100">Can I escape from Kraid’s room?(click: &quot;Can I escape from Kraid’s room?&quot;)[&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Escape Kraid Fails&quot;)]

	(else:)[I slip past the enemy’s attack. In any case, I can come back to fight the creature again once my Missiles and Energy are replenished. [[Go back to Room A-20-&gt;20]]]

}](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="138" name="Escape Kraid Fails" tags="GAME-OVER" position="1850,4450" size="100,100">However, I couldn’t escape from Kraid. His enormous, pudgy body moves faster than I thought possible, and he circles around right back in front of me. Kraid hurls thick spikes at me from all over his body. Their number gradually increases, and soon I am unable to avoid the spikes dancing through the air. He has completely cut off my escape route. Then I realize that Kraid isn’t the only thing surrounding me. A large army of Sidehoppers has been gathering unnoticed. My chances of rescue aren’t even one in a million.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="139" name="Kraid Missiles 1" tags="" position="1550,4150" size="100,100">I attack Kraid with Missiles. 2 Missiles fly towards him. (text-color: red)[(-2 Missiles)](set: $missiles to $missiles - 2) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Missiles Hit Kraid 1&quot;)]

	(else:)[(display: &quot;Missiles Miss Kraid 1&quot;)]

}</tw-passagedata><tw-passagedata pid="140" name="Missiles Hit Kraid 1" tags="" position="1700,4150" size="100,100">Before Kraid fires the spikes on his body, my Missiles score a direct hit. The creature bellows a cry of anguish.



{

	(if: $missiles &gt;= 2)[(display: &quot;Kraid Weapon Missiles 2&quot;)]

	(else:)[(display: &quot;Kraid Weapon No Missiles&quot;)]

}</tw-passagedata><tw-passagedata pid="141" name="Kraid Missiles 2" tags="" position="1850,4150" size="100,100">I fire Missiles at Kraid again. Although he was not frightened by the previous attack, he is a little hesitant about taking damage again. The 2 Missiles fly towards Kraid. (text-color: red)[(-2 Missiles)](set: $missiles to $missiles - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



Kraid rears up as if in a panic, and to guard his body from the Missiles, fires the spikes growing on his hide.  (click: &quot;fires the spikes growing on his hide.  &quot;)[(replace: &quot;hide.  &quot;)[hide.]&lt;hr&gt;

{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Kraid Defeated&quot;)]

	(else:)[(display: &quot;Missiles Miss Kraid 2&quot;)]

}]</tw-passagedata><tw-passagedata pid="142" name="Kraid Defeated" tags="" position="2000,4150" size="100,100">The 2 Missiles hit their target squarely. (text-color: red)[(-2 Missiles)](set: $missiles to $missiles - 2) 



Kraid stops moving mid-stride—time seems to stop for an instant. However, it was just for a moment, and in the next instant, he begins to “move” again!



Cracks spider out all across Kraid’s body. The extremely fine cracks cover his entire form. In the next instant, brilliant beams of light begin to seep through the cracks one after the other. It is the sign of an explosion. 



To prepare myself, I get down to avoid taking the full impact. The light gradually grows in intensity and brilliance, and when it reaches its peak, the entire chamber shakes and an enormous blast fills the room.(click: &quot;an enormous blast fills the room.&quot;)[



(text-style: &quot;rumble&quot;)[—KABOOM!]



When the noise subsides, I walk up to the place where Kraid had once been. 



It was how I expected. A small black stone is rolling around in the center of the spot where Kraid exploded. And this egg-sized, oddly-shaped, jet-black rock is the Keystone.



((text-color: &quot;green&quot;)[Kraid&#39;s Key Stone] collected. My Energy and Missiles are refilled to their current maximum.)(set: $energy to $maxEnergy, $missiles to $maxMissiles, $items to it + (a: &quot;KraidStone&quot;))(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



Kraid, Brinstar’s boss, has been defeated.(set: $kraidDefeated to 1)



The door locks behind me with a hollow echo as I return to [[Room A-20.-&gt;20]] (set: $displayMap to 1)]</tw-passagedata><tw-passagedata pid="143" name="Missiles Miss Kraid 1" tags="" position="1550,4300" size="100,100">The Missiles I fired are taken out by the spikes Kraid uses as weapons. The Missiles explode harmlessly before they can reach him. I take damage from his attack. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



	(if: $missiles &gt;= 2)[Continue the attack  (click: &quot;Continue the attack  &quot;)[(replace: &quot;Continue the attack  &quot;)[Continue the attack]&lt;hr&gt;(display: &quot;Kraid Missiles 1&quot;)]](else:)[(display: &quot;Kraid Weapon No Missiles&quot;)]]</tw-passagedata><tw-passagedata pid="144" name="Missiles Miss Kraid 2" tags="" position="1850,4300" size="100,100">The Missiles don&#39;t reach Kraid. Kraid’s spikes detonate them in mid-air. Simultaneously, another set of spikes comes flying towards me. The spikes’ speed is faster than expected, and I end up unable to avoid all of them. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



	(if: $missiles &gt;= 2)[Continue the attack  (click: &quot;Continue the attack  &quot;)[(replace: &quot;Continue the attack  &quot;)[Continue the attack]&lt;hr&gt;(display: &quot;Kraid Missiles 2&quot;)]](else:)[(display: &quot;Kraid Weapon No Missiles&quot;)]]</tw-passagedata><tw-passagedata pid="145" name="Geemer Wave Beam" tags="" position="1700,1600" size="100,100">The Wave Beam is 100% effective against the Geemer. My aim is precise. However, the beam also has the power to completely disintegrate the Geemer, even if it only hits one part of it. Of course, the Geemer can&#39;t walk away from this attack, either.



The Geemer is vaporized the instant I fire the beam.



{

	(set: $random to (random: 5,6))

	(if: $random is 5)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 4)[(display: &quot;Missile&quot;)]

	(else-if: $random is 6)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Energy Ball&quot;)]



}</tw-passagedata><tw-passagedata pid="146" name="Geemer Ice Beam" tags="" position="1850,1600" size="100,100">I fire the Ice Beam at the Geemer.



{

	(set: $random to (random: 1,6))

	(if: $random is 2)[(display: &quot;Missed the Geemer&quot;)]

	(else-if: $random is 5)[(display: &quot;Missed the Geemer&quot;)]

	(else:)[(display: &quot;Ice Beam Hits Geemer&quot;)]

}</tw-passagedata><tw-passagedata pid="147" name="Geemer Normal Beam" tags="" position="2000,1600" size="100,100">I attack the Geemer with the Normal Beam. The Normal Beam is 50% effective against a Geemer.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Normal Beam Hits Geemer&quot;)]

	(if: $random is 2)[(display: &quot;Missed the Geemer&quot;)]

}</tw-passagedata><tw-passagedata pid="148" name="Normal Beam Hits Geemer" tags="" position="2000,1750" size="100,100">The Geemer is the lowest-ranking enemy creature. If my aim is perfect, this enemy is easy to beat, even with the Normal Beam.



The Normal Beam fired from my arm is sucked into the small creature barreling down at me. The Geemer is instantly vaporized. 



(display: &quot;Energy Ball&quot;)</tw-passagedata><tw-passagedata pid="149" name="Normal Beam Rio" tags="" position="1700,1900" size="100,100">I fire the Normal Beam at the Rio. However, the Normal Beam’s output is weak. The battle will be desperate!



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Rio Destroyed&quot;)]

	(else:)[(display: &quot;Attack Missed Rio 2&quot;)]

}</tw-passagedata><tw-passagedata pid="150" name="Wave Beam Rio" tags="" position="1850,1900" size="100,100">I fire the Wave Beam. It&#39;s definitely an effective weapon against the Rio.



{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(display: &quot;Missed the Rio&quot;)]

	(else:)[(display: &quot;Rio Destroyed&quot;)]

}</tw-passagedata><tw-passagedata pid="151" name="Ice Beam Rio" tags="" position="2000,1900" size="100,100">I fire at the Rio with the Ice Beam. Will it work?!



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Rio Destroyed&quot;)]

	(else-if: $random is 2)[(display: &quot;Rio Destroyed&quot;)]

	(else:)[(display: &quot;Missed the Rio&quot;)]

}</tw-passagedata><tw-passagedata pid="152" name="Missiles Rio" tags="" position="1550,2050" size="100,100">I fire a Missile at the Rio. (text-color: red)[(-1 Missile)](set: $missile to $missile - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



If it hits successfully, I can blow it to smithereens with just one shot...



{

	(set: $random to (random: 1,6))

	(if: $random is 2)[(display: &quot;Attack Missed Rio 2&quot;)]

	(else-if: $random is 5)[(display: &quot;Attack Missed Rio 2&quot;)]	

	(else:)[(display: &quot;Rio Destroyed&quot;)]

}</tw-passagedata><tw-passagedata pid="153" name="Screw Attack Rio" tags="" position="1700,2050" size="100,100">I strike the Rio with the Screw Attack. If I hit it just right, it&#39;s possible to defeat the Rio in a single blow.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Attack Missed Rio 2&quot;)]

	(else:)[(display: &quot;Screw Attack Hits Rio&quot;)]

}</tw-passagedata><tw-passagedata pid="154" name="Escape Rio Fails" tags="Combat-Ended" position="1700,2200" size="100,100">Somehow, I&#39;m not able to slip past the Rio and can&#39;t avoid the attack from its talons. I take damage, but escape. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)]](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="155" name="Escape Rio Success" tags="Combat-Ended" position="1850,2200" size="100,100">However, I successfully avoid the Rio’s attack. I escape!  



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="156" name="GAME OVER" tags="GAME-OVER" position="1501,254" size="100,100">(set: $displayStats to 0, $displayMap to 0)

==&gt;&lt;==

###GAME OVER 



{(link:&quot;Save Game&quot;)[

  (if:(save-game:&quot;Slot A&quot;))[

    Game saved!

  ](else: )[

    Sorry, I couldn&#39;t save your game.

  ]

]}



{

 (link: &quot;Load Game&quot; )[

          (load-game: &quot;Slot A&quot;)

    ]

}

	

Continue

{

	(click: &quot;Continue&quot;)[

	(set: $energy to 10, $displayStats to 1, $displayMap to 1)

	(go-to: $startRoom)]

}

[[Title-&gt;Title Screen]]</tw-passagedata><tw-passagedata pid="157" name="Debug Room Tourian" tags="" position="74,2586" size="100,100">Weclome to the Debug Room! Select your quest!



[[Brinstar Combat Test]]

[[Norfair Combat Test]]

[[Tourian Test]]

[[To seek the Holy Grail]]

Break Energy (click: &quot;Break Energy&quot;)[(replace: ?SamusEnergy)[|SamusEnergy&gt;[50]]]



(set: $energy to 30, $maxEnergy to 30, $missiles to 0, $items to (a: &quot;Normal Beam&quot;), $startRoom to &quot;Debug Room&quot;, $combat to 1, $MotherBrainHealth to 10, $displayMap to 1)



Brinstar Map (click: &quot;Brinstar Map&quot;)[(set: $items to it + (a: &quot;BrinstarMap&quot;)) - Got it!]

Norfair Map (click: &quot;Norfair Map&quot;)[(set: $items to it + (a: &quot;NorfairMap&quot;)) - Got it!]

Tourian Map (click: &quot;Tourian Map&quot;)[(set: $items to it + (a: &quot;TourianMap&quot;)) - Got it!]



{

	(set: $maxEnergy to 30, 

	$energy to $maxEnergy, 

	$maxMissiles to 0,

	$missiles to $maxMissiles,

	$items to (a: &quot;Normal Beam&quot;),

	$missilePods to (a: &quot;0&quot;),

	$energyPacks to (a: &quot;0&quot;),

	$startRoom to &quot;01&quot;,

	$combat to 1,

	$Beam to &quot;Normal Beam&quot;,

	$Bombs to &quot;&quot;,

	$Varia to &quot;&quot;,

	$ScrewAttack to &quot;&quot;,

	$MotherBrainHealth to 10,

	$combat to 1,

	$displayStats to 1,

	$location to &quot;Brinstar&quot;,

	$displayMap to 1)

	(replace: ?Beam)[|Beam&gt;[$Beam]]

}</tw-passagedata><tw-passagedata pid="158" name="Missile Hits Sidehopper" tags="" position="2150,2650" size="100,100">My Missile attack is successful. The Missile draws a twisted parabola towards the Sidehopper, and a surprisingly large explosion opens at the moment of impact.



Yes...the power of this small Missile must have exceeded its normal strength by tenfold! The Sidehopper disappears without a trace as it leaps into the air.



{

	(set: $random to (random: 1,6))

	(if: $random is 3)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 1)[(display: &quot;Missile&quot;)]

	(else-if: $random is 5)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="159" name="Escape Doublehopper Success" tags="Combat-Ended" position="2000,4000" size="100,100">I slip past the enemy’s attack. In any case, I can come back to fight the creature again once my Missiles and Energy are replenished. 



[[Go back to Room A-20-&gt;20]](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="160" name="Geemer Beams Normal" tags="" position="2350,1600" size="100,100">Normal Beam  (click: &quot;Normal Beam  &quot;)[(replace: &quot;Run  &quot;, &quot;Run, or do nothing to my opponent  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Geemer Normal Beam&quot;)]</tw-passagedata><tw-passagedata pid="161" name="Geemer Beams Ice" tags="" position="2350,1750" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Run  &quot;, &quot;Run, or do nothing to my opponent  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Geemer Ice Beam&quot;)]</tw-passagedata><tw-passagedata pid="162" name="Geemer Beams Wave" tags="" position="2500,1600" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Run, or do nothing to my opponent  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Geemer Wave Beam&quot;)]</tw-passagedata><tw-passagedata pid="163" name="Rio Beams Wave" tags="" position="2500,1900" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Ice Beam  &quot;, &quot;Normal Beam only  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run Away  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Wave Beam Rio&quot;)]

</tw-passagedata><tw-passagedata pid="164" name="Rio Beams Ice" tags="" position="2500,2050" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Normal Beam only  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run Away  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Ice Beam Rio&quot;)]

</tw-passagedata><tw-passagedata pid="165" name="Rio Beams Normal" tags="" position="2500,2200" size="100,100">Normal Beam only  (click: &quot;Normal Beam only  &quot;)[(replace: &quot;Ice Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run Away  &quot;, &quot;Run  &quot;)[](replace: &quot;only  &quot;)[only]&lt;hr&gt;(display: &quot;Normal Beam Rio&quot;)]

</tw-passagedata><tw-passagedata pid="166" name="Rio Weapons Missiles" tags="" position="2651,1900" size="100,100">Missiles  (click: &quot;Missiles  &quot;)[(replace: &quot;Ice Beam  &quot;, &quot;Normal Beam only  &quot;, &quot;Screw Attack  &quot;, &quot;Wave Beam  &quot;, &quot;Run Away  &quot;, &quot;Run  &quot;)[](replace: &quot;Missiles  &quot;)[Missiles]&lt;hr&gt;(display: &quot;Missiles Rio&quot;)]

</tw-passagedata><tw-passagedata pid="167" name="Rio Weapons Screw Attack" tags="" position="2650,2050" size="100,100">Screw Attack  (click: &quot;Screw Attack  &quot;)[(replace: &quot;Ice Beam  &quot;, &quot;Normal Beam only  &quot;, &quot;Missiles  &quot;, &quot;Wave Beam  &quot;,&quot;Run Away  &quot;, &quot;Run  &quot;)[](replace: &quot;Attack  &quot;)[Attack]&lt;hr&gt;(display: &quot;Screw Attack Rio&quot;)]

</tw-passagedata><tw-passagedata pid="168" name="Sidehopper Beam Wave" tags="" position="2500,2350" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Wave Beam Hits Sidehopper&quot;)]

</tw-passagedata><tw-passagedata pid="169" name="Sidehopper Beam Ice" tags="" position="2500,2500" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Ice Beam Sidehopper&quot;)]

</tw-passagedata><tw-passagedata pid="170" name="Sidehopper Weapon Missiles" tags="" position="2650,2350" size="100,100">Missiles  (click: &quot;Missiles  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Missiles  &quot;)[Missiles]&lt;hr&gt;(display: &quot;Missiles Sidehopper&quot;)]

</tw-passagedata><tw-passagedata pid="171" name="Sidehopper Weapon Screw Attack" tags="" position="2650,2500" size="100,100">Screw Attack  (click: &quot;Screw Attack  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Screw Attack Sidehopper&quot;)]

</tw-passagedata><tw-passagedata pid="172" name="Zeb Beams Wave" tags="" position="2200,2800" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Ignore it and run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Beam Shoots Toward Zeb&quot;)]

</tw-passagedata><tw-passagedata pid="173" name="Zeb Beams Ice" tags="" position="2200,2950" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Ignore it and run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Beam Shoots Toward Zeb&quot;)]

</tw-passagedata><tw-passagedata pid="174" name="Zeb Beams Normal" tags="" position="2200,3100" size="100,100">Normal Beam  (click: &quot;Normal Beam  &quot;)[(replace: &quot;Ignore it and run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Zeb Normal Beam&quot;)]

</tw-passagedata><tw-passagedata pid="175" name="Zeb Beams Ice Escape" tags="" position="2200,3250" size="100,100">Use the Ice Beam  (click: &quot;Use the Ice Beam  &quot;)[(replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Escape Zeb Successful&quot;)]</tw-passagedata><tw-passagedata pid="176" name="Doublehopper Beam Wave" tags="" position="2500,3550" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;If I don’t have any of these  &quot;, &quot;Run&quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Doublehopper Wave Beam&quot;)]

</tw-passagedata><tw-passagedata pid="177" name="Doublehopper Beam Ice" tags="" position="2500,3700" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Missiles  &quot;, &quot;If I don’t have any of these  &quot;, &quot;Run&quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Doublehopper Ice Beam&quot;)]

</tw-passagedata><tw-passagedata pid="178" name="Doublehopper Weapon Missiles" tags="" position="2650,3550" size="100,100">Missiles  (click: &quot;Missiles  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;If I don’t have any of these  &quot;, &quot;Run&quot;)[](replace: &quot;Missiles  &quot;)[Missiles]&lt;hr&gt;(display: &quot;Doublehopper Missiles&quot;)]

</tw-passagedata><tw-passagedata pid="179" name="Kraid&#39;s Sidehopper Weapon Missiles" tags="" position="2350,3400" size="100,100">Fire a Missile  (click: &quot;Fire a Missile  &quot;)[(replace: &quot;Missile  &quot;)[Missile]&lt;hr&gt;(display: &quot;Missile Kraid&#39;s Sidehopper&quot;)]</tw-passagedata><tw-passagedata pid="180" name="Kraid&#39;s Sidehopper Missiles Out" tags="" position="2500,3400" size="100,100">I&#39;m out of Missiles  (click: &quot;I&#39;m out of Missiles  &quot;)[&lt;hr&gt;(display: &quot;Kraid&#39;s Sidehopper No Missiles&quot;)]</tw-passagedata><tw-passagedata pid="181" name="Kraid Weapon Missiles 1" tags="" position="2200,4150" size="100,100">Fire 2 Missiles  (click: &quot;Fire 2 Missiles  &quot;)[(replace: &quot;Missiles  &quot;)[Missiles]&lt;hr&gt;(display: &quot;Kraid Missiles 1&quot;)]</tw-passagedata><tw-passagedata pid="182" name="Kraid Weapon Missiles 2" tags="" position="2200,4300" size="100,100">Continue the attack  (click: &quot;Continue the attack  &quot;)[(replace: &quot;attack  &quot;)[attack]&lt;hr&gt;(display: &quot;Kraid Missiles 2&quot;)]</tw-passagedata><tw-passagedata pid="183" name="Kraid Weapon No Missiles" tags="" position="2350,4150" size="100,100">I need at least 2 Missiles to fight Kraid  (click: &quot;I need at least 2 Missiles to fight Kraid  &quot;)[&lt;hr&gt;(display: &quot;Kraid No Missiles&quot;)]</tw-passagedata><tw-passagedata pid="184" name="Title Screen" tags="" position="100,100" size="100,100">=&gt;&lt;=

#Twinetroid



&lt;font size = &quot;6&quot;&gt;

[[Start-&gt;PROLOGUE]] 

(link: &quot;Load Game&quot;)[(load-game: &quot;Slot A&quot;)]

[[Instructions]]

[[About]]

[[Credits]]

&lt;/font&gt;

&lt;==

(set: $displayStats to 0, $displayMap to 0)</tw-passagedata><tw-passagedata pid="185" name="About" tags="" position="100,250" size="100,100">

###About

&lt;i&gt;Twinetroid&lt;/i&gt; is based on &lt;i&gt;Metroid: Zebesian Incursion&lt;/i&gt;, Volume 5 of the &lt;a href=&quot;https://ja.wikipedia.org/wiki/%E5%86%92%E9%99%BA%E3%82%B2%E3%83%BC%E3%83%A0%E3%83%96%E3%83%83%E3%82%AF%E3%82%B7%E3%83%AA%E3%83%BC%E3%82%BA#%E3%81%9D%E3%81%AE%E4%BB%96%E3%81%AE1986%E5%B9%B4%E5%88%8A%E8%A1%8C%E4%BD%9C%E5%93%81&quot;&gt;Famicom Adventure Game Book&lt;/a&gt; series published in Japan from 1986-1991. These are essentially Choose Your Own Adventure books based on Nintendo games. The original text was translated off and on over the course of several years before being converted to Twine in November 2018. 



The text remains loyal to the spirit of the original, with a few alterations. For instance, Energy Tanks were called Energy Packs, and you used to have to fire four Missiles to escape from a Metroid rather than use Bombs. The room that describes how to defeat the Metroids was originally a death trap; now the Bombs have been moved here from the Map Room. Other oddities, like Zebes being an asteroid, were maintained from the original.



The mechanics have also changed. The original used dice rolls for combat, and players had to keep track of their progress and item collection by filling out stats sheets and crossing off entries in the book. Combat was extremely tedious because the player had to flip through the book every time they chose a weapon or rolled the dice, and then they had to calculate their health and missile count. &lt;i&gt;Twinetroid&lt;/i&gt; obviously automates these mechanics.



One interesting feature of the original was the secret passages system. The player was given a map and told where secret rooms were located, but the chapter numbers were incomplete. For instance, you might be told there is a hidden passage leading to Room B-47, but given the chapter number of 1X4. You would have to flip through the book looking at each chapter (104, 114, etc.) until you found the one leading to B-47. Even the author admitted it was tedious, but it was the best way of simulating finding hidden passages.



&lt;i&gt;Twinetroid&lt;/i&gt; uses a hidden passage system as well, but since it&#39;s a text-based game, I&#39;ve implemented a number of mechanics that resemble a lot of tricks the original used, such as bombable blocks, hidden passages, and fake lava. I hope you enjoy discovering these secrets for yourself!



[[Back-&gt;Title Screen]]</tw-passagedata><tw-passagedata pid="186" name="Credits" tags="" position="251,250" size="100,100">

==&gt;&lt;==

##Metroid

&lt;b&gt;Zebes Incursion Directive&lt;/b&gt;



&lt;b&gt;Original Staff&lt;/b&gt;



&lt;==

&lt;i&gt;Metroid: Zebes Shin-nyuu Shirei&lt;/i&gt;

Famicom Adventure Game Book #5

January 5, 1987



Planning/Composition: &lt;a href=&quot;https://ja.wikipedia.org/wiki/%E5%A1%A9%E7%94%B0%E4%BF%A1%E4%B9%8B_(%E8%91%97%E4%BD%9C%E5%AE%B6)&quot;&gt;Nobuyuki Shioda&lt;/a&gt; (Studio Hard)

Production: Ikeda Misa

Text: Nobuyuki Shioda

Illustrations: &lt;a href=&quot;https://ja.wikipedia.org/wiki/%E6%9C%89%E5%9D%82%E9%A0%88%E7%BE%8E&quot;&gt;Arisaka Sumi&lt;/a&gt;



©Nintendo, 1986



==&gt;&lt;==

&lt;b&gt;Twinetroid&lt;/b&gt;



&lt;==

Translation and Programming: Devin Monnens



Presented by: &lt;a href=&quot;http://www.metroiddatabase.com&quot;&gt;The Metroid Database&lt;/a&gt;



&lt;img src=./images/Gun.jpg&gt;



&lt;i&gt;Twinetroid&lt;/i&gt; v.1.01



[[Back-&gt;Title Screen]]</tw-passagedata><tw-passagedata pid="187" name="To seek the Holy Grail" tags="" position="1325,565" size="100,100">	(set: $random to (random: 1,3))

	(if: $random is 1)[What is your favorite color? 

	[[Blue]]]

	(else-if: $random is 2)[What is capital of Assyria?

	[[I don&#39;t know that!]]

	&lt;a href=&quot;https://en.wikipedia.org/wiki/Damascus&quot;&gt;Let me Google that for you...&lt;/a&gt;]

	(else:)[What is the airspeed velocity of an unladen swallow?

	[[African or European Swallow?]]

	[[I don&#39;t know that!]]]

	

</tw-passagedata><tw-passagedata pid="188" name="Blue" tags="" position="1406,434" size="100,100">{

	(set: $random to (random: 1,2))

	(if: $random is 1)[[[Ok, you may go!-&gt;Debug Room Tourian]]]

	(else:)[[[No, yellooooooooowww!!!-&gt;Debug Room Tourian]]]

}</tw-passagedata><tw-passagedata pid="189" name="Yellow" tags="" position="1408,567" size="100,100">[[Ok, you may go!-&gt;Debug Room Tourian]]</tw-passagedata><tw-passagedata pid="190" name="I don&#39;t know that!" tags="" position="1477,713" size="100,100">[[BLAAAAAAAAAAARRRRHHHH!!-&gt;Debug Room Tourian]]</tw-passagedata><tw-passagedata pid="191" name="African or European Swallow?" tags="" position="1556,565" size="100,100">[[I don&#39;t know that!!]]

&lt;a href=&quot;http://style.org/unladenswallow/&quot;&gt;Let me Google that for you...&lt;/a&gt;</tw-passagedata><tw-passagedata pid="192" name="I don&#39;t know that!!" tags="" position="1625,715" size="100,100">Double-click this passage to edit it.</tw-passagedata><tw-passagedata pid="193" name="43" tags="Secret-Passage Missiles" position="2700,850" size="100,100">###Room B-43

At first glance, this room appears to only have a Blue Door to the South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geruda&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;3&quot;)[There is an empty pedestal here, encrusted with lime.](else:)[A pedestal stands in the center of the room, thickly encrusted with lime. On top of it is a pristine Missile Pod. (click: &quot;Missile Pod&quot;)[((text-color: red)[Missile Pod (3)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;3&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



I move about the room. My Radar Scanner detects a passage to a hidden room facing North. It&#39;s &lt;b&gt;Room B-45&lt;/b&gt;. I&#39;ll have to go further in the room to see if there&#39;s a way forward. &lt;span class=&quot;hides&quot;&gt;But there&#39;s nothing here. Maybe I need check this from a different angle...&lt;/span&gt;



[[Go South-&gt;41]]

&lt;span class=&quot;reveals&quot;&gt;When I turn around, I find a fake hole in the floor on the North side of the room. [[Go North.-&gt;45]]&lt;/span&gt;]</tw-passagedata><tw-passagedata pid="194" name="42" tags="" position="2700,1150" size="100,100">###Room B-42

In this room, there are only Blue Doors to the North and South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geruda&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;41]]

[[Go South-&gt;44]]]</tw-passagedata><tw-passagedata pid="195" name="44" tags="Secret-Passage" position="2700,1300" size="100,100">###Room B-44

From this room, there is a Blue Door to the North and a corridor to the West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geruda&quot;)]](else:)[(set: $combat to 1)However, it seems there is also a hidden passage leading to a room to the East. Its room number is &lt;b&gt;B-47&lt;/b&gt;. &lt;span class=&quot;reveals&quot;&gt;There&#39;s an odd rock formation. (if: $items contains &quot;Bombs&quot;)[(click: &quot;rock formation.&quot;)[It looks like I can blast it with a bomb.] (click: &quot;bomb.&quot;)[[[I open a passageway heading East.-&gt;47]]]]&lt;/span&gt;



[[Go North-&gt;42]]

[[Go West-&gt;46]]]</tw-passagedata><tw-passagedata pid="196" name="46" tags="Secret-Passage" position="2549,1299" size="100,100">###Room B-46

There is a Blue Door facing North and a corridor to the East. My Radar picks up a room to the West. &lt;b&gt;It&#39;s Room B-48&lt;/b&gt;.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geemer&quot;)]](else:)[(set: $combat to 1)This chamber is full of odd green bubbles; I can&#39;t tell if they are organic or mineral in construct. There are a number of odd fissures   in the wall that capture odd reflections of my suit. (click: &quot;   &quot;)[Upon further investigation, I discover one of these fissures contains a hidden passage leading West. [[Go West.-&gt;48]]]



[[Go North-&gt;57]]

[[Go East-&gt;44]]]</tw-passagedata><tw-passagedata pid="197" name="57" tags="Secret-Passage" position="2550,1150" size="100,100">###Room B-57

In this room, there is a Blue Door to the South, in addition to a passage to a hidden chamber facing North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geruda&quot;)]](else:)[(set: $combat to 1)The hidden chamber is &lt;b&gt;Room B-59&lt;/b&gt;. There&#39;s a small tunnel in this corner of the room, but it leads to a dead end.  (if: $items contains &quot;Bombs&quot;)[(click: &quot;.  &quot;)[I blast a hole with my bombs, opening a small tunnel. As I head through, it collapses again behind me. [[Go North to Room 59.-&gt;59]]]]



[[Go South-&gt;46]]]</tw-passagedata><tw-passagedata pid="198" name="59" tags="Missiles" position="2550,1000" size="100,100">###Room B-59

(if: $missilePods contains &quot;9&quot;)[An empty pedestal stands in the center of the room, surrounded by a pool of lava.](else:)[A pedestal stands in the center of the room, surrounded by a pool of lava. If I carefully jump over the pool, I can grab the Missile Pod. (click: &quot;Missile Pod&quot;)[((text-color: red)[Missile Pod (9)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;9&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



From here, South is the hidden path to &lt;b&gt;Room B-57&lt;/b&gt;. &lt;b&gt;Room B-60&lt;/b&gt; is to the North.



[[Go North-&gt;60]]

[[Go South-&gt;57]]</tw-passagedata><tw-passagedata pid="199" name="60" tags="Missiles" position="2550,850" size="100,100">###Room B-60

This room is impassible. The only open path just goes back South to &lt;b&gt;Room B-59&lt;/b&gt;.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geruda&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;10&quot;)[An empty pedestal stands in the center of the chamber.](else:)[A pedestal stands in the center of the chamber, holding a shiny new Missile Pod. (click: &quot;Missile Pod&quot;)[((text-color: red)[Missile Pod (10)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;10&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



Since there are no more hidden rooms, [[go back South.-&gt;59]]]</tw-passagedata><tw-passagedata pid="200" name="48" tags="" position="2400,1300" size="100,100">###Room B-48

East is a passageway to &lt;b&gt;Hidden Room B-46&lt;/b&gt;. This chamber also continues West, and there is also a Blue Door to the North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 3)[(go-to: &quot;Multiviola&quot;)]

	(else-if: $random is 1)[(go-to: &quot;Geruda&quot;)]

	(else-if: $random is 4)[(go-to: &quot;Geruda&quot;)]

	(else:)[(go-to: &quot;Geemer&quot;)]

}]](else:)[(set: $combat to 1)[[Go North-&gt;58]]

[[Go East-&gt;46]]

[[Go West-&gt;52]]]</tw-passagedata><tw-passagedata pid="201" name="58" tags="Red-Door" position="2400,1150" size="100,100">###Room B-58

South is a Blue Door, and North is a Red Door.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geruda&quot;)]](else:)[(set: $combat to 1)(if: (history:) contains &quot;63&quot;)[Since I have already gone North to the chamber behind the Red Door, I can either [[check the room again-&gt;63]] or [[retrace my steps and go back South-&gt;48]]](else:)[(if: $missiles &gt; 1)[[[Blast open the Red Door-&gt;63]]](else:)[I do not have enough Missiles to open the Red Door. [[Go back South.-&gt;48]]]]]</tw-passagedata><tw-passagedata pid="202" name="63 B" tags="Item-Room" position="3206,881" size="100,100">###Room B-63 - Norfair Map Room

(if: (history:) contains &quot;63&quot;)[](else:)[I fire Missiles at the Red Door. The Red Door takes 2 Missiles, and (text-style: &quot;rumble&quot;)[KABOOM], it opens. (set: $missiles to it - 2)](replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



I move forward and take a look. In the center of the room stands the figure of a strange creature fashioned from stone and perhaps modeled after one of the life-forms of this asteroid. An iron plate is embedded at its feet. On the plate is a map of Norfair. (Norfair Map Acquired. I can now view the map below the Navigation Options.)(set: $items to it + (a: &quot;NorfairMap&quot;))



I store this information into my computer.



Beyond this, there is nothing else in the room. [[I go back South to Room B-58.-&gt;58]]</tw-passagedata><tw-passagedata pid="203" name="52" tags="" position="2250,1300" size="100,100">###Room B-52

(set: $enemyFrozen to 0)From this room, there is a Blue Door to the North, and a corridor stretches East.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Multiviola&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;61]]

[[Go East-&gt;48]]]</tw-passagedata><tw-passagedata pid="204" name="61" tags="Secret-Passage" position="2250,1150" size="100,100">###Room B-61

North is a passage to a hidden chamber. South is a Blue Door, and there is a corridor to the West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Dessgeega&quot;)]](else:)[(set: $combat to 1)The hidden chamber to the North is &lt;b&gt;Room B-66&lt;/b&gt;. &lt;span class=&quot;reveals&quot;&gt;There&#39;s a ledge high up(if: $enemyFrozen is 1)[, and I can use the frozen Dessgeega as a platform to reach the it. [[Go North.-&gt;66]]](else:)[...but it&#39;s too far to jump.]&lt;/span&gt; 



[[Go West-&gt;64]]

[[Go South-&gt;52]]]</tw-passagedata><tw-passagedata pid="205" name="64" tags="" position="2100,1150" size="100,100">###Room B-64

(set: $enemyFrozen to 0)(if: $items contains &quot;RidleyStone&quot;)[Ridley has been defeated. The door to the North has deactivated for good.](else:)[There is a Blue Door to the North, and the room continues East.]



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 3)[(go-to: &quot;Multiviola&quot;)]

	(else-if: $random is 2)[(go-to: &quot;Holtz&quot;)]

	(else-if: $random is 6)[(go-to: &quot;Holtz&quot;)]

	(else:)[(go-to: &quot;Dessgeega&quot;)]

}]](else:)[(set: $combat to 1)(unless: $items contains &quot;RidleyStone&quot;)[[[Go North-&gt;65]]]

[[Go East-&gt;61]]]</tw-passagedata><tw-passagedata pid="206" name="65" tags="" position="2100,1000" size="100,100">###Room B-65

{(link:&quot;Save game?&quot;)[

  (if:(save-game:&quot;Slot A&quot;))[

    Game saved!

]]

(set: $displayStats to 1)}



My Command Computer chimes. 



“Warning. Ahead is the room of Ridley, the Boss-Level monster of Area B, Norfair. Ridley should be fought under ideal conditions. Decide whether you have the proper equipment and either confront Ridley or temporarily pull back and come again after preparing your equipment.”



(if: $missiles &gt; 1)[[[Go forward with your current equipment-&gt;Ridley]]]

[[Go back-&gt;Fight Ridley Later]]</tw-passagedata><tw-passagedata pid="207" name="66" tags="" position="2250,1000" size="100,100">###Room B-66

(set: $enemyFrozen to 0)To the South is the hidden passageway to &lt;b&gt;Room B-67&lt;/b&gt;. Aside from that, there is a Blue Door to the North.



(if: $combat is 1)[Fight.  (click: &quot;Fight.  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 1)[(go-to: &quot;Multiviola&quot;)]

	(else-if: $random is 3)[(go-to: &quot;Holtz&quot;)]

	(else-if: $random is 4)[(go-to: &quot;Holtz&quot;)]

	(else:)[(go-to: &quot;Dessgeega&quot;)]

}]](else:)[(set: $combat to 1)

[[Go North-&gt;67]]

[[Go South-&gt;61]]]</tw-passagedata><tw-passagedata pid="208" name="67" tags="Secret-Passage" position="2250,850" size="100,100">###Room(if: $combat is 0)[   ] B-67

There are Blue Doors to the North and South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Multiviola&quot;)]](else:)[(set: $combat to 1)In this chamber there is a passage to the hidden room to the East. It is &lt;b&gt;Room B-71&lt;/b&gt;. If I can’t discover it, I can only go South to &lt;b&gt;Room B-66&lt;/b&gt; or North to &lt;b&gt;Room B-68&lt;/b&gt;.



(click: &quot;   &quot;)[I spy a small gate in the ceiling. I shoot it with my Beam, and it opens a hidden door leading [[East.-&gt;71]]&lt;br&gt;]

[[Go North-&gt;68]]

[[Go South-&gt;66]]]</tw-passagedata><tw-passagedata pid="209" name="68" tags="Secret-Passage" position="2250,700" size="100,100">###Room B-68

North is a passage to a hidden room. South is a Blue Door, and there is a corridor to the West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geruda&quot;)]](else:)[(set: $combat to 1)There is a passage to a hidden chamber to the North of here, &lt;b&gt;Room B-73&lt;/b&gt;. Alongside the wall is a large mass of weak (link-repeat: &quot;bricks.  &quot;)[(set: $random to it + 1)(if: $random is 12)[(replace: &quot;Alongside the wall is a large mass of weak bricks.  &quot;)[Alongside the wall is a large mass of weak bricks.]

&lt;br&gt;Blasting away the wall reveals a hidden passage leading [[North.-&gt;73]]]]



[[Go West-&gt;69]]

[[Go South-&gt;67]]]</tw-passagedata><tw-passagedata pid="210" name="69" tags="" position="2100,700" size="100,100">###Room B-69

There is a Blue Door to the South, and the room extends to the East.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Dessgeega&quot;)]](else:)[(set: $combat to 1)[[Go East-&gt;68]]

[[Go South-&gt;70]]]</tw-passagedata><tw-passagedata pid="211" name="70" tags="Missiles" position="2100,850" size="100,100">###Room B-70

This room is a dead end. There is just a Blue Door leading back North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Multiviola&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;12&quot;)[There is a cracked pedestal in the center of the chamber.](else:)[There is a pedestal in the center of the chamber that has been cracked by a rockfall. On top of it is a Missile Pod, still intact. (click: &quot;Missile Pod&quot;)[((text-color: red)[Missile Pod (12)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;12&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



Aside from the pedestal, this chamber is just a dead end. [[I have to go back to the previous room.-&gt;69]]]</tw-passagedata><tw-passagedata pid="212" name="71" tags="Red-Door" position="2401,850" size="100,100">###Room B-71

West is the hidden passage to &lt;b&gt;Room B-67&lt;/b&gt;. Apart from that, there is a Red Door facing North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(go-to: &quot;Multiviola&quot;)]

	(else-if: $random is 3)[(go-to: &quot;Holtz&quot;)]

	(else-if: $random is 1)[(go-to: &quot;Holtz&quot;)]

	(else:)[(go-to: &quot;Geruda&quot;)]

}]](else:)[(set: $combat to 1)(if: (history:) contains &quot;72&quot;)[I&#39;ve already opened the Red Door, so the next room is empty. [[I go back West to Room B-67.-&gt;67]]](else:)[(if: $missiles &gt; 1)[[[Blast open the Red Door-&gt;72]]](else:)[I need at least 2 Missiles to open the Red Door. [[I must go back West to Room B-67.-&gt;67]]]]]</tw-passagedata><tw-passagedata pid="213" name="72" tags="Item-Room" position="2400,700" size="100,100">###Room B-72

Boom(click: &quot;Boom&quot;)[, boom!(click: &quot;boom!&quot;)[



With a heavy thud, the Missiles slam into the Red Door. When the smoke from the explosion clears, the door has opened to reveal a fine entrance. (set: $missiles to $missiles - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



Upon entering the chamber, I behold the statue of a grotesque life-form placed in the center of the room, reverently offering some kind of machine in its stone arms (if that is indeed what they are). (text-color: green)[(Screw Attack collected)](set: $items to it + (a: &quot;Screw Attack&quot;))(replace: ?ScrewAttack)[|ScrewAttack&gt;[Screw Attack]]



After collecting it, there is nothing else in this room. [[I go back to the previous chamber.-&gt;71]]]]</tw-passagedata><tw-passagedata pid="214" name="47" tags="Secret-Passage" position="2850,1301" size="100,100">###Room B-47

There is a hidden passage to &lt;b&gt;Room B-44&lt;/b&gt; facing West. A Blue Door faces North. There is a hidden room to the East. &lt;span class=&quot;reveals&quot;&gt;(if: $combat is 0)[(if: $items contains &quot;Bombs&quot;)[  .](else:)[  .]]&lt;/span&gt;



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 5)[(go-to: &quot;Rio&quot;)]

	(else-if: $random is 3)[(go-to: &quot;Geruda&quot;)]

	(else-if: $random is 1)[(go-to: &quot;Geruda&quot;)]

	(else:)[(go-to: &quot;Geemer&quot;)]

}]](else:)[(set: $combat to 1)The room appears to end in a rock wall.(if: $items contains &quot;Bombs&quot;)[(click: &quot;  .&quot;)[ Careful inspection reveals a hole on the floor that looks weak to explosives. I lay a bomb to blast open a hole to [[Room B-49.-&gt;49]]]]



[[Go North-&gt;50]]

[[Go West-&gt;44]]]</tw-passagedata><tw-passagedata pid="215" name="50" tags="Missiles" position="2850,1150" size="100,100">###Room B-50

This room is a dead end. There is only a Blue Door facing South. I notice there is a hidden room to the North, but the passage is impassible from this direction.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Geruda&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;4&quot;)[There is an empty pedestal in the center of the room, covered with a variety of cables.](else:)[A pedestal stands in the center of the room, covered by a wide assortment of cables snaking towards the center. Nested there is a Missile Pod. (click: &quot;Missile Pod&quot;)[((text-color: red)[Missile Pod (4)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;4&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



There is a tunnel in this room leading to a hidden chamber to the North, but unless I can perform some special feat of engineering, I can’t pass back through. It&#39;s a one-way passage from the chamber to the North. Therefore, I have to go South to &lt;b&gt;Room B-47&lt;/b&gt;.



[[Go back to the room to the South.-&gt;47]]]</tw-passagedata><tw-passagedata pid="216" name="45" tags="" position="2700,700" size="100,100">###Room B-45

Facing South is the passage to the &lt;b&gt;Hidden Room B-43&lt;/b&gt;. Apart from that, the room continues West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Multiviola&quot;)]](else:)[(set: $combat to 1)[[Go West-&gt;62]]

[[Go South-&gt;43]]]</tw-passagedata><tw-passagedata pid="217" name="62" tags="Missiles" position="2550,700" size="100,100">###Room B-62

This room is a dead end. It leads only to the East.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Multiviola&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;11&quot;)[There is an empty pedestal in the center of the room that once held a Missile Pod.](else:)[A pedestal stands in the center of the room, holding a Missile Pod that glitters in the dim light. (click: &quot;Missile Pod &quot;)[((text-color: red)[Missile Pod (11)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;11&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



This room is a dead end, and since I can only go East, [[I retrace my steps.-&gt;45]]]</tw-passagedata><tw-passagedata pid="218" name="73" tags="Missiles" position="2250,550" size="100,100">###Room B-73

Facing South is the passageway to &lt;b&gt;Hidden Room B-68&lt;/b&gt;. Aside from this, the room just continues to the West.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Multiviola&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;13&quot;)[An empty pedestal sits in the center of the room.](else:)[A pedestal sits in the center of the room. A Missile Pod sits on top of it. (click: &quot;Missile Pod &quot;)[((text-color: red)[Missile Pod (13)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;13&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



If I already collected the Missile Pod, I move about the room. I can either go South to &lt;b&gt;Room B-68&lt;/b&gt; or West to Room &lt;b&gt;B-74&lt;/b&gt;.



[[Go West-&gt;74]]

[[Go South-&gt;68]]]</tw-passagedata><tw-passagedata pid="219" name="74" tags="Missiles Secret-Passage" position="2100,550" size="100,100">###Room B-74

At first glance, the room only continues East, but there is a passage to a hidden chamber to the North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Holtz&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;14&quot;)[An empty pedastal sits in the center of the room.](else:)[A pedestal sits in the center of the room. I grab the Missile Pod sitting atop it. (click: &quot;Missile Pod &quot;)[((text-color: red)[Missile Pod (14)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;14&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



(set: $random to 7)I decide to move about the room. The way East is open. However, there is a hidden chamber to the North, but it is at the top of a very high ledge. It is &lt;b&gt;Room B-75&lt;/b&gt;. However, the wall looks weak in spots. Perhaps I could blast them open to make handholds...&lt;span class=&quot;hides&quot;&gt;(link-repeat: &quot;.  &quot;)[(set: $random to (random: 1,10))(if: $random is 6)[(replace: &quot;.  &quot;)[][[Go North.-&gt;75]]](else:)[.  ]]&lt;/span&gt;



[[Go East-&gt;73]]]</tw-passagedata><tw-passagedata pid="220" name="75" tags="Secret-Passage" position="2100,400" size="100,100">###Room(if: $combat is 0)[   ]B-75

There are only hidden tunnels leading from this chamber. North(if: $combat is 0)[(link-reveal: &quot;,&quot;)[ which upon closer inspection is revealed as [[a fake wall-&gt;78]],]](else:)[,] South, and East: all are hidden passages.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(go-to: &quot;Multiviola&quot;)]

	(else-if: $random is 3)[(go-to: &quot;Holtz&quot;)]

	(else-if: $random is 5)[(go-to: &quot;Holtz&quot;)]

	(else:)[(go-to: &quot;Geruda&quot;)]

}]](else:)[(set: $combat to 1)I already know about the passageway facing South, since that&#39;s the way I came in came in. However, if I can&#39;t discover the other two hidden rooms, I can only go South.



(click: &quot;   &quot;)[I check the East side of the ceiling and discover a weak wall. Blasting it open with my Beam reveals a [[hidden passage.-&gt;76]]]



[[Go South-&gt;74]]]</tw-passagedata><tw-passagedata pid="221" name="76" tags="Red-Door" position="2250,400" size="100,100">###Room B-76

In this room, there is a hidden tunnel that continues West and a Red Door facing North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Dessgeega&quot;)]](else:)[(set: $combat to 1)(if: (history:) contains &quot;77&quot;)[Since the Red Door is already open, there is nothing else in the next room, so [[go back West.-&gt;75]]](else:)[(if: $missiles &gt; 1)[[[I blast open the Red Door.-&gt;77]]](else:)[I do not have enough Missiles to open the Red Door. [[Go back West.-&gt;75]]]]]</tw-passagedata><tw-passagedata pid="222" name="77" tags="Item-Room" position="2250,250" size="100,100">###Room B-77

(if: (history:) contains &quot;77&quot;)[](else:)[Two heavy thuds echo through the chamber as the Missiles explode on the portal. That sound mixes with the clatter of the collapsing door. I destroy the Red Door with an attack from 2 Missiles. (set: $missiles to it - 2)](replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



I head through the other side of the portal. In adjoining chamber, &lt;b&gt;Room B-77&lt;/b&gt;, a stone statue modeled after a uniquely ghastly creature has been placed in the center of the desolate room. To my astonishment, this stone statue reverently holds a powerful beam weapon in its arms.

 

((text-color: purple)[Wave Beam collected.] (set: $items to it + (a: &quot;Wave Beam&quot;))(set: $items to it - (a: &quot;Normal Beam&quot;, &quot;Ice Beam&quot;))(replace: ?Beam)[|Beam&gt;[Wave Beam]] My other beam vanishes.)



Now that I’ve collected the weapon, there is nothing else in this room.



[[Go back South-&gt;76]]</tw-passagedata><tw-passagedata pid="223" name="78" tags="Missiles Secret-Passage" position="2100,250" size="100,100">###Room B-78

(if: $missilePods contains &quot;15&quot;)[An empty pedestal sits in the center of the room.](else:)[A pedestal sits in the center of the room. A Missile Pod sits atop it. (click: &quot;Missile Pod &quot;)[((text-color: red)[Missile Pod (15)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;15&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



I proceed along the narrow passageway to a dead end. Steam hisses from cracks in the walls, fogging my visor. At the end of the chamber is a gurgling pool of lava, but it&#39;s too far to jump over.&lt;span class=&quot;hides&quot;&gt;[.  ]&lt;/span&gt; My Radar picks up a hidden chamber on the other side of the pool, &lt;b&gt;Room B-75&lt;/b&gt;, but I can&#39;t seem to find the entrance.



(click: &quot;.  &quot;)[As I approach the pool, I discover it&#39;s not magma at all! It&#39;s some kind of ooze that resembles molten rock. [[I wade through it to reveal a hidden passage to the chamber beyond.-&gt;79]]]



[[Go South-&gt;75]]</tw-passagedata><tw-passagedata pid="224" name="79" tags="Energy-Tank" position="2100,100" size="100,100">###Room B-79

This room is a dead end with only a passageway leading South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Dessgeega&quot;)]](else:)[(set: $combat to 1) The battle is over.



(if: $energyPacks contains &quot;C&quot;)[Since I&#39;ve already collected the Energy Tank that was here, there is nothing else in this room, so [[go back South.-&gt;78]]](else:)[I grab the Energy Tank sitting in the corner of the room. ((text-color: yellow)[Energy Tank (C) collected. ](set: $maxEnergy to it + 30, $energy to $maxEnergy, $energyPacks to it + (a: &quot;C&quot;))(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]]Maximum energy increased to $maxEnergy. All Energy Tanks refilled.)]



Since I&#39;ve taken the Energy Tank, there&#39;s nothing else in this room. [[I can only go back South.-&gt;78]]]</tw-passagedata><tw-passagedata pid="225" name="49" tags="" position="3000,1300" size="100,100">###Room B-49

From this room, there is a hidden passageway to the West leading to &lt;b&gt;Room B-47&lt;/b&gt;, and there is a Blue Door facing North.



(if: $combat is 1)[Fight.  (click: &quot;Fight.  &quot;)[

{

	(set: $random to (random: 1,6))

	(if: $random is 4)[(go-to: &quot;Multiviola&quot;)]

	(else-if: $random is 3)[(go-to: &quot;Geemer&quot;)]

	(else-if: $random is 6)[(go-to: &quot;Geemer&quot;)]

	(else:)[(go-to: &quot;Holtz&quot;)]

}]](else:)[(set: $combat to 1)[[Go North-&gt;51]]

[[Go West-&gt;47]]]</tw-passagedata><tw-passagedata pid="226" name="51" tags="Missiles" position="3000,1149" size="100,100">###Room B-51

The room continues North, and there is a Blue Door to the South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Holtz&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;5&quot;)[An empty pedestal stands in the center of the chamber.](else:)[A metal pedestal stands in the center of the chamber, a Missile Pod on top. Steam hisses from the odd vent slits at its base. (click: &quot;Missile Pod &quot;)[((text-color: red)[Missile Pod (5)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;5&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



From this room, I can head North to &lt;b&gt;Room B-54&lt;/b&gt; or South to &lt;b&gt;Room B-49&lt;/b&gt;.



[[Go North-&gt;54]]

[[Go South-&gt;49]]]</tw-passagedata><tw-passagedata pid="227" name="54" tags="Missiles Secret-Passage" position="3000,1000" size="100,100">###Room B-54

This room is a Missile Pod room, too. The room turns into a corridor leading South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Holtz&quot;)]](else:)[(set: $combat to 1)(if: $missilePods contains &quot;6&quot;)[](else:)[A Missile Pod  lies in the center of the room. (click: &quot;Missile Pod  &quot;)[((text-color: red)[Missile Pod (6)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;6&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]&lt;br&gt;]

At first, it appears there is only the corridor leading South, but to the North there is also a passage leading to hidden &lt;b&gt;Room B-55&lt;/b&gt;. There&#39;s a small tunnel leading this direction, but it&#39;s too dark to see anything... &lt;span class=&quot;hidden&quot;&gt;[[I lay a bomb, opening a hole to &lt;b&gt;Room B-55&lt;/b&gt;-&gt;55]]&lt;/span&gt;



[[Go South-&gt;51]]]</tw-passagedata><tw-passagedata pid="228" name="55" tags="Missiles" position="3000,850" size="100,100">###Room B-55

(if: $missilePods contains &quot;7&quot;)[There is a perfectly preserved pedestal in the center of the room. It stands empty.](else:)[In the center of the room is a large pedestal of gleaming metal. Although ancient it looks as if it were built yesterday. A Missile Pod sits on top. (click: &quot;Missile Pod &quot;)[((text-color: red)[Missile Pod (7)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;7&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



From this room, I can head South to &lt;b&gt;Room B-54&lt;/b&gt; or West to &lt;b&gt;Room B-56&lt;/b&gt;.



[[Go West-&gt;56]]

[[Go South-&gt;54]]</tw-passagedata><tw-passagedata pid="229" name="56" tags="Missiles Secret-Passage" position="2850,850" size="100,100">###Room B-56 &lt;span class=&quot;hidden&quot;&gt;[[Go South-&gt;53]]&lt;/span&gt;

(if: $missilePods contains &quot;8&quot;)[An empty pedestal towers in the center of the room.](else:)[A large pedestal towers in the center of the room, capped by a Missile Pod. (click: &quot;Missile Pod&quot;)[((text-color: red)[Missile Pod (8)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2, $missilePods to it + (a: &quot;8&quot;)) Maximum Missiles increased to $maxMissiles.) (replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]]



From this chamber, I can go to &lt;b&gt;Room B-55&lt;/b&gt;, but the long passageway to &lt;b&gt;Room B-53&lt;/b&gt; is hidden. Thick stalagtites hang obscenely in the oppressive gloom, obscuring my vision above.



[[Go East-&gt;55]]</tw-passagedata><tw-passagedata pid="230" name="53" tags="Item-Room" position="2850,1000" size="100,100">###Room B-53

The statue of a strange monster has been placed in the center of the room; it seems to be offering the beam weapon placed in its stone arms. It’s the Ice Beam.



(if: $items contains &quot;Ice Beam&quot;)[I currently have the Ice Beam. Therefore, it is pointless to take it now. Eventually there might be a time when I will need it, but for now, I leave it placed in the room as it is.](else:)[(text-color: blue)[Ice Beam collected.] (set: $items to it + (a: &quot;Ice Beam&quot;))(set: $items to it - (a: &quot;Normal Beam&quot;, &quot;Wave Beam&quot;))(replace: ?Beam)[|Beam&gt;[Ice Beam]]]



Ice Beam collected, I consider which other room to go to from here. However, the tunnel from the North I just used is a one-way passage, and I can’t go through it. [[I go through the other passageway leading South to Room B-50.-&gt;50]]</tw-passagedata><tw-passagedata pid="231" name="Dessgeega" tags="" position="3400,2075" size="100,100">(set: $displayMap to 0)A Dessgeega approaches. The Dessgeega is Command Level IV. It’s a tough enemy.



(if: (history:) contains &quot;Dessgeega&quot;)[The Dessgeega comes at me without giving me time to escape.](else:)[(display: &quot;Scan Dessgeega&quot;)]



There&#39;s no time to switch to Missiles. I&#39;ll have to use a Beam Weapon.



{

(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Dessgeega Beam Wave&quot;)]

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Dessgeega Beam Ice&quot;)]

(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Dessgeega Beam Normal&quot;)]

}</tw-passagedata><tw-passagedata pid="232" name="Geruda" tags="" position="3400,125" size="100,100">(set: $displayMap to 0)In front of me, an enemy creature, the Geruda, is blocking my way.



(if: (history:) contains &quot;Geruda&quot;)[The Geruda is Command Level III. Compared with the Geemer and Rio, this enemy is quite strong.](else:)[(display: &quot;Scan Geruda&quot;)]



What should I do? (display: &quot;Fight Geruda&quot;)</tw-passagedata><tw-passagedata pid="233" name="Holtz" tags="" position="3400,900" size="100,100">(set: $displayMap to 0)A Holtz flies in the air in front of me. However, whether its aware of my presence or not, it doesn&#39;t immediately show signs of attacking.



(if: (history:) contains &quot;Holtz&quot;)[According to the Command Computer, the Holtz’s is Command Level III. The enemy is quite strong, so I had better be careful.](else:)[(display: &quot;Scan Holtz&quot;)]



What should I do? Fight it or run? (display: &quot;Fight Holtz&quot;)</tw-passagedata><tw-passagedata pid="234" name="Multiviola" tags="" position="3399,1475" size="100,100">(set: $displayMap to 0, $lastRoom to (history:)&#39;s last)A Multiviola flies around in front of me.



(if: (history:) contains &quot;Multiviola&quot;) [The Multiviola is Command Level III. ](else:)[(display: &quot;Scan Multiviola&quot;)]



What should I do? Fight or run? (set: $random to 7)(display: &quot;Fight Multiviola&quot;)</tw-passagedata><tw-passagedata pid="235" name="Ridley" tags="" position="3400,2700" size="100,100">(set: $displayMap to 0)I step forward. In the center of the room is a table constructed from lustrous black rocks. On top sits an egg-sized black stone in the shape of an oval. It appears to be the Key Stone...



However, it doesn&#39;t look like Ridley is here. This chamber seems to be Ridley’s Room, and yet...



If I take the Key Stone, I might get into a fight. Should I go ahead and take it?



[[Go and take it]]

[[It could be a trap, so wait and see what happens-&gt;Wait and see what happens]]</tw-passagedata><tw-passagedata pid="236" name="Norfair Combat Test" tags="" position="3225,374" size="100,100">You can fight what you want here.



Geruda  (click: &quot;Geruda  &quot;)[(go-to: &quot;Geruda&quot;)]

Holtz  (click: &quot;Holtz  &quot;)[(go-to: &quot;Holtz&quot;)]

Multiviola  (click: &quot;Multiviola  &quot;)[(go-to: &quot;Multiviola&quot;)]

Dessgeega  (click: &quot;Dessgeega  &quot;)[(go-to: &quot;Dessgeega&quot;)]

Ridley  (click: &quot;Ridley  &quot;)[(go-to: &quot;Ridley&quot;)]

Fight Ridley  (click: &quot;Fight Ridley  &quot;)[(go-to: &quot;Fight Ridley&quot;)]

[[41]]

[[76]]

[[71]]

[[58]]



Repeat-Click tests

[[74]]

[[68]]



Get Varia (click: &quot;Get Varia&quot;)[(set: $items to it + (a: &quot;Varia&quot;))(replace: ?Varia)[|Varia&gt;[Varia]]]

Get Bombs (click: &quot;Get Bombs&quot;)[(set: $items to it + (a: &quot;Bombs&quot;))(replace: ?Bombs)[|Bombs&gt;[Bombs]]]



Get Normal Beam (click: &quot;Get Normal Beam&quot;)[(set: $items to it + (a: &quot;Normal Beam&quot;))(set: $items to it - (a: &quot;Ice Beam&quot;, &quot;Wave Beam&quot;)) --You got Normal Beam(replace: ?Beam)[|Beam&gt;[Normal Beam]]]

Get Ice Beam (click: &quot;Get Ice Beam&quot;)[(set: $items to it + (a: &quot;Ice Beam&quot;))(set: $items to it - (a: &quot;Normal Beam&quot;, &quot;Wave Beam&quot;)) --You got Ice Beam!(replace: ?Beam)[|Beam&gt;[Ice Beam]]]

Get Wave Beam (click: &quot;Get Wave Beam&quot;)[(set: $items to it + (a: &quot;Wave Beam&quot;))(set: $items to it - (a: &quot;Ice Beam&quot;, &quot;Normal Beam&quot;)) --You got Wave Beam(replace: ?Beam)[|Beam&gt;[Wave Beam]]]

Get Screw Attack (click: &quot;Get Screw Attack&quot;)[(set: $items to it + (a: &quot;Screw Attack&quot;))(replace: ?ScrewAttack)[|ScrewAttack&gt;[ScrewAttack]]]



Get 2 Missiles (click: &quot;Get 2 Missiles&quot;)[(set: $maxMissiles to it + 2, $missiles to it + 2)][|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]

Get 2 Missiles (click: &quot;Get 2 Missiles&quot;)[(set: $maxMissiles to it + 2, $missiles to it + 2)][|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]

Get 2 Missiles (click: &quot;Get 2 Missiles&quot;)[(set: $maxMissiles to it + 2, $missiles to it + 2)][|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]

Get Missiles (10) (click: &quot;Get Missiles (10)&quot;)[(set: $maxMissiles to it + 10, $missiles to it + 10)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]

Get Missiles (20)  (click: &quot;Get Missiles (20)&quot;)[(set: $maxMissiles to it + 20, $missiles to it + 20)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]

Refill Missiles (click: &quot;Refill Missiles&quot;)[(set: $missiles to $maxMissiles)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]]

Lose All Missiles (click: &quot;Lose All Missiles&quot;)[(set: $missiles to 0)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]]



Get Energy Tank (30)(click: &quot;Get Energy Tank (30)&quot;)[(set: $maxEnergy to it + 30, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]]]

Get Energy Tank (60)(click: &quot;Get Energy Tank (60)&quot;)[(set: $maxEnergy to it + 60, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]]]

Refill Energy(click: &quot;Refill Energy&quot;)[(set: $energy to $maxEnergy, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]]

Dangerously Low (click: &quot;Dangerously Low&quot;)[(set: $energy to 1)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]]



(set: $location to &quot;Norfair&quot;, $displayMap to 1)</tw-passagedata><tw-passagedata pid="237" name="Scan Geruda" tags="" position="4000,650" size="100,100">The Geruda is much stronger than the Geemer and Rio. The creature converts the incredible amount of energy given off by its body into blistering heat and constantly emits high body temperatures. Furthermore, the Geruda has organs to use this energy like jet propulsion, spraying flames from its feet. Thus, it can fly through the air using the energy it emits. The Geruda deals damage to its opponents with its talons, which are more enormous than the Rio&#39;s, along with the blistering heat radiating from its skin.



The Geruda is Command Level III. It is a very tough enemy.</tw-passagedata><tw-passagedata pid="238" name="Fight Geruda" tags="" position="3550,50" size="100,100">(if: $random is 0)[I can change my attack mode. Select one before the Geruda’s next attack.]

{

(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Geruda Beam Wave&quot;)]

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Geruda Beam Ice&quot;)]

(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Geruda Beam Normal&quot;)]

(if: $missiles &gt; 0)[(display: &quot;Geruda Weapon Missiles&quot;)]

(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Geruda Weapon Screw Attack&quot;)]

}Run  (click: &quot;Run  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Normal Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;)[](replace: &quot;Run  &quot;)[Run]&lt;hr&gt;(display: &quot;Run from Geruda&quot;)]</tw-passagedata><tw-passagedata pid="239" name="Geruda Beam Normal" tags="" position="4350,350" size="100,100">Normal Beam  (click: &quot;Normal Beam  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Normal Beam Geruda&quot;)]

</tw-passagedata><tw-passagedata pid="240" name="Geruda Beam Ice" tags="" position="4500,200" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Ice Beam Geruda&quot;)]

</tw-passagedata><tw-passagedata pid="241" name="Geruda Beam Wave" tags="" position="4350,200" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Wave Beam Geruda&quot;)]

</tw-passagedata><tw-passagedata pid="242" name="Geruda Weapon Missiles" tags="" position="4350,500" size="100,100">Missiles  (click: &quot;Missiles  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Missiles  &quot;)[Missiles]&lt;hr&gt;(display: &quot;Missiles Geruda&quot;)]

</tw-passagedata><tw-passagedata pid="243" name="Geruda Weapon Screw Attack" tags="" position="4350,50" size="100,100">Screw Attack  (click: &quot;Screw Attack  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Run  &quot;)[](replace: &quot;Attack  &quot;)[Attack]&lt;hr&gt;(display: &quot;Screw Attack Geruda&quot;)]

</tw-passagedata><tw-passagedata pid="244" name="Screw Attack Geruda" tags="" position="3700,50" size="100,100">I Screw Attack the Geruda. The Screw Attack is 100% effective against this opponent. However, its success rate is 50%.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Screw Attack Hits Geruda&quot;)]

	(else:)[(display: &quot;Screw Attack Misses Geruda&quot;)]

}</tw-passagedata><tw-passagedata pid="245" name="Screw Attack Hits Geruda" tags="" position="3850,50" size="100,100">&lt;img src=./images/GerudaScrewAttack.jpg&gt;



The Screw Attack is a success. The surge of the Screw Attack meets the Geruda in mid-air in no time flat, dragging it into its rotation and tearing it to bits. The Geruda emits a final cry like a frog being crushed and annihilated.



{

	(set: $random to (random: 1,6))

	(if: $random is 5)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 1)[(display: &quot;Missile&quot;)]

	(else-if: $random is 3)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="246" name="Screw Attack Misses Geruda" tags="" position="4000,50" size="100,100">The Screw Attack fails. The Geruda’s attack hits with enormous talons and a searing collision. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(set: $random to 0)(display: &quot;Fight Geruda&quot;)]</tw-passagedata><tw-passagedata pid="247" name="Run from Geruda" tags="" position="3546,652" size="100,100">However, I won&#39;t be able to get away so easily. 



{

	(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Escape from Geruda&quot;)]

	(else:)[(display: &quot;Run from Geruda Fails&quot;)]

}</tw-passagedata><tw-passagedata pid="248" name="Run from Geruda Fails" tags="Combat-Ended" position="3849,650" size="100,100">If I had an Ice Beam, I could freeze the Geruda and run, but I can&#39;t use that weapon right now. Thankfully, the Geruda’s range is limited, so if I get far enough away, it won&#39;t be able to attack me. However, just before I can get out of its range, I sustain an attack from the Geruda’s enormous talons. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[

	

(link:&quot;The battle is over.&quot;)[(set: $combat to 0, $displayMap to 1)(go-to: (history: )&#39;s last)]]</tw-passagedata><tw-passagedata pid="249" name="Escape from Geruda" tags="Combat-Ended" position="3701,650" size="100,100">I fire the Ice Beam. The beam&#39;s blunt projectile is absorbed by the Geruda. Instantly the creature stops moving, and in the next moment falls to the ground.



I immediately get away from there and succeed in escaping the fight.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0, $displayMap to 1)(go-to: (history: )&#39;s last)]</tw-passagedata><tw-passagedata pid="250" name="Wave Beam Misses Geruda" tags="" position="3700,200" size="100,100">The attack misses. The Geruda’s enormous talons rush in. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Continue with the attack? Or else run?(display: &quot;Fight Geruda&quot;)]</tw-passagedata><tw-passagedata pid="251" name="Beam Hits Geruda" tags="" position="4150,200" size="100,100">My beam catches the Geruda. The creature’s body instantly scatters to bits.



{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 2)[(display: &quot;Missile&quot;)]

	(else-if: $random is 5)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="252" name="Ice Beam Misses Geruda" tags="" position="4000,200" size="100,100">The attack misses. The Geruda’s enormous talons rush in. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Continue with the attack? Or else run?(display: &quot;Fight Geruda&quot;)]</tw-passagedata><tw-passagedata pid="253" name="Normal Beam Misses Geruda" tags="" position="3850,350" size="100,100">Fighting the Geruda with just the Normal Beam is extremely difficult. I will have to keep hitting it with my beam, constraining its movements. If I fail, I will take the Geruda’s incoming attack. 



The Normal Beam’s aim is off. Simultaneously, the Geruda’s enormous talons swoop in, striking directly at my abdomen. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(set: $random to 0)(display: &quot;Fight Geruda&quot;)]</tw-passagedata><tw-passagedata pid="254" name="Normal Beam Hits Geruda" tags="" position="3700,350" size="100,100">Though the attack is difficult, I somehow manage to succeed. I time my shots with the Geruda’s mid-air turn, and it takes a hit from the Normal Beam. When about 10 shots strike, the Geruda’s seems to dissolve, and its body crumbles.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Medium Energy Ball&quot;)]

	(else:)[(display: &quot;Nothing&quot;)]

}</tw-passagedata><tw-passagedata pid="255" name="Normal Beam Geruda" tags="" position="3550,350" size="100,100">I parry the Geruda with the Normal Beam. Will it succeed?



{

	(set: $random to (random: 1,6))

	(if: $random is 3)[(display: &quot;Normal Beam Hits Geruda&quot;)]

	(else:)[(display: &quot;Normal Beam Misses Geruda&quot;)]

}</tw-passagedata><tw-passagedata pid="256" name="Missiles Geruda" tags="" position="3550,500" size="100,100">I attack the Geruda with a Missile. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



Missiles are 100% effective against the Geruda. However, they have only 50% accuracy.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Missile Hits Geruda&quot;)]

	(else:)[(display: &quot;Missile Misses Geruda&quot;)]

}</tw-passagedata><tw-passagedata pid="257" name="Wave Beam Geruda" tags="" position="3550,200" size="100,100">I rapidly fire the Wave Beam at the Geruda. Will I beat it?!



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Wave Beam Misses Geruda&quot;)]

	(else:)[(display: &quot;Beam Hits Geruda&quot;)]

}</tw-passagedata><tw-passagedata pid="258" name="Ice Beam Geruda" tags="" position="3850,200" size="100,100">The Ice Beam flies towards the Geruda. Now if I can skillfully take it down...



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Beam Hits Geruda&quot;)]

	(else:)[(display: &quot;Ice Beam Misses Geruda&quot;)]

}</tw-passagedata><tw-passagedata pid="259" name="Missile Hits Geruda" tags="" position="3700,500" size="100,100">My Missile hits! Although the Missile fired from my arm is small, the destructive power hidden inside it is large. The Geruda is easily blown to pieces.



{

	(set: $random to (random: 1,6))

	(if: $random is 5)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 3)[(display: &quot;Medium Energy Ball&quot;)]

	(else-if: $random is 6)[(display: &quot;Medium Energy Ball&quot;)]

	(else:)[(display: &quot;Missile&quot;)]

}</tw-passagedata><tw-passagedata pid="260" name="Missile Misses Geruda" tags="" position="3850,500" size="100,100">My Missile misses its mark. The projectile goes wide of the Geruda and hits the wall, emitting a flash of light. The Geruda seems to sneer as it howls a strange cry and attacks with its enormous talons and the extremely high temperatures given off by its skin. My defense fails, and I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-1 Energy)](set: $energy to $energy - 1)](else:)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(set: $random to 0)(display: &quot;Fight Geruda&quot;)]</tw-passagedata><tw-passagedata pid="261" name="Fight Holtz" tags="" position="3550,800" size="100,100">

{

(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Holtz Beam Wave&quot;)]

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Holtz Beam Ice&quot;)]

(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Holtz Beam Normal&quot;)]

(if: $missiles &gt; 0)[(display: &quot;Holtz Weapon Missiles&quot;)]

(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Holtz Weapon Screw Attack&quot;)]

}Run  (click: &quot;Run  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Normal Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;)[](replace: &quot;Run  &quot;)[Run]&lt;hr&gt;(display: &quot;Run from Holtz&quot;)]</tw-passagedata><tw-passagedata pid="262" name="Weak Beam Holtz" tags="" position="3550,950" size="100,100">I commence my attack against the Holtz. I quickly aim my beam at the enemy.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Weak Beam Hits Holtz&quot;)]

	(else:)[(display: &quot;Weak Beam Misses Holtz&quot;)]

}</tw-passagedata><tw-passagedata pid="263" name="Holtz Weapon Screw Attack" tags="" position="4350,800" size="100,100">Screw Attack  (click: &quot;Screw Attack  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Run  &quot;)[](replace: &quot;Attack  &quot;)[Attack]&lt;hr&gt;(display: &quot;Screw Attack Holtz&quot;)]

</tw-passagedata><tw-passagedata pid="264" name="Holtz Beam Wave" tags="" position="4500,800" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Wave Beam Holtz&quot;)]

</tw-passagedata><tw-passagedata pid="265" name="Holtz Beam Ice" tags="" position="4350,950" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Weak Beam Holtz&quot;)]

</tw-passagedata><tw-passagedata pid="266" name="Holtz Beam Normal" tags="" position="4500,950" size="100,100">Normal Beam  (click: &quot;Normal Beam  &quot;)[(replace: &quot;Ice Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Weak Beam Holtz&quot;)]

</tw-passagedata><tw-passagedata pid="267" name="Holtz Weapon Missiles" tags="" position="4350,1100" size="100,100">Missiles  (click: &quot;Missiles  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Missiles  &quot;)[Missiles]&lt;hr&gt;(display: &quot;Missiles Holtz&quot;)]

</tw-passagedata><tw-passagedata pid="268" name="Weak Beam Hits Holtz" tags="" position="3700,950" size="100,100">I successfully defeat the Holtz, but also take the full brunt of its attack. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Still, I managed to successfully defeat the Holtz. 



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Medium Energy Ball&quot;)]

	(else:)[(display: &quot;Nothing&quot;)]

}]</tw-passagedata><tw-passagedata pid="269" name="Weak Beam Misses Holtz" tags="" position="3850,950" size="100,100">My attack misses. The Holtz counterattacks. The high temperatures emitted by the Holtz are around 500 degrees. I am struck by the heat and the spikes growing on the Holtz’s skin. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Should I keep fighting or run?(display: &quot;Fight Holtz&quot;)]</tw-passagedata><tw-passagedata pid="270" name="Run from Holtz" tags="" position="3550,1250" size="100,100">(if: $items contains &quot;Ice Beam&quot;)[My current beam weapon is the Ice Beam. If I use it skilfully, I can easily run from the Holtz.

{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Escape Holtz Fails&quot;)]

	(else:)[(display: &quot;Escape Holtz&quot;)]

}](else:)[(display: &quot;Run from Holtz No Ice&quot;)]</tw-passagedata><tw-passagedata pid="271" name="Run from Holtz No Ice" tags="Combat-Ended" position="3700,1250" size="100,100">If I had an Ice Beam, I could freeze the Holtz and escape, but unfortunately, I don’t. In any case, since enemy creatures almost always have a fixed range of movement, I think I can just escape the enemy&#39;s range.



However, I&#39;m a little reckless to think I can escape without taking some kind of measures to defend against a Command Level III opponent. In the little time it takes to escape from the Holtz’s range of movement, I also take two ramming attacks. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](else:)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Nevertheless, I am somehow able to run. 



(link:&quot;The battle is over.&quot;)[(set: $combat to 0, $displayMap to 1)(go-to: (history: )&#39;s last)]]</tw-passagedata><tw-passagedata pid="272" name="Escape Holtz Fails" tags="Combat-Ended" position="3850,1249" size="100,100">

The Ice Beam’s initial attack cleanly misses the Holtz. Then, I take the Holtz’s ramming attack. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



However, the next attack successfully freezes the Holtz. After that, I just run. 



(link:&quot;The battle is over.&quot;)[(set: $combat to 0, $displayMap to 1)(go-to: (history: )&#39;s last)]]</tw-passagedata><tw-passagedata pid="273" name="Escape Holtz" tags="Combat-Ended" position="4000,1250" size="100,100">

The Ice Beam’s flash absorbs the Holtz, and I escape with a sigh of relief. Now I simply pass by the side of my frozen opponent...



(link:&quot;The battle is over.&quot;)[(set: $combat to 0, $displayMap to 1)(go-to: (history: )&#39;s last)]</tw-passagedata><tw-passagedata pid="274" name="Screw Attack Holtz" tags="" position="3700,800" size="100,100">I fly at the Holtz with the Screw Attack.



{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Big Attack Misses Holtz&quot;)]

	(else:)[(display: &quot;Big Attack Hits Holtz&quot;)]

}</tw-passagedata><tw-passagedata pid="275" name="Wave Beam Holtz" tags="" position="3850,800" size="100,100">I use the Wave Beam on the Holtz. A large wave fired from my beam flies towards the the creature...



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Big Attack Misses Holtz&quot;)]

	(else:)[(display: &quot;Big Attack Hits Holtz&quot;)]

}</tw-passagedata><tw-passagedata pid="276" name="Missiles Holtz" tags="" position="3550,1100" size="100,100">I attack the Holtz with a Missile. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



The Holtz flies about in mid-air without indicating where it will attack. The Missile’s accuracy rate is roughly 50%.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Big Attack Hits Holtz&quot;)]

	(else:)[(display: &quot;Missile Misses Holtz&quot;)]

}</tw-passagedata><tw-passagedata pid="277" name="Scan Holtz" tags="" position="4150,1250" size="100,100">&lt;img src=./images/Holtz.jpg&gt;



The Holtz is an evolution of the Geruda. It doesn’t have the Geruda’s enormous talons, but it does have spikes growing on its body and swoops to attack, radiating temperatures even higher than the Geruda’s. Its means of locomotion is the same as the Geruda, propelling itself with jets using the energy generated inside its body and freely flying about in mid-air. 



However, even though it&#39;s an evolution of the Geruda, its level and damage are different. If anything, instead of saying the Holtz evolved from the Geruda, it seems better to say that both are creatures with the same ancestor whose genes had already diverged.</tw-passagedata><tw-passagedata pid="278" name="Big Attack Misses Holtz" tags="" position="4150,800" size="100,100">The Holtz is defeated. However, in a final act of defiance, it shoots a single spike at me. The pointed spike makes a direct hit to my shoulder. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



At any rate, the Holtz is defeated. It is mercilessly blown to bits in my attack.



{

	(set: $random to (random: 1,6))

	(if: $random is 1)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 2)[(display: &quot;Missile&quot;)]

	(else-if: $random is 3)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}]</tw-passagedata><tw-passagedata pid="279" name="Big Attack Hits Holtz" tags="" position="4000,800" size="100,100">The Holtz is destroyed when it absorbs the attack. One hit is enough. The creature doesn&#39;t stand a chance and is splattered through the air.



{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 4)[(display: &quot;Missile&quot;)]

	(else-if: $random is 5)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="280" name="Missile Misses Holtz" tags="" position="3700,1100" size="100,100">My Missile’s aim is off. The shot is wasted, and the Holz follows its trajectory back and strikes. The heat emitting from the Holtz&#39;s body feels unbearable as it draws near. There is an impact—a blow from the Holtz’s spikes. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Keep fighting?(display: &quot;Fight Holtz&quot;)]</tw-passagedata><tw-passagedata pid="281" name="Scan Multiviola" tags="" position="4150,1850" size="100,100">The Multiviola is rock melted under high temperatures that Mother Brain has breathed her life force into. It has strange floating abilities and flies around the room. It is also incredibly fast. It is Command Level III.



If I come across these, I should definitely be prepared to take damage. Also, the Multiviola is blindingly fast, so it might be better to run.</tw-passagedata><tw-passagedata pid="282" name="Fight Multiviola" tags="" position="3550,1400" size="100,100">(if: $random is 0)[I attack the Multiviola.](if: $random is 7)[](else:)[Which attack mode should I use against the Multiviola?]



{

(if: $items contains &quot;Wave Beam&quot;)[(display: &quot;Multiviola Beam Wave&quot;)]

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Multiviola Beam Ice&quot;)]

(if: $items contains &quot;Normal Beam&quot;)[(display: &quot;Multiviola Beam Normal&quot;)]

(if: $missiles &gt; 0)[(display: &quot;Multiviola Weapon Missiles&quot;)]

(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Multiviola Weapon Screw Attack&quot;)]

}Run  (click: &quot;Run  &quot;)[(replace: &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Normal Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;)[](replace: &quot;Run  &quot;)[Run]&lt;hr&gt;(display: &quot;Run from Multiviola&quot;)]</tw-passagedata><tw-passagedata pid="283" name="Multiviola Weapon Screw Attack" tags="" position="4350,1400" size="100,100">Screw Attack  (click: &quot;Screw Attack  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Run  &quot;)[](replace: &quot;Attack  &quot;)[Attack]&lt;hr&gt;

{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Strong Attack Misses Multiviola&quot;)]

	(else:)[(display: &quot;Screw Attack Hits Multiviola&quot;)]

}]

</tw-passagedata><tw-passagedata pid="284" name="Multiviola Beam Wave" tags="" position="4500,1400" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;

{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Strong Attack Misses Multiviola&quot;)]

	(else:)[(display: &quot;Wave Beam Hits Multiviola&quot;)]

}]

</tw-passagedata><tw-passagedata pid="285" name="Multiviola Weapon Missiles" tags="" position="4650,1400" size="100,100">Missiles  (click: &quot;Missiles  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Missiles  &quot;)[Missiles]&lt;hr&gt;I fire a Missile at the Multiviola. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]

{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Strong Attack Misses Multiviola&quot;)]

	(else:)[(display: &quot;Missile Hits Multiviola&quot;)]

}]

</tw-passagedata><tw-passagedata pid="286" name="Multiviola Beam Ice" tags="" position="4350,1550" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Ice Beam Multiviola&quot;)]

</tw-passagedata><tw-passagedata pid="287" name="Multiviola Beam Normal" tags="" position="4500,1550" size="100,100">Normal Beam  (click: &quot;Normal Beam  &quot;)[(replace: &quot;Ice Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;The Normal Beam is no match for the Multiviola. Since this is all I can use, I run. (display: &quot;Escape Multiviola&quot;)]

</tw-passagedata><tw-passagedata pid="288" name="Strong Attack Misses Multiviola" tags="" position="4150,1400" size="100,100">

My attack fails! The Multiviola spins like a top at high speed and rushes toward me. Since its attack uses every wall bounce to about at high speeds, it is extremely difficult to predict. The Multiviola bounces off the walls several times before striking me. Since the creature continuously maintains a half-melted state owing to the high temperatures, the impact of the blow is great. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Should I keep fighting, or is it better to run?(set: $random to 7)(display: &quot;Fight Multiviola&quot;)]</tw-passagedata><tw-passagedata pid="289" name="Ice Beam Multiviola" tags="" position="3550,1550" size="100,100">I attack the Multiviola with the Ice Beam! However, the Ice Beam is not very effective when my opponent is moving at such high speeds.



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Ice Beam Hits Multiviola&quot;)]

	(else:)[(display: &quot;Ice Beam Misses Multiviola&quot;)]

}</tw-passagedata><tw-passagedata pid="290" name="Ice Beam Hits Multiviola" tags="" position="3700,1550" size="100,100">I have a very hard time defeating the Multiviola. What&#39;s more, I am showered by its searing spray, and take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



In any event, I somehow defeat the Multiviola with the Ice Beam.



{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(display: &quot;Multiviola Nothing&quot;)]

	(else-if: $random is 4)[(display: &quot;Multiviola Missiles&quot;)]

	(else-if: $random is 5)[(display: &quot;Multiviola Missiles&quot;)]

	(else:)[(display: &quot;Multiviola Energy&quot;)]

}]</tw-passagedata><tw-passagedata pid="291" name="Ice Beam Misses Multiviola" tags="" position="3849,1550" size="100,100">If I attack with the Ice Beam continuously, it has the special property of easily freezing even melted rock. However, if this beam is used in a fight with an enemy of Command Level III or higher, I absolutely must execute a series of consecutive attacks.



The frozen Multiviola thaws. Simultaneously, its movements are even faster than before, and it deals me damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Is it better to keep fighting or run?(set: $random to 7)(display: &quot;Fight Multiviola&quot;)]</tw-passagedata><tw-passagedata pid="292" name="Run from Multiviola" tags="" position="3550,1850" size="100,100">{

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Escape Multiviola Ice Beam&quot;)]

(else:)[(display: &quot;Escape Multiviola&quot;)]

}</tw-passagedata><tw-passagedata pid="293" name="Escape Multiviola" tags="Combat-Ended" position="4000,1850" size="100,100">Finally, I enter the Multiviola’s blind spot, but before I can run, I take two attacks. I take considerable damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](else:)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Still, I am somehow able to get inside the blind spot of the Multiviola’s range of movement. After that, it flies away, and it&#39;s now safe for me to move about the room as I please.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0, $displayMap to 1)(go-to: $lastRoom)]]</tw-passagedata><tw-passagedata pid="294" name="Escape Multiviola Ice" tags="Combat-Ended" position="3850,1850" size="100,100">I take damage from the Multiviola&#39;s ramming attack. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



However, I am able to somehow get away with only that little damage. I find a blind spot in the Multiviola’s movement pattern. After it flies away, it&#39;s safe to move around the room freely.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0, $displayMap to 1)(go-to: $lastRoom)]]</tw-passagedata><tw-passagedata pid="295" name="Escape Frozen Multiviola" tags="Combat-Ended" position="3700,1850" size="100,100">I freeze the Multiviola with the Ice Beam. While it&#39;s frozen and can&#39;t move, I successfully escape. I don&#39;t take any damage. Now it&#39;s safe to run to the next room before it thaws.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0, $displayMap to 1)(go-to: $lastRoom)]</tw-passagedata><tw-passagedata pid="296" name="Multiviola Nothing" tags="" position="3850,1700" size="100,100">(text-color: red)[Nothing] is left in the remains of the Multiviola.



A new Multiviola comes rushing towards me.  (click: &quot;A new Multiviola comes rushing towards me.  &quot;)[(replace: &quot;me.  &quot;)[me.]&lt;hr&gt;(go-to: &quot;Fight Another Multiviola&quot;)] </tw-passagedata><tw-passagedata pid="297" name="Multiviola Missiles" tags="" position="3700,1700" size="100,100">The Multiviola is destroyed, leaving Missiles behind in its remains. (text-color: red)[(+2 Missiles)](set: $missiles to it + 2)(if: $missiles &gt; $maxMissiles)[(set: $missiles to $maxMissiles)](replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



A new Multiviola comes rushing towards me.  (click: &quot;A new Multiviola comes rushing towards me.  &quot;)[(replace: &quot;me.  &quot;)[me.]&lt;hr&gt;(go-to: &quot;Fight Another Multiviola&quot;)]</tw-passagedata><tw-passagedata pid="298" name="Multiviola Energy" tags="" position="3550,1700" size="100,100">An Energy Ball appears in the remains of the Multiviola. (text-color: yellow)[(+5 Energy)](set: $energy to $energy + 5)(if: $energy &gt; $maxEnergy)[(set: $energy to $maxEnergy)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



A new Multiviola comes rushing towards me.  (click: &quot;A new Multiviola comes rushing towards me.  &quot;)[(replace: &quot;me.  &quot;)[me.]&lt;hr&gt;(go-to: &quot;Fight Another Multiviola&quot;)]</tw-passagedata><tw-passagedata pid="299" name="Fight Another Multiviola" tags="" position="4000,1700" size="100,100">The creature called the Multiviola has the same traits as the Zeb and will attack in a group. If I defeat one, they will keep coming one after the other. Because of this, I&#39;ll eventually have to break off the attack and run for it. However, if I can keep defeating the Multiviolas, I can replenish my Energy and Missiles.



Well, what should I do?(set: $random to 7)(display: &quot;Fight Multiviola&quot;)</tw-passagedata><tw-passagedata pid="300" name="Screw Attack Hits Multiviola" tags="" position="3700,1400" size="100,100">I attack the Multiviola.



I explode forward with the Screw Attack. The Multiviola can’t withstand the blast and disintegrates in mid-air.



{

	(set: $random to (random: 1,6))

	(if: $random is 4)[(display: &quot;Multiviola Nothing&quot;)]

	(else-if: $random is 1)[(display: &quot;Multiviola Missiles&quot;)]

	(else-if: $random is 2)[(display: &quot;Multiviola Missiles&quot;)]

	(else:)[(display: &quot;Multiviola Energy&quot;)]

}</tw-passagedata><tw-passagedata pid="301" name="Wave Beam Hits Multiviola" tags="" position="3850,1400" size="100,100">I attack the Multiviola with the Wave Beam! It&#39;s a little difficult since I have to hit the Multiviola flying around at very high speeds with consecutive beam shots. Still, I successfully defeat the Multiviola while avoiding its attacks. In comparison with the Normal Beam and Ice Beam, the Wave Beam is a weapon with incredible power.



{

	(set: $random to (random: 1,6))

	(if: $random is 5)[(display: &quot;Multiviola Nothing&quot;)]

	(else-if: $random is 1)[(display: &quot;Multiviola Missiles&quot;)]

	(else-if: $random is 3)[(display: &quot;Multiviola Missiles&quot;)]

	(else:)[(display: &quot;Multiviola Energy&quot;)]

}</tw-passagedata><tw-passagedata pid="302" name="Missile Hits Multiviola" tags="" position="4000,1400" size="100,100">

I instantly calculate the angle of reflection when the Multiviola uses the walls to rebound. I again calculate the relative speeds of it and the Missile, which explodes at the point I predicted.



My calculations are correct. The Multiviola strikes the wall and changes course, floating up. Then the Missile hits dead-on. A large &lt;i&gt;BOOM&lt;/i&gt; echoes through the room, and the Multiviola is blown to smithereens.



{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(display: &quot;Multiviola Nothing&quot;)]

	(else-if: $random is 2)[(display: &quot;Multiviola Energy&quot;)]

	(else-if: $random is 4)[(display: &quot;Multiviola Energy&quot;)]

	(else:)[(display: &quot;Multiviola Missiles&quot;)]

}</tw-passagedata><tw-passagedata pid="303" name="Scan Dessgeega" tags="" position="3700,2450" size="100,100">&lt;img src=./images/Dessgeega.jpg&gt;



The Dessgeega is this floor’s miniboss and the second-toughest enemy next to Ridley. This creature has also been modified by Mother Brain. It appears to be a cyborg like the Sidehopper, with powerful springs set into its legs. Furthermore, its huge talons and thick legs dwarf the Rio and Geruda, and its claws have been modified to deliver electric shocks.



The creature rushes at me faster than I can ready myself.</tw-passagedata><tw-passagedata pid="304" name="Dessgeega Beam Wave" tags="" position="4350,2000" size="100,100">Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;I attack the Dessgeega with the Wave Beam!



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Wave Beam Hits Dessgeega&quot;)]

	(else:)[(display: &quot;Wave Beam Misses Dessgeega&quot;)]

}]</tw-passagedata><tw-passagedata pid="305" name="Dessgeega Beam Ice" tags="" position="4350,2150" size="100,100">Ice Beam  (click: &quot;Ice Beam  &quot;)[(replace: &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;I promptly fire the Ice Beam at the Dessgeega. There is no time to select another weapon.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Ice Beam Misses Dessgeega&quot;)]

	(else:)[(display: &quot;Ice Beam Hits Dessgeega&quot;)]

}]</tw-passagedata><tw-passagedata pid="306" name="Dessgeega Beam Normal" tags="" position="3850,2450" size="100,100">I haven’t collected the Wave Beam or the Ice Beam. Fight with the Normal Beam.  



(click: &quot;Fight with the Normal Beam.&quot;)[&lt;hr&gt;The Dessgeega’s attack is fierce. It has reinforced leg muscles, thick arms more powerful than those of all other enemies, and enormous talons that can deliver an electric shock. The lightning speed of its attack means I can&#39;t use anything other than beam weapons on it.



It just so happens that the only beam weapon I currently possess is the Normal Beam...and the Normal Beam seems to be no match for the Dessgeega. &lt;hr&gt;(display: &quot;Dessgeega Normal Beam Damage&quot;)]</tw-passagedata><tw-passagedata pid="307" name="Wave Beam Hits Dessgeega" tags="" position="3550,2000" size="100,100">The Wave Beam strikes the stubborn Dessgeega, preventing it from getting close to me. The creature finally dies in an explosion. It is a triumph of the Wave Beam’s power and my athletic abilities and reflexes.



{

	(set: $random to (random: 1,6))

	(if: $random is 4)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 2)[(display: &quot;Missile&quot;)]

	(else-if: $random is 6)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="308" name="Wave Beam Misses Dessgeega" tags="" position="3700,2000" size="100,100">The Wave Beam attack is a little soft on the Dessgeega. However, I am somehow able to defeat it. But at the same time, I also take a blow from the creature&#39;s enormous talons. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



{

	(set: $random to (random: 1,6))

	(if: $random is 1)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 3)[(display: &quot;Missile&quot;)]

	(else-if: $random is 5)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}]</tw-passagedata><tw-passagedata pid="309" name="Ice Beam Misses Dessgeega" tags="" position="3700,2150" size="100,100">The initial shot from the Ice Beam fails. The Dessgeega avoids being frozen and I absorb its ramming attack. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



However, my second attack succeeds. The Dessgeega turns into a ball of ice and falls to the ground. Now I can run, but it&#39;s also vulnerable... (display: &quot;Fight Frozen Dessgeega&quot;)]</tw-passagedata><tw-passagedata pid="310" name="Ice Beam Hits Dessgeega" tags="" position="3549,2150" size="100,100">I succeed in freezing the Dessgeega with my Ice Beam. The Dessgeega’s enormous legs stop about 20 centimeters in front of my eyes. I stopped it by a hair’s breadth. If I had attacked just a little later, I would have taken a large blow from the Dessgeega’s enormous talons.



Well, if the Dessgeega is frozen now, I can escape unscathed, but now it&#39;s also vulnerable to attack...(display: &quot;Fight Frozen Dessgeega&quot;)</tw-passagedata><tw-passagedata pid="311" name="Run from Frozen Dessgeega" tags="Combat-Ended" position="3550,2450" size="100,100">Taking a backward glance at the Dessgeega frozen by the Ice Beam, I clear out of there. It is more profitable to run away than it is to fight the Dessgeega head-on.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)(set: $displayMap to 1)](set: $enemyFrozen to 1)</tw-passagedata><tw-passagedata pid="312" name="Fight Frozen Dessgeega" tags="" position="3850,2150" size="100,100">



{

(if: $items contains &quot;Ice Beam&quot;)[(display: &quot;Ice Beam Frozen Dessgeega&quot;)]

(if: $missiles &gt; 0)[(display: &quot;Dessgeega Weapon Missiles&quot;)]

(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Dessgeega Screw Attack&quot;)]

}Run  (click: &quot;Run  &quot;)[(replace: &quot;Continue attacking with the Ice Beam&quot;, &quot;Missiles&quot;, &quot;Screw Attack&quot;)[](replace: &quot;Run  &quot;)[Run]&lt;hr&gt;(display: &quot;Run from Frozen Dessgeega&quot;)]</tw-passagedata><tw-passagedata pid="313" name="Dessgeega Screw Attack" tags="" position="4500,2150" size="100,100">Screw Attack  (click: &quot;Screw Attack  &quot;)[(replace: &quot;Continue attacking with the Ice Beam  &quot;, &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Missiles  &quot;, &quot;Run  &quot;)[](replace: &quot;Attack  &quot;)[Attack]&lt;hr&gt;(display: &quot;Screw Attack Frozen Dessgeega&quot;)]

</tw-passagedata><tw-passagedata pid="314" name="Missiles Frozen Dessgeega" tags="" position="4150,2150" size="100,100">&lt;img src=./images/DessgeegaMissileDestroy.jpg&gt;



It is easy to destroy a frozen and immobile enemy with a Missile. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



The Dessgeega gives a strange, shrill cry and perishes.



{

	(set: $random to (random: 1,6))

	(if: $random is 1)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 3)[(display: &quot;Energy Ball&quot;)]

	(else-if: $random is 5)[(display: &quot;Energy Ball&quot;)]

	(else:)[(display: &quot;Missile&quot;)]

}</tw-passagedata><tw-passagedata pid="315" name="Screw Attack Frozen Dessgeega" tags="" position="4000,2150" size="100,100">I have no trouble defeating a frozen enemy with the Screw Attack. The Dessgeega is destroyed.



{

	(set: $random to (random: 1,6))

	(if: $random is 4)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 2)[(display: &quot;Missile&quot;)]

	(else-if: $random is 6)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="316" name="Dessgeega Weapon Missiles" tags="" position="4650,2150" size="100,100">Missiles  (click: &quot;Missiles  &quot;)[(replace: &quot;Continue attacking with the Ice Beam  &quot;, &quot;Normal Beam  &quot;, &quot;Wave Beam  &quot;, &quot;Ice Beam  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Missiles  &quot;)[Missiles]&lt;hr&gt;(display: &quot;Missiles Frozen Dessgeega&quot;)]

</tw-passagedata><tw-passagedata pid="317" name="Ice Beam Frozen Dessgeega" tags="" position="4350,2299" size="100,100">Continue attacking with the Ice Beam  (click: &quot;Continue attacking with the Ice Beam  &quot;)[(replace: &quot;Missiles  &quot;, &quot;Screw Attack  &quot;, &quot;Run  &quot;)[](replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;(display: &quot;Attack Frozen Dessgeega with Ice Beam&quot;)]

</tw-passagedata><tw-passagedata pid="318" name="Ice Beam Misses Frozen Dessgeega" tags="" position="3700,2300" size="100,100">I have to attack the Dessgeega while keeping it in a frozen state, or I can&#39;t beat it with just the Ice Beam. But I am careless. By the time I realize this, it is already too late. The Dessgeega’s enormous legs send me flying back. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



While I am flying through the air, I fire the Ice Beam. Again, the Dessegeega’s movement ceases.



Should I continue to fight with the Ice Beam? (display: &quot;Fight Frozen Dessgeega&quot;)]</tw-passagedata><tw-passagedata pid="319" name="Attack Frozen Dessgeega with Ice Beam" tags="" position="3549,2300" size="100,100">I attack again with the Ice Beam.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Ice Beam Misses Frozen Dessgeega&quot;)]

	(else:)[(display: &quot;Ice Beam Hits Frozen Dessgeega&quot;)]

}</tw-passagedata><tw-passagedata pid="320" name="Ice Beam Hits Frozen Dessgeega" tags="" position="3850,2300" size="100,100">Nonetheless, I succeed in beating the Dessgeega with just the Ice Beam. I press on with the attack while being careful not to thaw it.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Dessgeega Energy Ball&quot;)]

	(else:)[(display: &quot;Dessgeega Nothing&quot;)]

}</tw-passagedata><tw-passagedata pid="321" name="Dessgeega Energy Ball" tags="Combat-Ended" position="4000,2300" size="100,100">The enemy is destroyed, leaving an Energy Ball in its remains. (text-color: yellow)[(+1 Energy)](set: $energy to $energy + 1)(if: $energy &gt; $maxEnergy)[(set: $energy to $maxEnergy)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)(set: $displayMap to 1)]</tw-passagedata><tw-passagedata pid="322" name="Dessgeega Nothing" tags="Combat-Ended" position="4150,2300" size="100,100">The enemy vanishes, leaving (text-color: red)[nothing] behind.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)(set: $displayMap to 1)]</tw-passagedata><tw-passagedata pid="323" name="Go and take it" tags="" position="3550,2625" size="100,100">The instant I take the Key Stone, the door behind me closes with a clang. In addition, the Key Stone I tried to take is a forgery. I fell into the trap hook, line, and sinker. I can’t get out of this room.



(if: $items contains &quot;Bombs&quot;)[[[Lay a Bomb-&gt;Use Bombs to Escape]]]

(if: $missiles &gt; 1)[[[Fire Missiles-&gt;Use Missiles to Escape]]]</tw-passagedata><tw-passagedata pid="324" name="Wait and see what happens" tags="" position="3400,2850" size="100,100">I wait and see what happens and hear a noise behind me. Ridley?!



[[Turn around to face him and make an attack-&gt;Turn Around and Attack Ridley]]

[[Take a step forward, then turn around so I can make a sudden attack-&gt;Fell in a Trap]]</tw-passagedata><tw-passagedata pid="325" name="Use Bombs to Escape" tags="" position="3700,2625" size="100,100">I search for a thin part of the wall with my Radar and set some Bombs there. The room is inundated by a series of three explosions. The thin wall is blown back. Instantly, a dense cloud of dust billows up. [[I successfully created an exit.-&gt;Ridley Appears]]</tw-passagedata><tw-passagedata pid="326" name="Use Missiles to Escape" tags="" position="3700,2775" size="100,100">I search for a thin spot on the surface of the wall with my Radar. I face that spot and fire Missiles. (text-color: red)[(-2 Missiles)](set: $missile to $missile - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



&lt;i&gt;(text-style: &quot;rumble&quot;)[ZOOM, ZOOM.]&lt;/i&gt;



As if hitting a beat, I fire the Missiles in succession. A dense cloud of dust boils up. [[I succeed in opening an exit.-&gt;Ridley Appears]]</tw-passagedata><tw-passagedata pid="327" name="Turn Around and Attack Ridley" tags="" position="3550,2925" size="100,100">&lt;img src=./images/Ridley.jpg&gt;



The instant I turn and make my attack, something slams into me. Like a spike thrust into my torso, the pain runs through every inch of my body. It&#39;s Ridley’s fire breath.



This fire breath is otherworldly. Ridley is the original inhabitant of this asteroid and has psychic abilities, which gives him a special power to stimulate pain in his opponents. Such is the flame attack I receive. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



{

	(if: $energy &gt; 0)[(display: &quot;Fight Ridley&quot;)]

	(else:)[(display: &quot;Ridley Roast&quot;)]

}</tw-passagedata><tw-passagedata pid="328" name="Fell in a Trap" tags="" position="3550,2775" size="100,100">However, this room is a trap. Just as I take a step forward, the doors to the entrance behind me close, and I am shut in. The stone sitting on the table is a forgery made from some kind of plastic material. If I can’t get out of this room...



(if: $items contains &quot;Bombs&quot;)[[[Use Bombs-&gt;Use Bombs to Escape]]]

(if: $missiles &gt; 1)[[[Use Missiles-&gt;Use Missiles to Escape]]]</tw-passagedata><tw-passagedata pid="329" name="Fight Ridley" tags="" position="4000,2675" size="100,100">(if: $missiles &lt; 2)[However, I&#39;ll need at least 2 Missiles to fight Ridley.](else:)[Should I Ridley with my current equipment or pull back?]



(if: $missiles &gt; 1)[Fight as-is  (click: &quot;Fight as-is  &quot;)[(replace: &quot;Pull back  &quot;)[]&lt;hr&gt;(display: &quot;Fire Missiles at Ridley 1&quot;)]]

Pull back  (click: &quot;Pull back  &quot;)[(replace: &quot;Fight as-is  &quot;)[]&lt;hr&gt;

{

	(if: $energy &gt; 9)[(display: &quot;Escape Ridley&quot;)]

	(else:)[(display: &quot;Escape from Ridley Fails&quot;)]

}]</tw-passagedata><tw-passagedata pid="330" name="Ridley Roast" tags="GAME-OVER" position="3700,2925" size="100,100">I am torn apart in Ridley’s first attack. I should try again and come back after after upgrading my equipment.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="331" name="Ridley Appears" tags="" position="3850,2675" size="100,100">&lt;img src=./images/Ridley.jpg&gt;



The cloud of dust settles. The open exit comes into view.



—At the same moment, there is an enormous creature there. Its overall height is easily three meters. Its silhouette looks like an ancient dinosaur...except for the shadow of the enormous wings on its back...



—It’s Ridley. 



The instant I realize this, I feel sharp a pain throughout my entire body. It&#39;s Ridley’s attack. He breathes fire.



As the only creature that lived on the asteroid Zebes in the early days when this environment was uninhabitable (although now it has been improved by the Space Pirates), Ridley has psychic powers and the ability to fly. But now his mind is controlled by Mother Brain, and though he was originally docile, he has been transformed into a creature of indescribable cruelty. 



Ridley’s flame attack is among his psionic abilities, so when I feel those flames, the pain he induces throughout my entire body all at once is incredible. I take this attack. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



{

	(if: $energy &gt; 0)[(display: &quot;Fight Ridley&quot;)]

	(else:)[(display: &quot;Ridley Roast&quot;)]

}</tw-passagedata><tw-passagedata pid="332" name="Escape Ridley" tags="Combat-Ended" position="3950,3025" size="100,100">While dodging left and right to avoid Ridley’s attacks, I successfully escape. [[Thereupon, I go back South to &lt;b&gt;Room B-64&lt;/b&gt;.-&gt;64]](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="333" name="Escape from Ridley Fails" tags="GAME-OVER" position="3950,3175" size="100,100">I thought I could try and run, but could not force my way through Ridley&#39;s fire breath. Ridley again inflicts a flame attack. And so now, my Energy spent, I perish, my strength exhausted.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="334" name="Fire Missiles at Ridley 1" tags="" position="4150,2675" size="100,100">I fire Missiles at Ridley. The 2 Missiles fly towards him as if each has a will of its own. (text-color: red)[(-2 Missiles)](set: $missiles to $missiles - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



{

	(set: $random to (random: 1,6))

	(if: $random is 4)[(display: &quot;Missiles Miss Ridley 1&quot;)]

	(else:)[(display: &quot;Missiles Hit Ridley 1&quot;)]

}</tw-passagedata><tw-passagedata pid="335" name="Missiles Miss Ridley 1" tags="" position="4300,2750" size="100,100">My attack is swallowed by Ridley’s flames. Instead, I take damage from his attack. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]

	

(if: $energy &lt; 1)[(set: $energy to 0)(display: &quot;Burnt to a Crisp&quot;)](else:)[Fire 2 Missiles  (click: &quot;Fire 2 Missiles  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;)[Fire 2 Missiles]&lt;hr&gt;(display: &quot;Fire Missiles at Ridley 1&quot;)]

Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam]&lt;hr&gt;(display: &quot;Ridley Wave Beam 1&quot;)]Run  (click: &quot;Run  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;, &quot;Wave Beam  &quot;)[]&lt;hr&gt;(display: &quot;Escape Ridley Check&quot;)]]

{	

	(if: $missiles &lt; 2)[(replace: &quot;Fire 2 Missiles  &quot;)[Missiles Empty]]

	(unless: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Wave Beam  &quot;)[]]

	(if: $missiles &gt; 1)[(replace: &quot;Run  &quot;, &quot;Wave Beam  &quot;)[]]

	(if: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Run  &quot;)[]]

}</tw-passagedata><tw-passagedata pid="336" name="Burnt to a Crisp" tags="GAME-OVER" position="4150,2825" size="100,100">The Missile attack fails. I take a large amount of damage in Ridley’s flames and run out of Energy. Recovery is completely impossible. I should have been careful and saved just a little bit more Energy. However, it is already too late to regret it. Now, I can only wait for death.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="337" name="Ridley Wave Beam 1" tags="" position="4150,2975" size="100,100">I attack Ridley again with the Wave Beam. He flinches from it a little.



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Wave Beam Misses Ridley 1&quot;)]

	(else:)[(display: &quot;Wave Beam Hits Ridley 1&quot;)]

}</tw-passagedata><tw-passagedata pid="338" name="Missiles Hit Ridley 1" tags="" position="4300,2600" size="100,100">Ridley’s shriek echoes through the room. The Missile attack hits spectacularly.



Fire 2 Missiles  (click: &quot;Fire 2 Missiles  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;)[Fire 2 Missiles]&lt;hr&gt;(display: &quot;Fire Missiles at Ridley 2&quot;)]

Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam]&lt;hr&gt;(display: &quot;Ridley Wave Beam 2&quot;)]

Run  (click: &quot;Run  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;, &quot;Wave Beam  &quot;)[]&lt;hr&gt;(display: &quot;Escape Ridley Check&quot;)]

{	

	(if: $missiles &lt; 2)[(replace: &quot;Fire 2 Missiles  &quot;)[Missiles Empty]]

	(unless: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Wave Beam  &quot;)[]]

	(if: $missiles &gt; 1)[(replace: &quot;Run  &quot;, &quot;Wave Beam  &quot;)[]]

	(if: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Run  &quot;)[]]

}</tw-passagedata><tw-passagedata pid="339" name="Fire Missiles at Ridley 2" tags="" position="4450,2675" size="100,100">I attack Ridley again. 2 Missiles fly at him as if each has a will of its own. (text-color: red)[(-2 Missiles)](set: $missiles to $missiles - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



Ridley breathes fire to try and avoid them...



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Missiles Hit Ridley 2&quot;)]

	(else:)[(display: &quot;Missiles Miss Ridley 2&quot;)]

}</tw-passagedata><tw-passagedata pid="340" name="Ridley Wave Beam 2" tags="" position="4450,2975" size="100,100">I attack Ridley with the Wave Beam. He cries out and moves to avoid it.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Wave Beam Hits Ridley 2&quot;)]

	(else:)[(display: &quot;Wave Beam Misses Ridley 2&quot;)]

}</tw-passagedata><tw-passagedata pid="341" name="Escape Ridley Check" tags="" position="3800,3100" size="100,100">I don&#39;t have enough equipment. I should escape come back again after preparing my equipment. However, I don’t know whether I can run from Ridley now.



{

		(if: $energy &gt; 9)[(display: &quot;Escape Ridley&quot;)]

		(else:)[(display: &quot;Burnt to a Crisp&quot;)]

}</tw-passagedata><tw-passagedata pid="342" name="Missiles Hit Ridley 2" tags="" position="4600,2600" size="100,100">Ridley takes damage a second time. His painful moan rumbles through the chamber like an earthquake.



Fire 2 Missiles  (if: $missiles &lt; 2)[(replace: &quot;Fire 2 Missiles  &quot;)[Missiles Empty]](click: &quot;Fire 2 Missiles  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;)[Fire 2 Missiles]&lt;hr&gt;(display: &quot;Fire Missiles at Ridley 3&quot;)]

Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam]&lt;hr&gt;(display: &quot;Ridley Wave Beam 3&quot;)]Run  (click: &quot;Run  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;, &quot;Wave Beam  &quot;)[]&lt;hr&gt;(display: &quot;Escape Ridley Check&quot;)]

{	

	(unless: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Wave Beam  &quot;)[]]

	(if: $missiles &gt; 1)[(replace: &quot;Run  &quot;, &quot;Wave Beam  &quot;)[]]

	(if: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Run  &quot;)[]]

}</tw-passagedata><tw-passagedata pid="343" name="Missiles Miss Ridley 2" tags="" position="4600,2750" size="100,100">The attack is swallowed by Ridley’s flames. Instead, I take damage from his attack. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]

	

(if: $energy &lt; 1)[(set: $energy to 0)(display: &quot;Burnt to a Crisp&quot;)](else:)[Fire 2 Missiles  (click: &quot;Fire 2 Missiles  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;)[Fire 2 Missiles]&lt;hr&gt;(display: &quot;Fire Missiles at Ridley 2&quot;)]

Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam]&lt;hr&gt;(display: &quot;Ridley Wave Beam 2&quot;)]Run  (click: &quot;Run  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;, &quot;Wave Beam  &quot;)[]&lt;hr&gt;(display: &quot;Escape Ridley Check&quot;)]]

{	

	(if: $missiles &lt; 2)[(replace: &quot;Fire 2 Missiles  &quot;)[Missiles Empty]]

	(unless: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Wave Beam  &quot;)[]]

	(if: $missiles &gt; 1)[(replace: &quot;Run  &quot;, &quot;Wave Beam  &quot;)[]]

	(if: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Run  &quot;)[]]

}</tw-passagedata><tw-passagedata pid="344" name="Fire Missiles at Ridley 3" tags="" position="4750,2675" size="100,100">I launch another attack against Ridley. 2 Missiles fly towards him. His eyes fill with dread at the sight of them. He breathes fire to try and avoid them. (text-color: red)[(-2 Missiles)](set: $missiles to $missiles - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Missiles Miss Ridley 3&quot;)]

	(else:)[(display: &quot;Ridley Destroyed Missiles&quot;)]

}</tw-passagedata><tw-passagedata pid="345" name="Ridley Wave Beam 3" tags="" position="4750,2975" size="100,100">I attack Ridley with the Wave Beam.



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Wave Beam Hits Ridley 3&quot;)]

	(else:)[(display: &quot;Wave Beam Misses Ridley 3&quot;)]

}</tw-passagedata><tw-passagedata pid="346" name="Missiles Miss Ridley 3" tags="" position="4900,2750" size="100,100">All of my attacks are rendered useless by Ridley&#39;s flames. Instead, I take damage from Ridley’s attack. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]   

	

(if: $energy &lt; 1)[(set: $energy to 0)(display: &quot;Burnt to a Crisp&quot;)](else:)[Fire 2 Missiles  (click: &quot;Fire 2 Missiles  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;)[Fire 2 Missiles]&lt;hr&gt;(display: &quot;Fire Missiles at Ridley 3&quot;)]

Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam]&lt;hr&gt;(display: &quot;Ridley Wave Beam 3&quot;)]Run  (click: &quot;Run  &quot;)[(replace: &quot;Fire 2 Missiles  &quot;, &quot;Wave Beam  &quot;)[]&lt;hr&gt;(display: &quot;Escape Ridley Check&quot;)]]

{	

	(if: $missiles &lt; 2)[(replace: &quot;Fire 2 Missiles  &quot;)[Missiles Empty]]

	(unless: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Wave Beam  &quot;)[]]

	(if: $missiles &gt; 1)[(replace: &quot;Run  &quot;, &quot;Wave Beam  &quot;)[]]

	(if: $items contains &quot;Wave Beam&quot;)[(replace: &quot;Run  &quot;)[]]

}</tw-passagedata><tw-passagedata pid="347" name="Ridley Destroyed Missiles" tags="" position="4900,2600" size="100,100">Ridley has been severely weakened. Missiles strike him again. At last, his final moment has come. When the last attack hits, Ridley is enveloped in white light. [[Then, there is a brief but brilliant explosion.-&gt;Ridley Defeated]]</tw-passagedata><tw-passagedata pid="348" name="Ridley Defeated" tags="" position="5200,2675" size="100,100">I walk to the spot where Ridley blew up. Right in the middle, a small black stone has fallen. This is the Key Stone.



((text-color: &quot;Purple&quot;)[Ridley&#39;s Key Stone] collected. (set: $items to it + (a: &quot;RidleyStone&quot;)) If I have both Key Stones, I can go South through the gate in &lt;b&gt;Room A-10&lt;/b&gt;. Energy and Missiles Refilled.)(set: $energy to $maxEnergy, $missiles to $maxMissiles)



I won&#39;t have to come back to Ridley’s Room a second time, and the door closes behind me with a clang, deactivating for good.



I go back South to Room B-64. (click: &quot;I go back South to Room B-64.&quot;)[(set: $displayMap to 1)(go-to: &quot;64&quot;)]</tw-passagedata><tw-passagedata pid="349" name="Wave Beam Misses Ridley 1" tags="" position="4300,3050" size="100,100">The Wave Beam attack fails. It is overpowered by Ridley’s flame attack. Again, Ridley&#39;s flames engulf me, and I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(if: $energy &gt; 0)[Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam](replace: &quot;Run  &quot;)[]&lt;hr&gt;(display: &quot;Ridley Wave Beam 1&quot;)]](else:)[(display: &quot;Ridley Burgers&quot;)]</tw-passagedata><tw-passagedata pid="350" name="Ridley Burgers" tags="GAME-OVER" position="4150,3125" size="100,100">The Wave Beam attack fails, and I take damage when I meet Ridley’s flame attack head-on. There is no way I can beat him.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="351" name="Wave Beam Hits Ridley 1" tags="" position="4300,2900" size="100,100">The Wave Beam damages Ridley. He is howling in pain. If I can damage him three more times, I can beat him. 



Continue with the next attack  (click: &quot;Continue with the next attack  &quot;)[(replace: &quot;attack  &quot;)[attack](replace: &quot;Run  &quot;)[]&lt;hr&gt;(display: &quot;Ridley Wave Beam 2&quot;)]</tw-passagedata><tw-passagedata pid="352" name="Wave Beam Hits Ridley 2" tags="" position="4600,2900" size="100,100">I continue the attack with the Wave Beam. I deal damage to Ridley. If I can damage him two more times, I can defeat him.



Again, I continue to attack with the Wave Beam.  (click: &quot;Again, I continue to attack with the Wave Beam.  &quot;)[(replace: &quot;Wave Beam.  &quot;)[Wave Beam.]&lt;hr&gt;(display: &quot;Ridley Wave Beam 3&quot;)]</tw-passagedata><tw-passagedata pid="353" name="Wave Beam Misses Ridley 2" tags="" position="4600,3050" size="100,100">The Wave Beam attack fails. I am pushed down by Ridley’s attack. Again, his flames reach me, and I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(if: $energy &gt; 0)[Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam]&lt;hr&gt;(display: &quot;Ridley Wave Beam 2&quot;)]](else:)[(display: &quot;Ridley Burgers&quot;)]</tw-passagedata><tw-passagedata pid="354" name="Wave Beam Hits Ridley 3" tags="" position="4900,2900" size="100,100">I relentlessly attack with the Wave Beam! Ridley is groaning in pain. If I can damage him one more time, I can defeat him. 



Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam](replace: &quot;Run  &quot;)[]&lt;hr&gt;(display: &quot;Ridley Wave Beam 4&quot;)]</tw-passagedata><tw-passagedata pid="355" name="Wave Beam Misses Ridley 3" tags="" position="4900,3050" size="100,100">My Wave Beam attack fails. Ridley’s attack is more powerful than I expect. Again, his flame attack hits me. I absorb the damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(if: $energy &gt; 0)[Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam](replace: &quot;Run  &quot;)[]&lt;hr&gt;(display: &quot;Ridley Wave Beam 3&quot;)]](else:)[(display: &quot;Ridley Burgers&quot;)]</tw-passagedata><tw-passagedata pid="356" name="Ridley Wave Beam 4" tags="" position="5050,2975" size="100,100">Ridley has already become thoroughly weak. I attack him with the Wave Beam.



{

	(set: $random to (random: 1,6))

	(if: $random is 3)[(display: &quot;Ridley Destroyed Wave Beam&quot;)]

	(else:)[(display: &quot;Wave Beam Misses Ridley 4&quot;)]

}</tw-passagedata><tw-passagedata pid="357" name="Ridley Destroyed Wave Beam" tags="" position="5200,2900" size="100,100">Ridley has been severely weakened. The Wave Beam strikes him again. At last, his final moment has come. When the last attack hits, Ridley is enveloped in white light. [[Then, there is a brief but brilliant explosion.-&gt;Ridley Defeated]]</tw-passagedata><tw-passagedata pid="358" name="Wave Beam Misses Ridley 4" tags="" position="5200,3050" size="100,100">The Wave Beam attack fails. I shrink back from Ridley’s flame attack. Again, his attack reaches me, and I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-5 Energy)](set: $energy to $energy - 5)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(if: $energy &gt; 0)[Wave Beam  (click: &quot;Wave Beam  &quot;)[(replace: &quot;Wave Beam  &quot;)[Wave Beam](replace: &quot;Run  &quot;)[]&lt;hr&gt;(display: &quot;Ridley Wave Beam 4&quot;)]](else:)[(display: &quot;Ridley Burgers&quot;)]</tw-passagedata><tw-passagedata pid="359" name="Escape Multiviola Ice Beam" tags="" position="4000,1550" size="100,100">I&#39;ll be fine if I can freeze the Multiviola with the Ice Beam, but...



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Escape Multiviola Ice&quot;)]

	(else:)[(display: &quot;Escape Frozen Multiviola&quot;)]

}</tw-passagedata><tw-passagedata pid="360" name="Fight Ridley Later" tags="" position="1950,1000" size="100,100">Given my current equipment, I conclude I am no match for Ridley. For now, I [[go back South-&gt;64]] and will challenge him again after preparing my equipment.</tw-passagedata><tw-passagedata pid="361" name="80" tags="" position="300,3000" size="100,100">###Room C-80: Tourian, Elevator Room

{

	(set: $displayStats to 1)

	(set: $startRoom to &quot;80&quot;, $location to &quot;Tourian&quot;)

  	(link:&quot;Save game?&quot;)[

  	(if:(save-game:&quot;Slot A&quot;))[

    	Game saved!

  		]	

	(else: )[

    	Sorry, I couldn&#39;t save your game.

  		]

]}



I can go up to Area A, Brinstar. Aside from that, the room only continues East.



[[Ascend-&gt;11]]

[[Go East-&gt;81]]</tw-passagedata><tw-passagedata pid="362" name="81" tags="Red-Door" position="450,3000" size="100,100">###Room C-81

From this room, there is only the Elevator Room to the West and a Yellow Door facing North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Metroid&quot;)]](else:)[(set: $combat to 1)(if: $yd1 is 1)[The door is already destroyed, so I keep moving through the rooms. [[Go West-&gt;80]] or [[go North.-&gt;82]]](else-if: $missiles &gt; 3)[Blast open the door  (click: &quot;Blast open the door  &quot;)[(display: &quot;Open Yellow Door 1&quot;)]](else:)[I will need at least 4 Missiles to open the Yellow Door. [[I can only go back West to the Elevator Room.-&gt;80]]]]</tw-passagedata><tw-passagedata pid="363" name="82" tags="" position="450,2850" size="100,100">###Room C-82

From this point, the room continues to the North, and there is a destroyed Yellow Door to the South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rinka&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;83]]

[[Go South-&gt;81]]]</tw-passagedata><tw-passagedata pid="364" name="83" tags="Red-Door" position="450,2700" size="100,100">###Room C-83

North is a Red Door. To the South is a corridor.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Metroid B&quot;)]](else:)[(set: $combat to 1)(if: $rd1 is 1)[The Red Door is already open, so I can either [[Go North-&gt;84]] or [[go South.-&gt;82]]](else-if: $missiles &gt; 1)[Blast open the Red Door  (click: &quot;Blast open the Red Door  &quot;)[&lt;hr&gt;(display: &quot;Open Red Door 1&quot;)]](else:)[I&#39;ll need at least 2 Missiles to open this door. [[Go back South-&gt;82]]]]</tw-passagedata><tw-passagedata pid="365" name="84" tags="" position="450,2550" size="100,100">###Room C-84

In this room, there is a destroyed Red Door facing South, and the room continues to the East.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Metroid B&quot;)]](else:)[(set: $combat to 1)[[Go East-&gt;85]]

[[Go South-&gt;83]]]</tw-passagedata><tw-passagedata pid="366" name="85" tags="" position="600,2550" size="100,100">###Room C-85

This room continues West, and there is a Blue Door to the South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Rinka&quot;)]](else:)[(set: $combat to 1)[[Go West-&gt;84]]

[[Go South-&gt;86]]]</tw-passagedata><tw-passagedata pid="367" name="86" tags="" position="600,2700" size="100,100">###Room C-86

This room continues East, and there is a Blue Door to the North.



(if: $combat is 1)[[[Fight-&gt;Rinka]]](else:)[(set: $combat to 1)[[Go North-&gt;85]]

[[Go East-&gt;87]]]</tw-passagedata><tw-passagedata pid="368" name="87" tags="" position="750,2700" size="100,100">###Room C-87

This deliberately confusing room is full of twists and turns. This room continues West, and there is a Blue Door to the North.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Metroid B&quot;)]](else:)[(set: $combat to 1)[[Go North-&gt;88]]

[[Go West-&gt;86]]]</tw-passagedata><tw-passagedata pid="369" name="88" tags="Red-Door" position="750,2550" size="100,100">###Room C-88

There is a Red Door to the North. To the South is an ordinary Blue Door.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Metroid B&quot;)]](else:)[(set: $combat to 1)(if: $rd2 is 1)[The Red Door is already destroyed, so I can either [[go back South-&gt;87]] or [[go North.-&gt;89]]](else-if: $missiles &gt; 1)[Blast open the Red Door.  (click: &quot;Blast open the Red Door.  &quot;)[(display: &quot;Open Red Door 2&quot;)]](else:)[I&#39;ll need at least 2 Missiles to open this door. [[Go back South.-&gt;87]]]]</tw-passagedata><tw-passagedata pid="370" name="89" tags="" position="750,2400" size="100,100">###Room C-89

To the South are the remains of a collapsed Red Door. Beyond that, the room only continues to the East.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Metroid B&quot;)]](else:)[(set: $combat to 1)[[Go East-&gt;90]]

[[Go South-&gt;88]]]</tw-passagedata><tw-passagedata pid="371" name="90" tags="Red-Door" position="900,2400" size="100,100">###Room C-90

The room continues West, and there is a Red Door facing South.



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Metroid B&quot;)]](else:)[(set: $combat to 1)(if: $rd3 is 1)[The Red Door is already destroyed, so I can either [[go back West-&gt;89]] or [[go South.-&gt;91]]](else-if: $missiles &gt; 1)[Blast open the Red Door.  (click: &quot;Blast open the Red Door.&quot;)[(display: &quot;Open Red Door 3&quot;)]](else:)[I&#39;ll need at least 2 Missiles to open this door. [[I can only go back West.-&gt;89]]]]</tw-passagedata><tw-passagedata pid="372" name="91" tags="Red-Door" position="900,2550" size="100,100">###Room C-91

This room contains Red Doors to both the North and South. Of course, if the door facing North isn’t destroyed yet, it is impossible for me to have entered this room...



(if: $combat is 1)[Fight  (click: &quot;Fight  &quot;)[(go-to: &quot;Metroid B&quot;)]](else:)[(set: $combat to 1)(if: $rd4 is 1)[The Red Door is already destroyed, so I can either [[go back North-&gt;90]] or [[go South.-&gt;92]]](else-if: $missiles &gt; 1)[Blast open the Red Door.  (click: &quot;Blast open the Red Door.  &quot;)[(display: &quot;Open Red Door 4&quot;)]](else:)[I&#39;ll need at least 2 Missiles to open this door. [[Go back North.-&gt;90]]]]</tw-passagedata><tw-passagedata pid="373" name="92" tags="" position="900,2700" size="100,100">###Room C-92: Zebetite Room I

I have entered Mother Brain&#39;s Lair at the heart of Tourian. This chamber is filled with snaking cables, machines, and other equipment. Gun turrets are mounted on the ceiling. Only three chambers separate me from my goal. However, each room is blocked by a Zebetite that must be destroyed before I can proceed. This is the first Zebetite Room.



(if: $Zebetite1 is 0)[Fight the Zebetite  (click: &quot;Fight the Zebetite  &quot;)[(go-to: &quot;Zebetite&quot;)]&lt;br&gt;[[Go back North-&gt;91]]](else:)[This Zebetite has been destroyed. Gelatinous blobs of Mother Brain&#39;s life fluid ooze across the floor.



[[Go back North-&gt;91]]

[[Head South-&gt;93]]]

(set: $combat to 1)</tw-passagedata><tw-passagedata pid="374" name="93" tags="" position="900,2850" size="100,100">###Room C-93: Zebetite Room II

I leave the shattered remains of the Zebetite behind. Glass crunches under my boots. This next chamber is pierced by several more gun turrets and the thick coils of Mother Brain&#39;s life-support system.



(if: $Zebetite2 is 0)[Fight the Zebetite  (click: &quot;Fight the Zebetite  &quot;)[(go-to: &quot;Zebetite&quot;)]](else:)[The Zebetite has been destroyed. Nothing remains but shattered glass and blood-red gel.



[[Go back North-&gt;92]]

[[Go South to the next room-&gt;94]]]</tw-passagedata><tw-passagedata pid="375" name="94" tags="" position="900,3000" size="100,100">###Room C-94: Zebetite Room III

This is the final Zebetite chamber before Mother Brain. This appears to be some sort of auxilliary control chamber. Countless lights blink on the mechanical walls, displaying information about the entirety of Zebes and the vital stats of Mother Brain. My ultimate goal lies in the next room.



(if: $Zebetite3 is 0)[Fight the Zebetite  (click: &quot;Fight the Zebetite  &quot;)[(go-to: &quot;Zebetite&quot;)]&lt;br&gt;[[Go back North-&gt;93]]](else:)[The Zebetite has been destroyed in a shower of gelatinous debris. I can see Mother Brain through the jagged glass.



[[Go back North-&gt;93]]

[[Proceed to Mother Brain’s Room-&gt;95]]]</tw-passagedata><tw-passagedata pid="376" name="95" tags="" position="900,3150" size="100,100">###Room C-95: Mother Brain&#39;s Room

I hear the voice of the Command Computer:



“This is Mother Brain’s Room. In the next chamber, about ten meters ahead, is Mother Brain, the central computer of the asteroid Zebes.”



Before me is the figure of the Mother Brain. She is an enormous and grotesque dark red brain. The brain has a height of three meters. It towers over the surrounding moat filled with a thick, blood-like fluid. This moat will not be easy to get out of if I were to fall in. To put it bluntly, I would be trapped.



“No weapons except Missiles will work against Mother Brain. If you currently have only a small quantity of Missiles, it would be wise to come back after refilling your Missiles and Energy.”



Should I fight with my current equipment, or try again later?



[[Fight-&gt;Mother Brain]]

[[Try again later-&gt;Fight Mother Brain Later]]</tw-passagedata><tw-passagedata pid="377" name="Fight Mother Brain Later" tags="" position="750,3075" size="100,100">I&#39;ll try again later after replenishing my Missiles and Energy. [[Go back North.-&gt;94]]</tw-passagedata><tw-passagedata pid="378" name="Open Yellow Door 1" tags="" position="324,2775" size="100,100">I launch Missiles into the Yellow Door. One, two, three… The fourth Missile explodes, and with a loud &lt;i&gt;&lt;b&gt;(text-style: &quot;rumble&quot;)[BOOM]&lt;/i&gt;&lt;/b&gt;, the door opens up to enormous black hole.(set: $missiles to it - 4)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](set: $yd1 to 1) ((text-color: &quot;red&quot;)[-4 Missiles])



[[I proceed to the next room, &lt;b&gt;C-82&lt;/b&gt;.-&gt;82]]</tw-passagedata><tw-passagedata pid="379" name="Open Red Door 1" tags="" position="325,2625" size="100,100">I fire Missiles at the door. When I drive 2 shots into it, the door crumbles down. ((text-color: &quot;red&quot;)[-2 Missiles])(set: $missiles to it - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](set: $rd1 to 1)



I can now proceed North to &lt;b&gt;Room C-84&lt;/b&gt;, or else go back South to &lt;b&gt;Room C-82&lt;/b&gt;.



[[Go North-&gt;84]]

[[Return South-&gt;82]]</tw-passagedata><tw-passagedata pid="380" name="Open Red Door 2" tags="" position="625,2425" size="100,100">I fire Missiles into the Red Door on the North side of the room. When 2 Missiles explode into the door, it can no longer bear the force, and a large hole crumbles open. ((text-color: &quot;red&quot;)[-2 Missiles])(set: $missiles to it - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](set: $rd2 to 1)



Reviewing my current amounts of Energy and Missiles, should I keep moving forward? Or is it better to pull back and stock up?



[[Keep going to the next room-&gt;89]]

[[Pull back for now-&gt;87]]</tw-passagedata><tw-passagedata pid="381" name="Open Red Door 3" tags="" position="1050,2475" size="100,100">



I fire a Missile at the Red Door on the South side of the room. This Red Door is the same as all previous ones, and is reduced to rubble with 2 Missiles. ((text-color: &quot;red&quot;)[-2 Missiles])(set: $missiles to it - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](set: $rd3 to 1)



[[To head to the next room, go South-&gt;91]]

[[To pull back for now, go back West-&gt;89]]</tw-passagedata><tw-passagedata pid="382" name="Open Red Door 4" tags="" position="1025,2625" size="100,100">I fire Missiles into this door, too. As usual, when I fire 2 Missiles into it, the door explodes, opening up a large hole. Somehow, this door&#39;s wreckage resembles the gaping maw of some foul beast. ((text-color: &quot;red&quot;)[-2 Missiles])(set: $missiles to it - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](set: $rd4 to 1)



Should I move forward with my current equipment? Or is it better to turn back temporarily and fill up my Missiles?



[[Move forward-&gt;92]]

[[Turn back-&gt;90]]</tw-passagedata><tw-passagedata pid="383" name="Metroid" tags="" position="100,3600" size="100,100">(set: $displayMap to 0)A Metroid attack! This Metroid seems to have been reproduced from the capsule the Pirates captured. There is hardly any way to defeat it—but one method does exist.



{

	(if: $items contains &quot;Ice Beam&quot;)

		[Fire Ice Beam(click: &quot;Fire Ice Beam&quot;)

			[(replace: &quot;Beam  &quot;)[Beam]&lt;hr&gt;

			(set: $random to (random: 1,3))

			(if: $random is 2)[(display: &quot;Ice Beam Misses Metroid&quot;)]

			(else:)[(display: &quot;Ice Beam Hits Metroid&quot;)]]]

	(else-if: $missiles &gt; 3)

		[I don&#39;t have the right equipment. I try to escape. 

		(click: &quot;I try to escape.&quot;)

			[&lt;hr&gt;(display: &quot;Metroid No Ice Beam&quot;)]]

	(else:)

		[I need more Missiles to escape the Metroid.  

		(click: &quot;I need more Missiles to escape the Metroid.&quot;)

			[&lt;hr&gt;(display: &quot;Metroid Lunch&quot;)]]

}</tw-passagedata><tw-passagedata pid="384" name="Rinka" tags="" position="100,3975" size="100,100">(set: $displayMap to 0)It’s a Rinka. As inorganic attack matter, it only targets and flies at me. Its attack power isn’t that great, either. However, it&#39;s best to avoid them.(click: &quot;However, it&#39;s best to avoid them.&quot;)[

{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Freeze Rinka&quot;)]

	(else:)[(display: &quot;Miss Rinka&quot;)]

}]</tw-passagedata><tw-passagedata pid="385" name="Metroid B" tags="" position="100,3750" size="100,100">(set: $displayMap to 0)A Metroid attack! It swoops down on me without warning. 



I fire the Ice Beam without a moment’s hesitation.(click: &quot;I fire the Ice Beam without a moment’s hesitation.&quot;)[



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Ice Beam Misses Metroid&quot;)]

	(else:)[(display: &quot;Ice Beam Hits Metroid&quot;)]

}]</tw-passagedata><tw-passagedata pid="386" name="Zebetite" tags="" position="100,4175" size="100,100">&lt;img src=./images/Zebetite.jpg&gt;



(set: $displayMap to 0)Ahead of me is a Zebetite, Mother Brain’s life-support system. I can&#39;t use anything except Missiles to attack this device.



(if: $missiles &gt; 0)[Destroy it  (click: &quot;Destroy it  &quot;)[(replace: &quot;Try again later  &quot;)[]&lt;hr&gt;(display: &quot;Missile Zebetite 1&quot;)]]

Try again later  (click: &quot;Try again later  &quot;)[(replace: &quot;Destroy it  &quot;)[]&lt;hr&gt;(display: &quot;Escape Zebetite&quot;)]</tw-passagedata><tw-passagedata pid="387" name="Mother Brain" tags="" position="100,4500" size="100,100">(if: $displayPic is 0)[&lt;img src=./images/MotherBrain.jpg&gt; (set: $displayPic to 1)]



(set: $displayMap to 0)I fire a Missile into the Mother Brain’s enormous frontal lobe. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



Mother Brain takes damage. (set: $MotherBrainHealth to it - 1)(if: $MotherBrainHealth &lt; 1)[(display: &quot;Mother Brain Destroyed&quot;)](else:)[Mother Brain raises a howl. ROAR! Her cry blows violently like a storm out of hell. Simultaneously, snake-like heads appear with a flash from a cluster of what look like self-repair systems, and in the blink of an eye, laser beams flare up.



It is Mother Brain’s attack.



Dodge  (click: &quot;Dodge  &quot;)[(replace: &quot;Dodge  &quot;)[Dodge]&lt;hr&gt;

{

	(if: $items contains &quot;Screw Attack&quot;)[(display: &quot;Screw Attack Mother Brain&quot;)]

	(else:)[

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Freeze Guns&quot;)]

	(else:)[(display: &quot;Hit by Guns&quot;)]]

}]]</tw-passagedata><tw-passagedata pid="388" name="Metroid No Ice Beam" tags="" position="250,3825" size="100,100">I need the Ice Beam to defeat a Metroid. It grabs hold of me and sucks my Energy. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



If I can&#39;t escape...  (click: &quot;If I can&#39;t escape...  &quot;)[(replace: &quot;...  &quot;)[...]&lt;hr&gt;

{

	(set: $random to (random: 1,6))

	(if: $random is 3)[(display: &quot;Escape to Elevator&quot;)]

	(else:)[(display: &quot;Metroid No Ice Fails 1&quot;)]

}]]</tw-passagedata><tw-passagedata pid="389" name="Ice Beam Misses Metroid" tags="" position="250,3675" size="100,100">&lt;img src=./images/MetroidTrapped.jpg&gt;



The Ice Beam fails. I miss. In the next moment, the Metroid envelops me. It has latched on. It extends its freakish tentacles and starts sucking away my energy. The damage is great. If I can’t escape... (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;(display: &quot;Metroid Lunch&quot;)](else:)[



{

	Blast my way out.(click: &quot;Blast my way out.&quot;)[(replace: &quot;out.  &quot;)[out.]&lt;hr&gt;

		(set: $random to (random: 1,2))

		(if: $random is 1)[(display: &quot;Escape Metroid Grip&quot;)]

		(else:)[(display: &quot;Metroid Escape Fails 1&quot;)]]

}]</tw-passagedata><tw-passagedata pid="390" name="Ice Beam Hits Metroid" tags="" position="250,3525" size="100,100">&lt;img src=./images/MetroidFrozen.jpg&gt;



The Ice Beam’s aim finds its mark. With a single shot, the Metroid is frozen. Well...I can move around the room, or...



Since I know how to destroy Metroids, I can blast it with 4 Missiles.



(if: $missiles &gt; 3)[Fire Missiles  (click: &quot;Fire Missiles  &quot;)[(replace: &quot;Run  &quot;)[]&lt;hr&gt;(display: &quot;Metroid Destroyed&quot;)]&lt;br&gt;Run  (click: &quot;Run  &quot;)[(replace: &quot;Fire Missiles  &quot;)[]&lt;hr&gt;(display: &quot;Escape Metroid&quot;)]](else:)[Not Enough Missiles  (click: &quot;Not Enough Missiles  &quot;)[&lt;hr&gt;(display: &quot;Escape Metroid&quot;)]]	</tw-passagedata><tw-passagedata pid="391" name="Metroid Destroyed" tags="" position="400,3525" size="100,100">I fire a series of Missiles into the still-frozen Metroid. Ordinarily, Metroids have the ability to instantly recover from attacks from Missiles and other weapons, but they don’t have this ability while frozen. I finish it off with 4 Missiles. (text-color: red)[(-4 Missiles)](set: $missiles to $missiles - 4)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Metroid Energy&quot;)]

	(else:)[(display: &quot;Metroid Missiles&quot;)]

}</tw-passagedata><tw-passagedata pid="392" name="Metroid Energy" tags="Combat-Ended" position="550,3525" size="100,100">An Energy Ball appears in the Metroid&#39;s blasted remains. And, it’s quite large. (text-color: yellow)[(+15 Energy)](set: $energy to $energy + 15)(if: $energy &gt; $maxEnergy)[(set: $energy to $maxEnergy)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]



(link:&quot;Now I can move around the room.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="393" name="Metroid Missiles" tags="Combat-Ended" position="700,3525" size="100,100">Missiles are left behind in the shattered remains of the Metroid. (text-color: red)[(+10 Missiles)](set: $missiles to $missiles + 10)(if: $missiles &gt; $maxMissiles)[(set: $missiles to $maxMissiles)](replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



(link:&quot;Now I can move around the room.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="394" name="Escape Metroid" tags="Combat-Ended" position="550,3825" size="100,100">Leaving the Metroid frozen, I can move about the room. However, if I don&#39;t get out before the Metroid thaws...



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="395" name="Escape Metroid Grip" tags="" position="701,3675" size="100,100">Still ensnared by the Metroid, I lay a series of Bombs. One, two... When I drop the fourth Bomb, the grip of its tentacles loosens.



I use this chance to slip away from the Metroid’s grasp. Simultaneously, I turn around and blindly fire the Ice Beam. The Metroid is frozen.



I know how to destroy Metroids, but I&#39;ll need at least 4 Missiles...



(if: $missiles &gt; 3)[Fire Missiles  (click: &quot;Fire Missiles  &quot;)[(replace: &quot;Run  &quot;)[]&lt;hr&gt;(display: &quot;Metroid Destroyed&quot;)]&lt;br&gt;Run  (click: &quot;Run  &quot;)[(replace: &quot;Fire Missiles  &quot;)[]&lt;hr&gt;(display: &quot;Escape Metroid&quot;)]](else:)[Not enough Missiles.  (click: &quot;Not enough Missiles&quot;)[&lt;hr&gt;(display: &quot;Escape Metroid&quot;)]]</tw-passagedata><tw-passagedata pid="396" name="Metroid Escape Fails 1" tags="" position="400,3675" size="100,100">My Bombs miss their mark, and I fail to escape. Again my energy is sucked away. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;(display: &quot;Metroid Lunch&quot;)](else:)[



I struggle to escape again...  (click: &quot;I struggle to escape again...  &quot;)[(replace: &quot;...  &quot;)[...]&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Metroid Escape Fails 2&quot;)]

	(else:)[(display: &quot;Escape Metroid Grip&quot;)]

}]]</tw-passagedata><tw-passagedata pid="397" name="Metroid Escape Fails 2" tags="" position="550,3675" size="100,100">My Bombs miss their mark. Once again I fail to escape. Again my energy is sucked away. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;(display: &quot;Metroid Lunch&quot;)](else:)[



I struggle to escape again...  (click: &quot;I struggle to escape again...  &quot;)[(replace: &quot;...  &quot;)[...]&lt;hr&gt;

{

	(set: $random to (random: 1,6))

	(if: $random is 6)[(display: &quot;Metroid Escape Fails 1&quot;)]

	(else:)[(display: &quot;Escape Metroid Grip&quot;)]

}]]</tw-passagedata><tw-passagedata pid="398" name="Escape to Elevator" tags="" position="400,3825" size="100,100">I somehow manage to fire Missiles into the Metroid. (text-color: red)[(-2 Missiles)](set: $missiles to $missiles - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



At last, it takes damage and loosens the tentacles grabbing me. Not overlooking this chance, I successfully escape. Now I run away.



The Ice Beam seems to be in a hidden room. My records confirm there are two of them.



[[At any rate, I quickly board the elevator ascending to Brinstar.-&gt;11]]</tw-passagedata><tw-passagedata pid="399" name="Freeze Rinka" tags="Combat-Ended" position="249,3973" size="100,100">

I freeze the Rinka with the Ice Beam. I can avoid it. I don&#39;t take any damage either and pass through.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="400" name="Miss Rinka" tags="Combat-Ended" position="400,3975" size="100,100">

I miss with the Ice Beam and am zapped by the Rinka. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)]](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="401" name="Escape Zebetite" tags="Combat-Ended" position="250,4275" size="100,100">I can’t proceed to the next room unless I&#39;ve destroyed the Zebetite.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="402" name="Missile Zebetite 1" tags="" position="250,4125" size="100,100">I fire a Missile at the Zebetite. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



The guns installed about the room fire all at once. Can I avoid them?!



Dodge Guns  (click: &quot;Dodge Guns  &quot;)[(replace: &quot;Guns  &quot;)[Guns]&lt;hr&gt;

{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Missed Zebetite 1&quot;)]

	(else:)[(display: &quot;Missile Zebetite 2&quot;)]

}]</tw-passagedata><tw-passagedata pid="403" name="Missed Zebetite 1" tags="" position="400,4275" size="100,100">I fail to avoid the attack. The guns hit me and send me flying back. I take damage.(if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



While I was absorbing this damage, the Zebetite recovered from my previous attack. Should I attack it again, or else try later after refilling my Missiles and Energy?



(if: $missiles &gt; 0)[Attack once more  (click: &quot;Attack once more  &quot;)[(replace: &quot;more  &quot;)[more](replace: &quot;Try again later  &quot;)[]&lt;hr&gt;(display: &quot;Missile Zebetite 1&quot;)]]

Try again later  (click: &quot;Try again later  &quot;)[(replace: &quot;Attack once more  &quot;)[]&lt;hr&gt;(display: &quot;Escape Zebetite&quot;)]]</tw-passagedata><tw-passagedata pid="404" name="Missile Zebetite 2" tags="" position="400,4125" size="100,100">I avoid the attack and fire a Missile at the Zebetite, damaging it a second time. (text-color: red)[(-1 Missile)](set: $missiles to $missiles - 1)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]



The guns fire again.



Dodge Guns  (click: &quot;Dodge Guns  &quot;)[(replace: &quot;Guns  &quot;)[Guns]&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Zebetite Destroyed&quot;)]

	(else:)[(display: &quot;Missed Zebetite 2&quot;)]

}]</tw-passagedata><tw-passagedata pid="405" name="Zebetite Destroyed" tags="Combat-Ended" position="550,4124" size="100,100">I avoid the attack and fire a Missile. The Zebetite takes a third blow. Then, a flash runs through the middle of the its tube of transparent glass, and in the next instant, the Zebetite crumbles down with a loud &lt;i&gt;(text-style: &quot;rumble&quot;)[BOOM!]&lt;/i&gt;



I can proceed to the next room.



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)(set: $displayMap to 1, $combat to 1)]

{

	(if: (history:)&#39;s last is &quot;92&quot;)[(set: $Zebetite1 to 1)]

	(if: (history:)&#39;s last is &quot;93&quot;)[(set: $Zebetite2 to 1)]

	(if: (history:)&#39;s last is &quot;94&quot;)[(set: $Zebetite3 to 1)]

}</tw-passagedata><tw-passagedata pid="406" name="Missed Zebetite 2" tags="" position="550,4275" size="100,100">I fail to avoid the guns’ attacks. The recoil sends me flying back.(if: $items contains &quot;Varia&quot;)[(text-color: red)[(-2 Energy)](set: $energy to $energy - 2)](else:)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



When I absorb this attack, the Zebetite also recovers from my second attack. Should I fighting? Or else try again later and refill my Energy and Missiles?



(if: $missiles &gt; 0)[Keep fighting  (click: &quot;Keep fighting  &quot;)[(replace: &quot;Pull back  &quot;)[](replace: &quot;fighting  &quot;)[fighting]&lt;hr&gt;(display: &quot;Missile Zebetite 2&quot;)]]

Pull back  (click: &quot;Pull back  &quot;)[(replace: &quot;Keep fighting  &quot;)[]&lt;hr&gt;(display: &quot;Escape Zebetite&quot;)]]</tw-passagedata><tw-passagedata pid="407" name="Screw Attack Mother Brain" tags="" position="250,4425" size="100,100">The Screw Attack has an ability similar to the Varia. Can I avoid Mother Brain’s attack? 



{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Hit by Guns&quot;)]

	(else:)[(display: &quot;Freeze Guns&quot;)]

}</tw-passagedata><tw-passagedata pid="408" name="Hit by Guns" tags="" position="250,4575" size="100,100">I can’t avoid Mother Brain’s attack. The aim of the snake-like laser guns is dead-on. Their muzzles twinkle, and the moment they flash, my body takes the laser blast.



Since the lasers don’t have high output, one or two shots won&#39;t be a fatal wound, but I still take considerable damage from them. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-8 Energy)](set: $energy to $energy - 8)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



I attempt to regain my balance.  (click: &quot;I attempt to regain my balance.  &quot;)[(replace: &quot;balance.  &quot;)[balance.]&lt;hr&gt;

{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Recover Balance&quot;)]

	(else:)[(display: &quot;Fall into Moat&quot;)]

}]]</tw-passagedata><tw-passagedata pid="409" name="Recover Balance" tags="" position="400,4575" size="100,100">When I absorb Mother Brain’s attack, I stumble for a moment, and it seems as if I will fall into the moat. But I somehow manage to remain standing.



Should I continue the attack? Or else, try again later after refilling my Missiles and Energy?



(if: $missiles &gt; 0)[Continue the attack  (click: &quot;Continue the attack  &quot;)[(replace: &quot;attack  &quot;)[attack](replace: &quot;Try again later  &quot;)[]&lt;hr&gt;(display: &quot;Mother Brain&quot;)]]

Try again later  (click: &quot;Try again later  &quot;)[(replace: &quot;Continue the attack  &quot;)[]&lt;hr&gt;(display: &quot;Escape Mother Brain&quot;)]</tw-passagedata><tw-passagedata pid="410" name="Escape Mother Brain" tags="Combat-Ended" position="550,4575" size="100,100">I temporarily go back North, and will try yet again after stocking up on Energy and Missiles. However, the amount of damage Mother Brain has taken so far will also be fully recovered the next time I arrive.(set: $MotherBrainHealth to 10)



[[Go North to &lt;b&gt;Room C-94&lt;/b&gt;-&gt;94]](set: $displayMap to 1)</tw-passagedata><tw-passagedata pid="411" name="Attempt to Dodge Guns" tags="" position="400,4425" size="100,100">Can I avoid Mother Brain’s attack?  (click: &quot;Can I avoid Mother Brain’s attack?  &quot;)[(replace: &quot;attack?  &quot;)[attack?]&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Freeze Guns&quot;)]

	(else:)[(display: &quot;Hit by Guns&quot;)]

}]</tw-passagedata><tw-passagedata pid="412" name="Freeze Guns" tags="" position="550,4425" size="100,100">The narrow snake-necked guns fire their laser beams at me. The attack is extremely accurate, but incredibly easy to predict.



I freeze the cannons with the Ice Beam. However, they instantly thaw.



I can keep fighting so long as my Missiles last.



(if: $missiles &gt; 0)[Continue the attack  (click: &quot;Continue the attack  &quot;)[(replace: &quot;attack  &quot;)[attack](replace: &quot;Try again later  &quot;)[]&lt;hr&gt;(display: &quot;Mother Brain&quot;)]]

Try again later  (click: &quot;Try again later  &quot;)[(replace: &quot;Continue the attack  &quot;)[]&lt;hr&gt;(display: &quot;Escape Mother Brain&quot;)]</tw-passagedata><tw-passagedata pid="413" name="Fall into Moat" tags="" position="250,4725" size="100,100">The moment Mother Brain’s attack hits, I pitch forward and fall into the moat completely surrounding her. The red liquid that fills the moat isn’t blood, but an electrolytic fluid with energy-absorbing properties. While I am submerged in this liquid, my Energy drains drastically. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-8 Energy)](set: $energy to $energy - 8)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(if: $energy &gt; 19)[Freeze the electrolytes.  (click: &quot;Freeze the electrolytes.  &quot;)[(replace: &quot;electrolytes.  &quot;)[electrolytes.]&lt;hr&gt;(display: &quot;Escape Moat&quot;)]](else:)[Attempt to escape the moat.  (click: &quot;Attempt to escape the moat.  &quot;)[(replace: &quot;moat.  &quot;)[moat.]&lt;hr&gt;(display: &quot;Attempt to Escape Moat&quot;)]]]</tw-passagedata><tw-passagedata pid="414" name="Escape Moat" tags="" position="550,4725" size="100,100">My Ice Beam freezes the liquid’s electrolytes, creating a platform I can stand on.  With that, I escape the moat. No sooner have I escaped then the platform thaws into electrolytic fluid, once again transforming into an eerie trap.



Given my current condition, should I continue to attack the Mother Brain or go back temporarily and refill my Missiles and Energy to try again later?



(if: $missiles &gt; 0)[Fight as is  (click: &quot;Fight as is  &quot;)[(replace: &quot;is  &quot;)[is](replace: &quot;Try again later  &quot;)[]&lt;hr&gt;(display: &quot;Mother Brain&quot;)]]

Try again later  (click: &quot;Try again later  &quot;)[(replace: &quot;Continue the attack  &quot;)[]&lt;hr&gt;(display: &quot;Escape Mother Brain&quot;)]</tw-passagedata><tw-passagedata pid="415" name="Attempt to Escape Moat" tags="" position="400,4725" size="100,100">The moat is very deep, so I can&#39;t get out easily. I think I can jump out of the moat, but I can&#39;t quite reach the edge. I take massive damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-8 Energy)](set: $energy to $energy - 8)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



I struggle to escape again.  (click: &quot;I struggle to escape again.  &quot;)[(replace: &quot;again.  &quot;)[again.]&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Dissolved in Acid&quot;)]

	(else:)[(display: &quot;Escape Moat&quot;)]

}]]</tw-passagedata><tw-passagedata pid="416" name="Dissolved in Acid" tags="GAME-OVER" position="700,4725" size="100,100">However, my hopes of escaping the moat are dashed to bits. Mother Brain’s attack system, those accursed snake-like gun turrets, appear high above me. Instantly laser beams rain down in a torrent.



In the electrolytic fluid below, hopes of rescue are not even a million to one. My body is cut to Swiss cheese by the laser beams, making doubly sure I fall into the electrolytic moat. My flesh slowly disintegrates and is soon unable to hold a human form.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="417" name="Mother Brain Destroyed" tags="" position="700,4500" size="100,100">The dark red color of the outer portion of Mother Brain&#39;s cerebrum begins to transform, first bright red, then ashen, and finally black. The room’s lighting turns uncanny, and alarms began to blare.



“Mother Brain’s final moment is at hand,” says my Command Computer. Although it is just a machine, it murmurs with human-like emotion.



(text-style: &quot;rumble&quot;)[CRAAAAAASSSsssssshhhh!!!]



The entire asteroid shakes and large fissures spring forth. In the dying moments of Mother Brain, the center of the asteroid itself is caving in, as there is nothing there to control it.



(text-style: &quot;shudder&quot;)[GRRROOOOOoooaaannn!!!]



Mother Brain howls in the agony of death. Before long, the voltage slowly drops, and the howl slows, then fades away. [[Such are Mother Brain’s final moments.-&gt;Time Bomb Set]]</tw-passagedata><tw-passagedata pid="418" name="Tourian Test" tags="" position="80,2797" size="100,100">You can fight what you want here.



Metroid  (click: &quot;Metroid  &quot;)[(go-to: &quot;Metroid&quot;)]

Metroid B  (click: &quot;Metroid B  &quot;)[(go-to: &quot;Metroid B&quot;)]

Rinka  (click: &quot;Rinka  &quot;)[(go-to: &quot;Rinka&quot;)]

Zebetite  (click: &quot;Zebetite  &quot;)[(go-to: &quot;Zebetite&quot;)]

Mother Brain  (click: &quot;Mother Brain  &quot;)[(go-to: &quot;Mother Brain&quot;)]

[[80]]

[[91]]



Get Varia (click: &quot;Get Varia&quot;)[(set: $items to it + (a: &quot;Varia&quot;))(replace: ?Varia)[|Varia&gt;[Varia]]]



Get Normal Beam (click: &quot;Get Normal Beam&quot;)[(set: $items to it + (a: &quot;Normal Beam&quot;))(set: $items to it - (a: &quot;Ice Beam&quot;, &quot;Wave Beam&quot;)) --You got Normal Beam(replace: ?Beam)[|Beam&gt;[Normal Beam]]]

Get Ice Beam (click: &quot;Get Ice Beam&quot;)[(set: $items to it + (a: &quot;Ice Beam&quot;))(set: $items to it - (a: &quot;Normal Beam&quot;, &quot;Wave Beam&quot;)) --You got Ice Beam!(replace: ?Beam)[|Beam&gt;[Ice Beam]]]

Get Screw Attack (click: &quot;Get Screw Attack&quot;)[(set: $items to it + (a: &quot;Screw Attack&quot;))(replace: ?ScrewAttack)[|ScrewAttack&gt;[ScrewAttack]]]



Get Missiles (10) (click: &quot;Get Missiles (10)&quot;)[(set: $maxMissiles to it + 10, $missiles to it + 10)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]

Get Missiles (30)  (click: &quot;Get Missiles (30)&quot;)[(set: $maxMissiles to it + 30, $missiles to it + 30)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]]

Refill Missiles (click: &quot;Refill Missiles&quot;)[(set: $missiles to $maxMissiles)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]]

Lose All Missiles (click: &quot;Lose All Missiles&quot;)[(set: $missiles to 0)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]]]



Get Energy Tank (30)(click: &quot;Get Energy Tank (30)&quot;)[(set: $maxEnergy to it + 30, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]]]

Get Energy Tank (60)(click: &quot;Get Energy Tank (60)&quot;)[(set: $maxEnergy to it + 60, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](replace: ?SamusMaxEnergy)[|SamusMaxEnergy&gt;[$maxEnergy]]]

Refill Energy(click: &quot;Refill Energy&quot;)[(set: $energy to $maxEnergy, $energy to $maxEnergy)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]]

Dangerously Low (click: &quot;Dangerously Low&quot;)[(set: $energy to 1)(replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]]]



(set: $location to &quot;Tourian&quot;)</tw-passagedata><tw-passagedata pid="419" name="Time Bomb Set" tags="" position="2900,4500" size="100,100">==&gt;&lt;==

{

	&lt;i&gt;(text-color: &quot;yellow&quot;)[GAME SAVED]&lt;/i&gt;(save-game:&quot;Slot A&quot;)

	(set: $displayStats to 0)

	(set: $startRoom to &quot;Time Bomb Set&quot;)

	(set: $random to 1)

}



&lt;==

Suddenly, a nearby shrill alarm blares. It’s Mother Brain’s self-destruct sequence! Together with the alarm, the warning, “Three Minutes until Zebes Destruction,” broadcasts. I must escape this asteroid before it explodes!



Fortunately, I am saved the trouble of achieving my initial goal, finding the Metroid capsule. The capsule is hanging in a cluster of equipment behind Mother Brain. I collect the capsule. Currently, the Metroids here seem to have stopped reproducing as well.



Behind Mother Brain is a secret passage through which I can escape Zebes. However, it seems to have been used already, and is so damaged as to be rendered useless. (As for who used it, there should have been Pirates on this asteroid. Since the escape appears to have been made quite awhile ago, I estimate it was used about the same time as when the Pirates obtained the Metroid capsule. While they were glad to have acquired the capsule, perhaps the Pirates bred too many Metroids here and escaped the asteroid when it became uninhabitable.) There was probably a set of stairs here originally, but now only the remnants of the stairwell and support struts are left.



I must ascend to the top in time.



If I can make it to the top, I can escape through the secret passage I used when I snuck into Zebes.



However, I can&#39;t simply ascend. If I don&#39;t make full use of my advanced acrobatic skills, it will be difficult to ascend this escape route made of only the fragments of stairs and support struts.



Climb the shaft.(click: &quot;Climb the shaft.&quot;)[

{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(go-to: &quot;Lose Your Footing&quot;)]

	(else:)[(go-to: &quot;Escaped the Bomb!&quot;)]

}]</tw-passagedata><tw-passagedata pid="420" name="Lose Your Footing" tags="" position="3050,4500" size="100,100">I ascend the escape hatch. However, when I hang my foot on the remains of a narrow support strut, the platform crumbles. Instantly my hand gropes for another brace, but there&#39;s no resistance.



I fall. I&#39;m right back where I started. I make the ascent one more time.



However, time is slipping away. If I fail once more, there won’t be enough time to do it again...



Climb the shaft.(click: &quot;Climb the shaft.&quot;)[

{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(go-to: &quot;Escaped the Bomb!&quot;)]

	(else:)[(go-to: &quot;Failed to Escape&quot;)]

}]</tw-passagedata><tw-passagedata pid="421" name="Failed to Escape" tags="GAME-OVER" position="3050,4650" size="100,100">However, my second attempt fails tragically. In the end, it is impossible to climb this escape hatch again. Now, time is ticking away, and the moment of self-destruction draws near like the sound of giant footsteps.



&lt;i&gt;...KABOOM!&lt;/i&gt;



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="422" name="Escaped the Bomb!" tags="" position="2900,4350" size="100,100">&lt;img src=./images/EscapedZebes.jpg&gt;



I estimate I&#39;ve ascended about 50 meters up the escape hatch. I spy a path leading off to the side. The escape hatch continues upward, but I sense something is down this side path and I can make it through there. I proceed and am convinced I made the correct choice. I pass through and somehow come out into the room from which I initially infiltrated Zebes. Now that I&#39;m here, I should be able to escape quickly. There isn’t much time left.



I begin to move at once. I barely manage to reach to my tiny spaceship I had hidden upon first arriving on this asteroid and remove the camouflage covering it. I prime the engines and start them almost simultaneously. I take off from Zebes.



Ten seconds after liftoff, Zebes is engulfed in an enormous explosion. I escaped by just a hair’s breadth. Even at this distance, I feel the considerable force of the explosion. If I had delayed even a moment, it would have taken my life.



[[Now, the remaining question is what to do with the Metroid capsule...-&gt;An Unpleasant Discover]]</tw-passagedata><tw-passagedata pid="423" name="An Unpleasant Discover" tags="" position="2900,4200" size="100,100">&lt;img src=./images/MetroidMutant.jpg&gt;



I have to avoid subjecting the capsule to any unnecessary stress during transport, and it has been inside a small spacecraft. The capsule is extremely small. I placed it inside the cabin. I head there now.



However, what awaits inside comes as a complete shock.



Something is emerging from the capsule just as I enter the cabin. The capsule is a container no more than 50 cubic centimeters in size. However, when the Metroid comes out of the capsule, the figure that emerges is enormous, perhaps owing to some effect of the room.



However, this creature is different from the Metroids I&#39;ve seen before. Even among the Metroids, there are grotesque variants—mutants. I decide to call this creature the Metroid Mutant—and it has just crawled out of the capsule.



The Metroid Mutant notices me. It looks me over slowly, then its enormous bulk vanishes from the room with surprising speed.



Hurriedly, I freeze the capsule. No more of those things must ever come out again.



However, the Metroid Mutant is already lurking within this spaceship. How should I defeat it?



[[Chase after it immediately]]

[[Think up a strategy]]</tw-passagedata><tw-passagedata pid="424" name="Chase after it immediately" tags="" position="2900,4050" size="100,100">In the end, I decide it is best to kill the thing as quickly as possible and chase after it. Though I was unprepared earlier and the creature escaped, I have a general guess as to the direction it took. It seems to have gone towards the ship’s internal energy tanks.



To check, I scan the room with my Command Computer’s Radar. There it is. Strange life readings detected.



However, this place is dangerous. If I fight and the energy tanks catch fire, it will be the end for me as well.



What should I do?



[[Just fight it]]

[[Wait and see what happens-&gt;Observe the Metroid Mutant]]

[[Go back to the cockpit for now and formulate a strategy-&gt;Think up a strategy]]</tw-passagedata><tw-passagedata pid="425" name="Think up a strategy" tags="" position="3050,4200" size="100,100">I go back to the cockpit for now to consider my situation and come up with a strategy. However, I have absolutely no data concerning the Metroid Mutant. The truth is, there&#39;s no point in devising a battle plan. [[Suddenly...-&gt;A Monster Outside the Cockpit]]</tw-passagedata><tw-passagedata pid="426" name="A Monster Outside the Cockpit" tags="" position="3200,4200" size="100,100">&lt;i&gt;WHAM!&lt;/i&gt;



Suddenly, a deafening noise echoes within the cockpit. Something is slamming its body into the cockpit entrance. 



There are only two lifeforms aboard this spaceship. One of them is me. As for the other...obviously, it&#39;s the Metroid Mutant.



The cockpit door is firmly shut. Whether the creature understands this or not, after awhile the sounds cease.



Obviously I am the creature&#39;s objective. I will have to fight it. And, the thing is strong. It might be good to call for help. What should I do?



[[Fight solo]]

[[Call for help]]</tw-passagedata><tw-passagedata pid="427" name="Just fight it" tags="" position="3050,4050" size="100,100">I shoot the Metroid Mutant with the Ice Beam. However, the cold doesn&#39;t even phase it. This thing has the ability to resist the Ice Beam!



And it’s aboard my spaceship.



However, this doesn&#39;t mean there&#39;s no other way to fight it.



The Command Computer&#39;s shrill warning to turn off the engines blares. At the spur of the moment, I think of a strategy.



The Metroid Mutant finishes feeding off the energy conversion device inside the tank. The energy conversion device changes energy into solid mass, allowing large amounts of energy to be loaded onto even a tiny spacecraft. What&#39;s more, this equipment can substantially decrease the mass&#39;s volume even further. 



To the Metroid Mutant—that is, to Metroids—some things have characteristics similar to what can be called life-energy, and if a Metroid tries to consume something that uses that sort of energy, it should have the same effect. However, removing the energy conversion device will make it impossible to control the energy flow. There is an extremely high probability the engine would run out of control. —No, it would &lt;i&gt;definitely&lt;/i&gt; run wild.



When the timing is right, the Metroid Mutant feeds on the conversion device. [[The creature&#39;s roar echoes throughout the ship.-&gt;Engine Overload]]</tw-passagedata><tw-passagedata pid="428" name="Observe the Metroid Mutant" tags="" position="2900,3900" size="100,100">I wait near the energy tank and watch what happens. However, the Metroid Mutant doesn&#39;t intend to do things so slowly. While lying in wait observing, my position is revealed.



The Metroid Mutant has an attack method characteristic of the Metroids: grappling on to its victims and sucking away their energy...



[[Shoot at it-&gt;Shoot the Metroid Mutant]]

[[Run away-&gt;Run from the Metroid Mutant]]</tw-passagedata><tw-passagedata pid="429" name="Engine Overload" tags="" position="3200,4050" size="100,100">However, at the same time, something strange is starting to happen to the engines. It looks like they will run out of control fairly quickly. Should I finish off the Metroid Mutant first, or stop the engines from overloading?



[[Fight next]]

[[Stop the engines from overloading]]</tw-passagedata><tw-passagedata pid="430" name="Fight next" tags="" position="3200,3900" size="100,100">There are no visible changes to the Metroid Mutant. However, I am certain it took at least some damage. I fire the Ice Beam into the thing (it won’t freeze the creature, but it will deal more damage than the Normal Beam). Although the Metroid Mutant packs some serious power, eventually the energy conversion device does its work, and [[the Metroid Mutant runs from my Ice Beam.-&gt;Engine Going Critical]]</tw-passagedata><tw-passagedata pid="431" name="Stop the engines from overloading" tags="" position="3050,3750" size="100,100">First I will stop the engines from running wild. I&#39;ll have to take emergency measures to shut off the energy conversion device, but it should prevent a crisis. Unfortunately, I&#39;m not paying attention, and am rushed by the Metroid Mutant, which I thought had been feeding off the energy conversion device.



However, the creature seems to have taken some damage, too. Its movements have slowed. But that won&#39;t stop its attack.



Should I fight the Metroid Mutant or run away?



[[Fight-&gt;Fight the Metroid Mutant]]

[[Run-&gt;Run from the Metroid Mutant]]</tw-passagedata><tw-passagedata pid="432" name="Fight the Metroid Mutant" tags="" position="3200,3750" size="100,100">The Metroid Mutant changes its attack. The creature has thick tentacles unlike those of the Metroids. However, the ends of its tentacles have sharpened, and it can damage its opponents with them. Metroids go for the abdomen—I avoid it.



However, right past where I was standing is the section of the engine I just performed emergency maintenance on. The creature&#39;s attack pierces the engine—it begins to run wild again.



Also, when the Metroid Mutant strikes the engine, it is exposed to a large dose of radiation. 



[[It gives a single cry and flees somewhere in the ship.-&gt;Engine Going Critical]]</tw-passagedata><tw-passagedata pid="433" name="Run from the Metroid Mutant" tags="" position="2900,3750" size="100,100">The Metroid Mutant’s attack slices through the air. I manage to avoid it by a hair’s breadth. I keep attacking with the Ice Beam so I can restrain the creature and escape from the room. In any case, because my data on the Metroid Mutant is insufficient, for now it would probably be better to go back to the cockpit for awhile and come up with a battle plan. However, despite my efforts to restrain the Metroid Mutant, [[my enemy hasn’t given up its attack.-&gt;A Monster Outside the Cockpit]]</tw-passagedata><tw-passagedata pid="434" name="Shoot the Metroid Mutant" tags="" position="3050,3900" size="100,100">I immediately roll on the floor to avoid the Metroid Mutant’s attack. Simultaneously, I shoot a gout of flames from my booster rockets into the creature and make my move when it flinches. [[Just fight it]]</tw-passagedata><tw-passagedata pid="435" name="Engine Going Critical" tags="" position="3350,3900" size="100,100">The out of control engine is ramping up to its limits at full speed. The squeals of an overload start ringing throughout the ship. Now the only sounds coming from the engine are abnormal. There is no way to prevent this ship from exploding.



Before that happens, I must get to the escape pod. But first, what should I do about the Metroid Mutant?



[[Escape immediately]]

[[Finish off the Metroid Mutant next]]</tw-passagedata><tw-passagedata pid="436" name="Escape immediately" tags="" position="3500,3900" size="100,100">I realize that if I just ignore the Metroid Mutant, the whole situation will be resolved when my ship explodes. In any event, I should escape.



I run for the escape pod. I check that the creature isn’t around and go inside. The escape pod is a one-man, narrow, cylindrical space pod. Only a small nozzle is attached, providing almost no maneuverability, as it is made entirely for escape. I immediately escape from my ship upon boarding the pod.



My spaceship detonates in the distance. The soundless explosion is beautiful and serene.



However, when I escaped the ship, I also left behind the frozen capsule. Now, I can only transmit a rescue signal and wait for help to come...



[[That was an exhausting battle...-&gt;An Unwanted Hitchhiker]]</tw-passagedata><tw-passagedata pid="437" name="Finish off the Metroid Mutant next" tags="" position="3350,3750" size="100,100">The Metroid Mutant is still here. The thing is trying to escape to somewhere. It seems this creature also knows the ship is going to explode. I attack it with the Missiles I resupplied after returning to the ship.(click: &quot;I attack it with the Missiles I resupplied after returning to the ship.&quot;)[



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(go-to: &quot;Metroid Mutant Defeated?&quot;)]

	(else:)[(go-to: &quot;Missiles Fail&quot;)]

}]</tw-passagedata><tw-passagedata pid="438" name="Fight solo" tags="" position="3350,4200" size="100,100">Suddenly, a warning blares. The computer explains the Metroid Mutant has penetrated the room holding the energy tanks and the energy is out of control. I display the Energy Room on the monitor.



However, a single glance at the image reveals I am too late. Immediately, the picture cuts out, probably rendered nonoperational due to the high temperatures.



I decide to board the escape pod and flee the ship.



I head through the passage on the side of the cockpit, and come out to the escape pod. I immediately start the engines, and the pod slowly separates from the ship.



&lt;i&gt;—KABOOM!&lt;/i&gt; The spacecraft scatters into space in a soundless firework. [[But I wonder...what happened to the Metroid Mutant?-&gt;An Unwanted Hitchhiker]]</tw-passagedata><tw-passagedata pid="439" name="Call for help" tags="" position="3200,4350" size="100,100">I broadcast a distress signal on all frequencies...however, it may be a long time before help actually arrives. I have no idea how long it will take.



At that moment, my Command Computer barks a warning. It states the Metroid Mutant has penetrated the room where the oxygen tanks are stored. Indeed, when I look at my Radar, the creature&#39;s readings are coming from the direction of the Oxygen Storage Room.



I wonder if the thing took this action knowing I would die if my oxygen supply was cut off. If so, the oxygen tanks are in danger.



[[Go protect the oxygen tanks]]

[[Barricade yourself in the room]]</tw-passagedata><tw-passagedata pid="440" name="An Unwanted Hitchhiker" tags="" position="3500,4200" size="100,100">&lt;i&gt;CLANK.&lt;/i&gt;



Sounds. Impossible!!



I have a bad feeling about this. I go see what is making those noises.



Sure enough, my worst fears are confirmed. I don&#39;t know how the thing got inside, but the Metroid Mutant is right there.



I don&#39;t know whether or not the creature has real eyes, so although it&#39;s a somewhat amusing thought, at that moment, the Metroid Mutant and I are staring at each other.



Eye to eye... As enemies.



There is an airlock by my right hand. I can eject the creature into space. Of course, I can also leap out into space myself.



[[Eject the Metroid Mutant]]

[[Go out myself]]</tw-passagedata><tw-passagedata pid="441" name="Eject the Metroid Mutant" tags="" position="3650,4050" size="100,100">Although the Metroid Mutant has found me inside the escape pod, it doesn’t seem like it intends to kill me immediately. It seems to be enjoying itself.



Now, the Metroid Mutant is slowly coming closer. 



—Enjoying itself.



However, I won&#39;t stand for the thing&#39;s insolence.



&lt;i&gt;WHOOOOOoooSSSShhhh...&lt;/i&gt;



The atmospheric pressure inside the pod drops abruptly.



I have opened the airlock.



Of course, I&#39;ve anchored my body in place.



The Metroid Mutant, not latched onto anything, is forcibly flung into space.



I close the airlock the moment the creature has been blown outside. 



[[However, I can’t let my guard down just yet.]]</tw-passagedata><tw-passagedata pid="442" name="Go out myself" tags="" position="3650,4200" size="100,100">I open the airlock. The air pressure inside the escape pod drops abruptly. Simultaneously, I go outside alone, and the airlock closes again. This means the Metroid Mutant is locked inside.



However, at that moment, something astonishing occurs



My tiny escape pod is enveloped by an enormous spacecraft.



—It is a Pirate ship. What&#39;s more, it belongs to the band that had lived on Zebes.



[[Board the Pirate ship]]

[[Run-&gt;Run from the Pirates]]</tw-passagedata><tw-passagedata pid="443" name="Run from the Pirates" tags="GAME-OVER" position="3650,4350" size="100,100">I flee. There might be some hope of being rescued, but I flee all the same. The Pirates’ enormous spacecraft recovers over only the escape pod with the Metroid Mutant inside and speeds away leaving me behind undetected.



And so, I am left alone in the vastness of space. However, I need my ship&#39;s transmitter to call for help, not some simple communicator. The SOS broadcasting equipment attached to my space suit is truly no consolation.



I am fated die alone in the vastness of space.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="444" name="Board the Pirate ship" tags="" position="3800,4200" size="100,100">I somehow get aboard successfully. At the proper moment, I let myself be discovered on purpose and become [[a prisoner of the Pirates.-&gt;A Prisoner of the Pirates]]</tw-passagedata><tw-passagedata pid="445" name="However, I can’t let my guard down just yet." tags="" position="3800,4050" size="100,100">&lt;img src=./images/PirateWhale.jpg&gt;



At this moment, one more threat is approaching the escape pod.



If I think of this escape pod as an ordinary fish, the spaceship looming over the pod is as big as a whale. On the side of that spaceship, a skull and crossbones have been intricately drawn.



Considering the sector of space I&#39;m in, could these be the band of Pirates who made Zebes their stronghold—in other words, the ones who stole the Metroid capsule?



...When I successfully threw the Metroid Mutant outside, I felt a great sense of relief.



...However, I haven&#39;t lost my nerve. If I meet the Pirates here, I should be able to talk to their boss and solve the riddle of how Zebes became the way it was. [[I allow myself to be captured by the Pirates.-&gt;A Prisoner of the Pirates]]</tw-passagedata><tw-passagedata pid="446" name="A Prisoner of the Pirates" tags="" position="3998,4200" size="100,100">==&gt;&lt;==

	&lt;i&gt;(text-color: &quot;yellow&quot;)[GAME SAVED]&lt;/i&gt;(save-game:&quot;Slot A&quot;)

(set: $startRoom to &quot;A Prisoner of the Pirates&quot;)



&lt;==

Although they are Pirates, it seems they want to question me and immediately take me to the man who is their boss. Despite being their boss, this man doesn&#39;t seem to be all that clever.



When I am wearing my helmet, I am unable to speak. The Pirates seem to wonder why I don’t say anything. Since I am currently bound hand and foot in chains before the Boss’s chair, there isn’t anything I can do about it. Moreover, the Metroid capsule has also come into the hands of the Pirates.



“Take off his helmet,” the Boss says.



[[Several of his underlings take off my helmet...]]</tw-passagedata><tw-passagedata pid="447" name="Go protect the oxygen tanks" tags="" position="3200,4500" size="100,100">I head towards the oxygen storage room. The Metroid Mutant floats inside mockingly—the thing was expecting me...



Abruptly, I fire the Ice Beam at the Metroid Mutant. Although I know the Ice Beam doesn’t have much stopping power against the creature, it&#39;s better than firing off a Missile in the narrow confines of the ship. But that doesn&#39;t mean my weapon is completely ineffective. The beam seems to slow the creature&#39;s movements a little. However, I can’t keep this up for long... (click: &quot;However, I can’t keep this up for long...&quot;)[



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(go-to: &quot;A Metroid Mutant Meal&quot;)]

	(else:)[(go-to: &quot;Saved by Pirates?&quot;)]

}]</tw-passagedata><tw-passagedata pid="448" name="Barricade yourself in the room" tags="" position="3350,4350" size="100,100">When I barricade myself in the cockpit, alarms fill the room. Of course, they warn the oxygen tanks have taken damage. Since I have been disregarding them until now and intend to stay put until rescue comes, I ignore these alarms, too.



Perhaps because the it has become impatient, the Metroid Mutant comes back to the cockpit. However, this time the creature has learned from before. Before I realize what&#39;s happening, the thing has carried over the magnetic field line generator from the Navigational Engine Room and is now undoing the cockpit&#39;s electromagnetic lock. If the Metroid Mutant&#39;s gets even more intelligent, it is easy to predict that the lock will soon be undone. And if the lock is opened, I will have to either fight the Metroid Mutant or use the escape pod to flee the ship.



&lt;i&gt;CRACK.&lt;/i&gt;



The electric lock opens wider and wider...



[[Fight-&gt;Fight the Metroid Mutant in the Cockpit]]

[[Escape-&gt;Use the Escape Pod]]</tw-passagedata><tw-passagedata pid="449" name="Fight the Metroid Mutant in the Cockpit" tags="" position="3500,4500" size="100,100">&lt;i&gt;Clink!&lt;/i&gt;



With that soft clank, the electromagnetic lock is released. There is a brief moment of silence. I ready the Ice Beam.



&lt;i&gt;BOOM!!&lt;/i&gt;



The cockpit door blows open with enough force to bend back its double layers of ceramic. Facing me through the door is, of course, the Metroid Mutant.



Without stopping to think, I fire the Ice Beam. Instantly, the room fills with cold air. At first, the Ice Beam slows down the Metroid Mutant, but already the creature seems to be shrugging it off. The Metroid Mutant creeps forward slowly but steadily.



At that moment, a harsh voice rises from the ship’s internal communication system: “We have picked up your distress signal. You&#39;re much obliged!”



Displayed on the ship’s external monitor is a pirate ship with an exquisite, old-fashioned skull and crossbones drawn on its hull. However, the Metroid Mutant has disappeared unnoticed, perhaps frightened off by the [[yelling.-&gt;Captured for Execution]]</tw-passagedata><tw-passagedata pid="450" name="Use the Escape Pod" tags="" position="3500,4350" size="100,100">The cockpit’s double layered ceramic door opens with a &lt;i&gt;BANG.&lt;/i&gt; Facing me is, of course, the Metroid Mutant.



I turn around and flee. I will have to use the escape pod on the side of the cockpit in order to escape the ship...



The Metroid Mutant raises a cry of surprise. It seems to know I am trying to escape and closes in with a vengeance. 



I open the door, escaping by a hair&#39;s breadth. Several seconds of silence fill the space.



What’s the creature doing? Has it given up?  Since the door is locked, I shouldn&#39;t have anything to worry about. But I&#39;m still uneasy.



The escape pod’s nozzle light flares up. Slowly, it separates from the ship. The ship gets further and further away.



As time passes, I grow worried about whether I was able to leave the Metroid Mutant behind. Perhaps the thing has hidden itself in some corner of the escape pod. [[I fear this may be the case...-&gt;An Unwanted Hitchhiker]]</tw-passagedata><tw-passagedata pid="451" name="Captured for Execution" tags="" position="3500,4650" size="100,100">I have been captured by the Pirates. This had been their plan from the very beginning.



I do not resist.



And why not? I&#39;ve determined this band are the same ones who captured the Metroid capsule, the people who escaped Zebes. [[They intend to bring me to their leader and cut off my head.-&gt;A Prisoner of the Pirates]]</tw-passagedata><tw-passagedata pid="452" name="A Metroid Mutant Meal" tags="GAME-OVER" position="3350,4500" size="100,100">Just as I expected, it is impossible to achieve victory over the Metroid Mutant in these conditions. The Metroid Mutant has regained its reaction speed. It avoids every attack, and at length, I am fully caught by the creature. Now the thing just sucks out my energy...



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="453" name="Saved by Pirates?" tags="" position="3200,4650" size="100,100">Just as I feared, attacking with just the Ice Beam has no effect. The Metroid Mutant is slowly building up resistance to the attack. The creature closes in. Already, the Ice Beam is losing its effect.



...However, at that moment, something unexpected happens. Well, it wasn&#39;t completely outside the realm of possibility. However, it was still a surprise.



I hear a beep from the communications terminal, and extremely gruff voice yells, “&lt;i&gt;Heey!&lt;/i&gt; Who sent out that distress call? We’ve come to rescue you!”



I check the ship’s external monitor. There&#39;s a ship jumping in right on top of me. On the side of the ship is an intricately drawn skull and crossbones—it&#39;s a Pirate ship.



Well, this is a surprisingly narrow escape from death. The Metroid Mutant has disappeared, perhaps startled by the [[yelling.-&gt;Captured for Execution]]</tw-passagedata><tw-passagedata pid="454" name="Metroid Mutant Defeated?" tags="" position="3500,3750" size="100,100">I fire a continuous stream of Missiles. I refilled my Missiles after returning to the ship, and now fire every last one. Not even the Metroid Mutant is invincible. That thing could not have taken so many Missile blasts and lived. I have defeated the Metroid Mutant.(click: &quot;I have defeated the Metroid Mutant.&quot;)[



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(go-to: &quot;Failed to Escape - Game Over&quot;)]

	(else:)[(go-to: &quot;Escaped - Bad Ending&quot;)]

}]</tw-passagedata><tw-passagedata pid="455" name="Missiles Fail" tags="GAME-OVER" position="3200,3600" size="100,100">Just as I expected, it is impossible to achieve victory over the Metroid Mutant in these conditions. The Metroid Mutant has regained its reaction speed. It avoids every attack, and at length, I am fully caught by the creature. Now the thing just sucks out my energy...



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="456" name="Escaped - Bad Ending" tags="GAME-OVER" position="3650,3750" size="100,100">After defeating the Metroid Mutant, I hurriedly leap aboard the escape pod. It separates from the spaceship, which instantly explodes.



But I have forgotten something important. I left the Metroid capsule behind on the exploding spaceship. In the end, I was unable to carry out my mission. The mystery of the Metroid capsule will never be solved...



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="457" name="Failed to Escape - Game Over" tags="GAME-OVER" position="3500,3600" size="100,100">Although I defeated the Metroid Mutant, there isn&#39;t enough time to escape. In the end, I can&#39;t even make it to the escape pod room. Just before I get there, my spacecraft explodes. The Metroid capsule and the Metroid Mutant both vanish in the glittering stars.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="458" name="Several of his underlings take off my helmet..." tags="" position="4150,4200" size="100,100">&lt;img src=./images/HelmetOff.jpg&gt;



For several minutes, the Pirate underlings struggle with my helmet, which is firmly in place. Nevertheless, they somehow unfasten the lock. Little by little, they raise my helmet, and a feeling of disbelief spreads among the Pirates.



...What they see is beyond their wildest imaginations.



They are able to hear my voice for the first time.

   

[[&quot;Yes. As you can see, I am a woman from Earth.&quot;]]</tw-passagedata><tw-passagedata pid="459" name="&quot;Yes. As you can see, I am a woman from Earth.&quot;" tags="" position="4300,4200" size="100,100">The Pirates stand there in disbelief, unable to either move or speak.



At length, the Boss says weakly, “Y...you destroyed Zebes...? A woman...?”



The man is horrified. However, this clearly is my chance. Suddenly, I power up my cyborg-enhanced arms to the limit. The chains that firmly bind me creak and shatter.(click: &quot;The chains that firmly bind me creak and shatter.&quot;)[



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(go-to: &quot;Metroid Mutant Attacks the Pirates&quot;)]

	(else:)[(go-to: &quot;Secret Identity Revealed&quot;)]

}]</tw-passagedata><tw-passagedata pid="460" name="Metroid Mutant Attacks the Pirates" tags="" position="4450,4200" size="100,100">In the space that opens when the crew stand there dumbfounded, I try to flee the room, but the Pirates are not to be taken so lightly. If it is simply a matter of power, my body has been modified by cyborg implants and has the strength of five ordinary men. However, since there are ten men pinning me down, I can&#39;t move even with my strength.



&lt;i&gt;CLANG, CLANG!!&lt;/i&gt;



Suddenly, an alarm blares through the room. 



“What’s that?!” the boss nervously asks a nearby crewman.



“I don’t know. We’ve gotten word that some kind of hellish creature is wandering about the ship. But since every person who has come across it&#39;s been killed, we don&#39;t have any accurate information!”



It&#39;s the Metroid Mutant...that thing is still on the prowl.



Even the Pirates surrounding me are ready to run.



[[Take advantage of the situation and escape]]

[[Watch what happens]]</tw-passagedata><tw-passagedata pid="461" name="Take advantage of the situation and escape" tags="" position="4600,4200" size="100,100">I knee the man in front of me, simultaneously using my elbow to strike the man to my left on the chin. The two scream, and the attention of the crewmen facing the ship’s internal monitor returns to me again.



So I don&#39;t get overpowered again, this time I mercilessly drive my attacks into the vitals of solar plexus, forehead, knee, and groin. A breach opens. The crowd in front of me thins. 



A crewman cries out, “The lifeform is coming into the command room!”



Again they turned to their attention towards the door. Not missing my chance, I rush through the breach without stopping.



I successfully escape. The crew aren&#39;t interested in pursuing. [[They are feverishly preparing for the Metroid Mutant.-&gt;An Important Decision]]</tw-passagedata><tw-passagedata pid="462" name="Watch what happens" tags="" position="4450,4050" size="100,100">A crewman calls on the ship’s internal monitor, “The monster is heading for the control room!”



Veins bulge out on the Boss’s face. “You there! Fight it!” he bellows.



Each one of the Pirates responds in unison, “Aye!” their voices dull.



Their opponent in this battle is the Metroid Mutant. This enemy is no match even for me. I consider working together with the Pirates and defeat the creature...



[[Fight the Metroid Mutant together]]

[[Don’t lend a hand]]</tw-passagedata><tw-passagedata pid="463" name="Secret Identity Revealed" tags="" position="4300,4350" size="100,100">Now that the fact I am a woman is revealed, I forget all thoughts of speaking with the Boss, and choose that moment to run. It turns out the Boss is the type who doesn&#39;t understand what a leader should do, and there&#39;s really nothing I can do about that.



I consider that as I walk around the ship, trying to discover some means of escape, when [[suddenly, I come upon something I didn&#39;t expect to find here...-&gt;An Unfortunate Discovery]]</tw-passagedata><tw-passagedata pid="464" name="An Unfortunate Discovery" tags="" position="4450,4350" size="100,100">—It is the Metroid Mutant. The creature is feeding on a Pirate. 



That thing has also come aboard the Pirate ship.



The Metroid Mutant notices me. The creature seems a little taken aback as well at seeing me without my helmet, but then remembers that I am its arch-nemesis.



The creature approaches slowly.(click: &quot;The creature approaches slowly.&quot;)[



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(go-to: &quot;Bashed by the Mutant&quot;)]

	(else:)[(go-to: &quot;Battleus Interruptus&quot;)]

}]</tw-passagedata><tw-passagedata pid="465" name="Bashed by the Mutant" tags="" position="4600,4350" size="100,100">&lt;img src=./images/BashedbyMutant.jpg&gt;



The Metroid Mutant flies at me in a frenzy, a beast that&#39;s discovered its prey. Instantly I brace myself. However, I don&#39;t have my helmet on, and ultimately, the Ice Beam proves ineffective. A thick tentacle slams into me like a log and the impact sends me dancing into the air.



I stop when my back crashes into the wall. If the Metroid Mutant could express emotions, it would almost certainly be grinning broadly right now. However, thanks to being thrown back, the distance between me and the creature has made it possible for me to [[run for it.-&gt;Suddenly...]]</tw-passagedata><tw-passagedata pid="466" name="Suddenly..." tags="" position="4600,4500" size="100,100">An alarm blares through the entire ship. Instantly, the Metroid Mutant and I stop in our tracks. What is the reason for this alarm? Perhaps it is due to my escape. Or perhaps it is because the Metroid Mutant has invaded the ship.



—I consider this this, but remember now is not the time for reflection.



Should I keep fighting the creature, or run?



[[Fight-&gt;Fight the Mutant Now]]

[[Run-&gt;Run from the Mutant]]</tw-passagedata><tw-passagedata pid="467" name="Battleus Interruptus" tags="" position="4450,4500" size="100,100">The Metroid Mutant flies at me. However, I feel now is not the time to fight it. When it comes time for me to have a showdown with the creature, that will be the “final battle.”



[[Suddenly...-&gt;Suddenly...]]</tw-passagedata><tw-passagedata pid="468" name="Fight the Mutant Now" tags="" position="4600,4650" size="100,100">Suddenly, I am spurred by the impulse to end this with the Metroid Mutant. Even though this impulse is reckless if left unchecked, I fire a Missile at the creature.(click: &quot;I fire a Missile at the creature.&quot;)[



{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(go-to: &quot;Rocket Jump Fail&quot;)]

	(else:)[(go-to: &quot;Pirates Investigate&quot;)]

}]</tw-passagedata><tw-passagedata pid="469" name="Run from the Mutant" tags="" position="4750,4500" size="100,100">I think it best not to fight here and run. When the Metroid Mutant hears the blaring alarm, the creature also loses its desire to fight. At roughly the same time, the Metroid Mutant and I break off, [[retreating in opposite directions.-&gt;An Important Decision]]</tw-passagedata><tw-passagedata pid="470" name="Pirates Investigate" tags="" position="4750,4650" size="100,100">That alarm seems to be in response to the Metroid Mutant. Hearing the Missile’s explosion, Pirates enter the room one after another. Then they see the Metroid Mutant and attack. However, the difference in their reflexes is too great, and they only fall victim to the creature. The Metroid Mutant grabs hold of the Pirates one by one, squeezes out their final drop of life energy, and repeats this bloodbath again. 



[[I turn pale at the sight and flee the scene at once.-&gt;An Important Decision]]</tw-passagedata><tw-passagedata pid="471" name="Rocket Jump Fail" tags="GAME-OVER" position="4450,4650" size="100,100">Well, I thought this might be a reckless way to settle things. Although this is an enormous spacecraft, the Missile’s explosion blossoms suddenly within the narrow passage. And I don&#39;t have my helmet on.



Although the force of the Missile’s explosion doesn&#39;t open a hole in the ship’s outer hull, it is strong enough to produce a similar phenomenon to lighting gunpowder in a rifle barrel.



And so, having been engulfed in the explosion without a helmet, I am rendered immobile, with no means of opposing the Metroid Mutant.



Now I am just its victim.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="472" name="An Important Decision" tags="" position="5050,4350" size="100,100">I flee, but consider what to do from here. As a means of fleeing the ship, my best bet is to locate a small spacecraft, steal it as quickly as possible, and escape. In that case, if I just move quickly, I&#39;ll definitely make good time.



However, the Metroid capsule is still stolen. I still want to go back and get it. However, if I go, my chances of escaping will dwindle.



What should I do?



[[Go and recover the capsule]]

[[Escape Now]]</tw-passagedata><tw-passagedata pid="473" name="Go and recover the capsule" tags="" position="5050,4200" size="100,100">&lt;img src=./images/PirateBossSmoking.jpg&gt;



Before anyone knew what hit them, the Metroid Mutant had annihilated almost all the Pirates. However, by the time I returned to the Control Room to retrieve the capsule, the Metroid Mutant had exhausted all its strength. Corpses lie strewn about in the center of the room. Beyond them is the capsule. In addition, there is a man who survived the battle and left his comrades all dead, smoking a cigarette. That man is the Pirate Boss.



I tell him, [[“I have come to take back the capsule.”-&gt;Grab Sword]]</tw-passagedata><tw-passagedata pid="474" name="Escape Now" tags="" position="5050,4500" size="100,100">&lt;img src=./images/MutantEscapeNow.jpg&gt;



Already the interior of the ship has transformed into a hellish pandemonium. Wherever the Metroid Mutant passed by, not a single soul remains alive. I hurry to the ship’s docking bay.



Arriving at the dock, I am surprised to find the Metroid Mutant waiting for me. The creature came here in its tenacious pursuit. No matter where I might flee, the thing will follow, even to the furthest reaches of hell. I am its nemesis.



Suddenly, that thought gives me an inspiration.



Should I fight or run?



Fight  (click: &quot;Fight  &quot;)[

{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(go-to: &quot;Fend off the Metroid Mutant&quot;)]

	(else:)[(go-to: &quot;Fight Your Nemesis&quot;)]

}]

[[Run-&gt;Flee the Ship]]</tw-passagedata><tw-passagedata pid="475" name="Flee the Ship" tags="" position="5200,4500" size="100,100">I run without stopping, thinking I can get aboard the small spacecraft and flee from this place.



{

	(set: $random to (random: 1,2))

	(if: $random is 1)[(display: &quot;Bazooka Joe&quot;)]

	(else:)[(display: &quot;Showdown&quot;)]

}</tw-passagedata><tw-passagedata pid="476" name="Bazooka Joe" tags="" position="5200,4350" size="100,100">I pretend to run away from the spacecraft, making a U-turn to go back to the docking bay entrance. However, when I get there, I discover this is where all my power suit equipment had been placed—along with a Gravity Bazooka for use on a powered suit.



I load the bazooka with a speed that impresses even myself.



Then I aim and fire.



The recoil of a bazooka built for a power suit is incredible. It takes two sturdy men to hold one up and fire it. Even while wearing a space suit, lifting and firing it with just one arm would be completely impossible if I had not gotten cyborg implants.



The bazooka hits its target. The Metroid Mutant is blown away by the tremendous impact. There is a span of several seconds until the creature can recover. [[In that time, I successfully get aboard the small spacecraft.-&gt;Mission Complete - Bad Ending]]</tw-passagedata><tw-passagedata pid="477" name="Mission Complete - Bad Ending" tags="GAME-OVER" position="5200,4200" size="100,100">The small spacecraft pulls away from the Pirate ship. When I have gone some distance from the Pirate ship, I destroy it with a large missile.



The magnificent cosmic fireworks die down, and I consider what to do next. I can’t recover the stolen capsule because it has been destroyed. As such, it is impossible to solve this mystery. At any rate, the incident over. Now I just have to report in...



*    *    *



&lt;i&gt;Outside the spacecraft, a planet floats into view. The ship approaches the planet with Samus on board.



But this isn&#39;t what she expects.



The ship is dragging along something small. Though the object is tiny in comparison with the ship, it is actually about two meters in length.



It is the Metroid Mutant.



The creature is practically invincible.



The thing will keep chasing until its nemesis is completely annihilated.&lt;/i&gt;



MISSION COMPLETE - BAD ENDING (click: &quot;MISSION COMPLETE - BAD ENDING&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="478" name="Showdown" tags="" position="5350,4500" size="100,100">I try to circle around, but can&#39;t get to the spaceship without a fight. Since there&#39;s no way I can run, [[I have to fight.-&gt;Fight Your Nemesis]]</tw-passagedata><tw-passagedata pid="479" name="Fight Your Nemesis" tags="GAME-OVER" position="5350,4650" size="100,100">The final battle has come to an end sooner than expected.



...More to the point, I shouldn’t have called it the final battle because we are interrupted. Who should appear but the Pirate Boss, his body encased in a powered suit. What&#39;s more, the man is holding a large caliber beam cannon - a weapon made for a powered suit, and what&#39;s more, it is a weapon of terrible destructive force with the ability to just about vaporize a single asteroid.



My final vision is of energy building up at the tip of the large barreled beam cannon. After that, I am flying through space...



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="480" name="Fight the Metroid Mutant together" tags="" position="4450,3900" size="100,100">“I want to fight, too.”



Instantly, all the Pirates turn their eyes toward me.



And little wonder. I, their enemy, have offered to fight alongside them. And their dimwitted Boss, keeping his voice calm, says, “All right. Here, use this,” and hands over the Ice Beam he had taken from me.



The moment I equip the Ice Beam, a loud bang suddenly fills the room. The Metroid Mutant has already reached the outside of the control room and is unleashing its attack on the door. The Pirates have also finished preparing for battle. The door is opened by remote.



On the other side of the open door is...the Metroid Mutant.



Instantly, flashes burst from the Pirates’ laser guns.(click: &quot;Instantly, flashes burst from the Pirates’ laser guns.&quot;)[



{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(go-to: &quot;Metroid Massacre&quot;)]

	(else:)[(go-to: &quot;Blast the Mutant&quot;)]

}]</tw-passagedata><tw-passagedata pid="481" name="Don’t lend a hand" tags="" position="4600,4050" size="100,100">&lt;img src=./images/MutantPirateDoor.jpg&gt;



Cracks appear in the door. The Pirates quickly point all of their guns towards the portal.



—The Metroid Mutant is already on the other side of the door to this room.



The next time the creature slams into the door, it blows apart with a loud squeal. Instantly, interlaced beams of light flash from the Pirates&#39; guns.



However, the Pirates’ resistance is pitiful. The power of lasers designed for use aboard a spaceship doesn’t amount to much. Even the Ice Beam is ineffective, and the slight power of the laser beams is no match for their opponent.



[[In the midst of battle, I escape unnoticed.-&gt;An Important Decision]]</tw-passagedata><tw-passagedata pid="482" name="Metroid Massacre" tags="GAME-OVER" position="4300,3900" size="100,100">The guns the Pirates wield have to have a low laser output for use on-board a spacecraft. My Ice Beam doesn&#39;t seem have any effect against our opponent, either. This battle can only end in a crushing defeat. In retrospect, everyone was just food gathered for the Metroid Mutant to take, whether I helped out or not. Even though the Pirates are brave men and veteran warriors, they are no match for this beast.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="483" name="Blast the Mutant" tags="" position="4450,3750" size="100,100">The guns the Pirates wield don’t have a very high output so they can be used on-board a spacecraft. Since my Ice Beam wasn&#39;t effective against the creature, it doesn&#39;t seem like these will be very effective, either. However, through the Pirates&#39; force of will and determination, or perhaps merely by sheer numbers and their vast quantity of guns, the lasers are definitely damaging the Metroid Mutant. However, the Pirates are also falling one by one.



I come up with of a strategy. If most of the Pirates die in the battle, it might be possible to safely escape after recovering the capsule. I steel myself and allow the Pirates to become the Metroid Mutant’s victims...



Though most of the pirates have fallen, the Metroid Mutant is also taking considerable damage. So, to make doubly sure, I fire a Missile into the creature!



[[--KABOOM!-&gt;Duel to the Death]]</tw-passagedata><tw-passagedata pid="484" name="Duel to the Death" tags="" position="4600,3750" size="100,100">The Metroid Mutant stops moving entirely. Although it&#39;s possible the thing might revive, at any rate, it has been defeated. ...And the Pirates have also been completely annihilated.



—No, there is one person with some fight left in him. ...It&#39;s that dimwitted Boss. He must be smarter than he looks. He knew what I was planning—[[I fired a Missile to annihilate the Metroid Mutant along with the Pirates.-&gt;Grab Sword 2]]</tw-passagedata><tw-passagedata pid="485" name="Metroid Mutant Revives" tags="" position="4900,3900" size="100,100">I am losing to the Pirate Boss’s zeal. However, when the Boss is just about to deliver his final thrust, something unexpected occurs.



The Metroid Mutant, which we had until now thought dead, has begun to stir. The creature is a true threat and seems to have been provided with some indescribable vitality. The Pirate Boss notices the Metroid Mutant and turns to face it.



I don&#39;t let this chance escape.



I recover the capsule and flee without watching the outcome of their battle. [[I keep going and head for the small spacecraft left in the ship&#39;s docking bay.-&gt;MISSION COMPLETE]]</tw-passagedata><tw-passagedata pid="486" name="MISSION COMPLETE" tags="MISSION-COMPLETE" position="5050,3900" size="100,100">&lt;img src=./images/GodEnd.jpg&gt;



After arriving at the docking bay, I manage to get aboard the small spacecraft and immediately escape. After I have gone a considerable distance, I target the Pirate ship and launch the large missile equipped on my spacecraft—destroying the Metroid Mutant, which I had left behind. 



The large missile launches without a sound. It seems to flow towards its target. Upon impact, a brilliant white light envelops the Pirate ship. The ring of light expands infinitely large and thin. The light cycles through the spectrum, then finally contracts like a withering flower. And with that, it is over.



I somehow managed to recovered the capsule, defeat the Metroid Mutant, and even annihilate the Pirates. I report my current status to Earth. In short, my mission is a success.



I have finished my work and become drowsy. I enter the time it will take to reach Earth into the ship&#39;s computer and enter cold sleep.



I become an embryo submerged in the amniotic fluid of space...



[[MISSION COMPLETE!-&gt;Epilogue]]</tw-passagedata><tw-passagedata pid="487" name="Epilogue" tags="" position="4300,3400" size="100,100">==&gt;&lt;==

##EPILOGUE

&lt;==

The darkness of space. A jet-black darkness. The void of space, like jet black velvet inset with glass beads. It is the outer edge of a small solar system. A little while ago, a small asteroid had been here. Until recently, that is. Now, it’s gone. It was annihilated by a large burst of uncontrollable energy. There isn&#39;t even a trace left by this disturbance. Filling this space is only silence and darkness. 



No, not entirely. 



Something is worming its way within darkness. Something is there, moving stickily and persistently, creeping and squirming, seething with [[malice.-&gt;The Worm]]</tw-passagedata><tw-passagedata pid="488" name="Fighting Spirit" tags="" position="4900,4200" size="100,100">I possess a cyborg-enhanced body. My speed and power should surpass those of my opponent.



...However, the Pirate Boss is strong. I&#39;m lacking something. 



...Zeal I&#39;d have to call it.



At this point, I am clearly losing. From here on, it seems certain my chances of victory have dropped below 50%. It might be better to just abandon the capsule.



[[Abandon the capsule]]

[[Don’t give it up-&gt;Don’t abandon it]]</tw-passagedata><tw-passagedata pid="489" name="Abandon the capsule" tags="" position="4900,4500" size="100,100">I try to abandon the capsule and run, but the Pirate Boss won&#39;t give me the opportunity. However, as luck would have it, my chance comes when my arch-nemesis, the Metroid Mutant, revives. Though the thing appeared to be dead, the Metroid Mutant stirs. The moment arises the instant the Boss notices it.



Now is my chance. In the space of that moment, I escape. I speed towards the ship’s internal dock where a small [[spacecraft-&gt;Escape Now]] is stored.</tw-passagedata><tw-passagedata pid="490" name="A Desperate Fight" tags="" position="4600,3900" size="100,100">The Pirate Boss is strong. With my cyborg-enhanced body, my speed and power seem to exceed his, but I am lacking something. Zeal...that&#39;s what I&#39;d call it.



At this moment, I am definitely losing. From here on, my chances of winning are just under 50%. It might be better to give up recovering the capsule and run for it.



[[Abandon the capsule]]

[[Don’t abandon it]]</tw-passagedata><tw-passagedata pid="491" name="Don’t abandon it" tags="" position="4750,3899" size="100,100">Nevertheless, I continue to fight, unwilling to give up the capsule.



{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(display: &quot;Metroid Mutant Revives&quot;)]

	(else:)[(display: &quot;Skewered&quot;)]

}</tw-passagedata><tw-passagedata pid="492" name="Skewered" tags="GAME-OVER" position="4750,4050" size="100,100">&lt;img src=./images/Skewered.jpg&gt;



The Pirate Boss&#39;s voice trembles with fatigue. “I can’t bring myself to kill a woman...”



No ordinary person can continue fighting with me for such a long time. If he isn’t tired already, he must not be human. However, if he&#39;s a normal person, it&#39;s possible he could be having a heart attack...



The Boss wields the sword with surprising skill, piercing my gut.



&lt;i&gt;Cough!&lt;/i&gt;



A gout of blood spills down my lips. 



I wasn&#39;t able to beat him after all.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="493" name="The Worm" tags="" position="4450,3400" size="100,100">If there was an atmosphere here, that air would have the consistency of tar, and there would be permeated with dread. 



If this place were filled with water, that water would be instantly corrupted and filled with sludge, changing to a color of black and brown pus, an effect that would evoke every kind of physiological repulsion. 



And the thing is alive. Without question, it is alive. Nothing should exist in the void of space almost at absolute zero, but beyond a shadow of a doubt, this thing is [[alive.-&gt;Lurks in the Darkness]]</tw-passagedata><tw-passagedata pid="494" name="Seeking its Nemesis" tags="" position="4750,3400" size="100,100">It is a strong life-form. It has a morbid obsession with life.



And, it wants things.



Blood.(click: &quot;Blood.&quot;)[



Flesh.(click: &quot;Flesh.&quot;)[



Life.(click: &quot;Life.&quot;)[



Consciousness.(click: &quot;Consciousness.&quot;)[



Space.(click: &quot;Space.&quot;)[



Perhaps it even craves love.(click: &quot;love.&quot;)[



But above all, it is seeking its [[nemesis.-&gt;Mysterious Object]]]]]]]]</tw-passagedata><tw-passagedata pid="495" name="Mysterious Object" tags="" position="4900,3400" size="100,100">==&gt;&lt;==

##The New York Times

&lt;==

###Mysterious Object Falls into Austin, Nevada

&lt;i&gt;March 21, 100X, Cosmic Calendar&lt;/i&gt;



Yesterday, a meteorite fell in Austin, Nevada in the early hours of the morning. A considerably large meteor, it was observed over a very wide area. However, when the authorities came to investigate, although they discovered an enormous impact crater, in the end, the meteor itself was never found. 



The rumor from the scientific community is that it is a second incarnation of the Tunguska Meteorite. The Government of the Galactic Federation gave no comment regarding this incident, causing further [[suspicion.-&gt;Mysterious Corpse]]</tw-passagedata><tw-passagedata pid="496" name="Mysterious Corpse" tags="" position="5050,3400" size="100,100">###Mysterious Corpse Found in Area Surrounding Meteorite Impact

A mysterious corpse was discovered at yesterday’s meteorite impact in Austin, Nevada. It was found to be the body of Mr. Terry Gilliam, 45, the owner of a private ranch in Austin. The corpse, which had no external wounds, was wrinkled as all the fluids had been sucked out of it, and had been disfigured to resemble a frail old man.



That same day, Mr. Gilliam, an eyewitness to the meteorite impact, rushed out of his home screaming, “The meteor! The meteor!,” and never returned. 



The authorities speculated whether an unknown pathogen had clung to the meteor, prompting criticism from the neighborhood’s residents.



[[Credits]]</tw-passagedata><tw-passagedata pid="497" name="Lurks in the Darkness" tags="" position="4600,3400" size="100,100">Furthermore, it is not a bacterium. This abnormal life-form leaves behind its offspring through asexual reproduction, but it is a fully developed higher order life-form. It possesses a definite consciousness.



But it is a thing of evil.



Before long, it impulsively inhales a deep breath. It absorbs the dust floating in the surrounding space. In that instant - whoosh! - it seems as though its body has been imbued with light. It may have actually glowed. This is a life-form that can rapidly convert to energy any material its body [[absorbs.-&gt;Seeking its Nemesis]]</tw-passagedata><tw-passagedata pid="498" name="Metroid Lunch" tags="GAME-OVER" position="699,3825" size="100,100">I have no hope of ever escaping the Metroid&#39;s grasp. It quickly sucks away my Energy, leaving my body a lifeless husk.



GAME OVER (click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]</tw-passagedata><tw-passagedata pid="499" name="Fend off the Metroid Mutant" tags="" position="5050,4650" size="100,100">I step forward deliberately, making it easy for the Metroid Mutant to grab me. It latches on with its usual energy sucking attack, and although I take an incredible amount of damage, I am ready for it.



&lt;i&gt;BWEEE!&lt;/i&gt;



I can tell how much of my energy is being drained by the shrill alarm. I am now firmly in the Metroid Mutant&#39;s grasp. But I haven&#39;t tried this strategy before. I attack with the Ice Beam while trapped inside the creature.



&lt;i&gt;GRRSKREEEeEEEeee!&lt;/i&gt;



The Metroid Mutant lets out a skreech of pain. I&#39;ve managed to damage it. I attack once more. The creature can no longer stand the pain and pulls away. In that instant, I fire a Missile right at the thing&#39;s insides. A violent explosion blossoms from within the creature. The beast falls to the floor and stops moving.



It&#39;s over. I took a large amount of damage, but defeated the Metroid Mutant.



However, I wonder if the creature is truly dead...



At any rate, I need to escape from this ship...



I hurry to the docking bay, deciding to escape the ship and then [[destroy it with a missile.-&gt;Mission Complete - Bad Ending]]</tw-passagedata><tw-passagedata pid="500" name="Tourian Gate Opened" tags="" position="175,2125" size="100,100">



With both Key Stones inserted, the large gate slowly begins to rise, shaking dust and small rocks from the walls. It finishes with a dull &lt;i&gt;BOOM&lt;/i&gt; that echoes through the haunted chamber. The way to Mother Brain is open.(set: $GateOpen to 1)



[[Go through the gate-&gt;11]]</tw-passagedata><tw-passagedata pid="501" name="Statue Room Description" tags="" position="424,2125" size="100,100">The next chamber must lead to Mother Brain. However, this room has special Key Stones without which I cannot proceed further South. 



Based on information from the Intelligence Bureau, the Key Stones cannot be collected unless I defeat the bosses in Areas A and B. (if: $KraidGate is 1 and $RidleyGate is 0)[Kraid&#39;s gate is open. I still need to insert (text-color: &quot;purple&quot;)[Ridley&#39;s Key Stone.]](if: $RidleyGate is 1 and $KraidGate is 0)[Ridley&#39;s gate is open. I still need to insert (text-color: &quot;green&quot;)[Kraid&#39;s Key Stone.]]



At the base of the statues are slots where the stones can be inserted. These must have been used by Kraid and Ridley to enter Mother Brain&#39;s lair. The gate could only open if both bosses were present, protecting her from intruders...



(if: $KraidGate is 0 and $items contains &quot;KraidStone&quot;)[Place Kraid&#39;s Key Stone in his statue. (click-replace: &quot;Place Kraid&#39;s Key Stone in his statue.&quot;)[(text-color: &quot;green&quot;)[Kraid&#39;s Key Stone] clicks into place. With a loud rumble, Kraid&#39;s statue shakes as it rises, shedding a cloud of dust. One of the locks on the gate opens with a &lt;i&gt;CLANG&lt;/i&gt;. (set: $KraidGate to 1)(if: $RidleyGate is 1)[(display: &quot;Tourian Gate Opened&quot;)]]]



(if: $RidleyGate is 0 and $items contains &quot;RidleyStone&quot;)[Place Ridley&#39;s Key Stone in his statue. (click-replace: &quot;Place Ridley&#39;s Key Stone in his statue.&quot;)[(text-color: &quot;purple&quot;)[Ridley&#39;s Key Stone] smoothly slides into place. Stone grinds on stone as Ridley&#39;s statue rises, filling the room with a deep growl. The statue triggers a mechanism, and one of the locks squeels open. (set: $RidleyGate to 1)(if: $KraidGate is 1)[(display: &quot;Tourian Gate Opened&quot;)]]]



</tw-passagedata><tw-passagedata pid="502" name="Metroid No Ice Fails 1" tags="" position="850,3825" size="100,100">I fail to escape. Again my energy is sucked away. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



I struggle to escape again...  (click: &quot;I struggle to escape again...  &quot;)[(replace: &quot;...  &quot;)[...]&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Metroid No Ice Fails 2&quot;)]

	(else:)[(display: &quot;Escape to Elevator&quot;)]

}]]</tw-passagedata><tw-passagedata pid="503" name="Metroid No Ice Fails 2" tags="" position="1000,3825" size="100,100">My escape fails again. My energy is draining steadily. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-10 Energy)](set: $energy to $energy - 10)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



I struggle to escape again.  (click: &quot;I struggle to escape again.  &quot;)[(replace: &quot;again.  &quot;)[again.]&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(display: &quot;Metroid No Ice Fails 1&quot;)]

	(else:)[(display: &quot;Escape to Elevator&quot;)]

}]]</tw-passagedata><tw-passagedata pid="504" name="Map Display" tags="" position="954,544" size="100,100">(replace: ?modalhooks)[{

  (css:&quot;

    position: fixed;

    display:block;

    z-index: 1;

    left: 0;

    top: 0;

    width: 100%; /* Full width */

    height: 100%; /* Full height */

    overflow: auto; /* Enable scroll if needed */

    background-color: rgba(0,0,0,0.4);

  &quot;)[

    (css:&quot;

      display:block;

      margin: 15% auto;

      padding: 20px;

      width: 80%;

      border: 1px solid white;

    &quot;)|modal&gt;[

      (css:&quot;float:right&quot;)+(link-repeat:&quot;×&quot;)[(replace: ?modalhooks)[]]

    ]

  ]

}]</tw-passagedata><tw-passagedata pid="505" name="Show Map" tags="" position="704,644" size="100,100">|map&gt;[(display: &quot;Brinstar Map&quot;)]





|modalhooks&gt;[]



|map&gt;[(display: &quot;Brinstar Map&quot;)]</tw-passagedata><tw-passagedata pid="506" name="Brinstar Map" tags="" position="829,544" size="100,100">{

	(set: $Brinstar to (a:

		00,00,00,00,00,00,00,00,00,

		00,35,00,00,00,00,00,00,00,

		00,35,35,36,31,19,00,00,00,

		00,32,33,37,30,18,39,00,00,

		00,28,34,38,29,17,40,00,00,

		00,26,27,00,25,16,00,00,00,

		00,24,23,14,12,13,15,00,00,

		00,00,00,00,6,00,00,00,00,

		00,00,8,7,5,4,00,00,00,

		00,00,9,00,00,3,22,00,00,

		00,00,10,00,00,2,20,21,00,

		00,00,11,00,00,1,00,00,00,

		00,00,00,00,00,00,00,00,00)

	)

}

(font: &quot;Courier&quot;)[

(set: $lineBreak to 10)	(for: each _y, ...(range: 1, $Brinstar&#39;s length))[		(set: $i to it + 1)		(if: $i is $lineBreak) [&lt;br&gt;(set: $lineBreak to it + 9)]		(set: $number to ($i) of $Brinstar)	(if: $Brinstar&#39;s (_y) is 00)[&lt;big&gt;⊠&lt;big&gt;]	(else-if: $Brinstar&#39;s (_y) &lt; 10)[0$number](else:)[$number]]]

(set: $i to 0)</tw-passagedata><tw-passagedata pid="507" name="Old Mapper" tags="footer" position="875,250" size="100,100">(if: $displayMap is 1)[&lt;hr&gt;Map (click: &quot;Map &quot;)[(replace: &quot;Map&quot;)[](display: &quot;Maps&quot;)]]</tw-passagedata><tw-passagedata pid="508" name="Untitled Passage" tags="" position="954,669" size="100,100">(replace: ?sidebar)[&lt;font size = &quot;2&quot;&gt;

(if: $displayStats is 1)[Energy: |SamusEnergy&gt;[$energy]/|SamusMaxEnergy&gt;[$maxEnergy]

Missiles: |SamusMissiles&gt;[$missiles]/|SamusMaxMissiles&gt;[$maxMissiles]



Items:

(if: $items contains &quot;Normal Beam&quot;)[Normal Beam](if: $items contains &quot;Ice Beam&quot;)[Ice Beam](if: $items contains &quot;Wave Beam&quot;)[Wave Beam]

(if: $items contains &quot;Bombs&quot;)[Bombs]

(if: $items contains &quot;Screw Attack&quot;)[Screw Attack]

(if: $items contains &quot;Varia&quot;)[Varia]]

(else:)[]

&lt;/font&gt;]</tw-passagedata><tw-passagedata pid="509" name="Sidebar" tags="footer" position="750,250" size="100,100">(replace: ?sidebar)[&lt;font size=&quot;5&quot;&gt;(if: $displayStats is 1)[Energy: |SamusEnergy&gt;[$energy]/|SamusMaxEnergy&gt;[$maxEnergy]

(if: $maxMissiles &gt; 0)[Missiles: |SamusMissiles&gt;[$missiles]/|SamusMaxMissiles&gt;[$maxMissiles]]



Items:

(if: $items contains &quot;Normal Beam&quot;)[Normal Beam](if: $items contains &quot;Ice Beam&quot;)[Ice Beam](if: $items contains &quot;Wave Beam&quot;)[Wave Beam]

(if: $items contains &quot;Bombs&quot;)[Bombs]

(if: $items contains &quot;Screw Attack&quot;)[Screw Attack]

(if: $items contains &quot;Varia&quot;)[Varia]]

(else:)[]&lt;/font&gt;]</tw-passagedata><tw-passagedata pid="510" name="Game Start" tags="" position="1300,249" size="100,100">{

	(set: $maxEnergy to 30, 

	$energy to $maxEnergy, 

	$maxMissiles to 0,

	$missiles to $maxMissiles,

	$items to (a: &quot;Normal Beam&quot;),

	$missilePods to (a: &quot;0&quot;),

	$energyPacks to (a: &quot;0&quot;),

	$startRoom to &quot;01&quot;,

	$combat to 1,

	$Beam to &quot;Normal Beam&quot;,

	$Bombs to &quot;&quot;,

	$Varia to &quot;&quot;,

	$ScrewAttack to &quot;&quot;,

	$MotherBrainHealth to 10,

	$combat to 1,

	$displayStats to 1,

	$location to &quot;Brinstar&quot;,

	$displayMap to 1)

	(replace: ?Beam)[|Beam&gt;[$Beam]]

}

(go-to: &quot;01&quot;)</tw-passagedata><tw-passagedata pid="511" name="Mapping Test" tags="" position="829,674" size="100,100">{

	(set: $Brinstar to (a:

		00,00,00,00,00,00,00,00,00,

		00,35,00,00,00,00,00,00,00,

		00,35,35,36,31,19,00,00,00,

		00,32,33,37,30,18,39,00,00,

		00,28,34,38,29,17,40,00,00,

		00,26,27,00,25,16,00,00,00,

		00,24,23,14,12,13,15,00,00,

		00,00,00,00,6,00,00,00,00,

		00,00,8,7,5,4,00,00,00,

		00,00,9,00,00,3,22,00,00,

		00,00,10,00,00,2,20,21,00,

		00,00,11,00,00,1,00,00,00,

		00,00,00,00,00,00,00,00,00)

	)

}

(font: &quot;Courier&quot;)[

(set: $lineBreak to 10)	(for: each _y, ...(range: 1, $Brinstar&#39;s length))[		(set: $i to it + 1)		(if: $i is $lineBreak) [&lt;br&gt;(set: $lineBreak to it + 9)]		(set: $number to ($i) of $Brinstar)(set: $string to (text: $number)) (if: (passage: )&#39;s name is $string)[(text-color: &quot;blue&quot;)[$number]]	(else-if: (history:) contains $string)[$number]			(else:)[&lt;big&gt;⊠&lt;big&gt;]]	]

(set: $i to 0)</tw-passagedata><tw-passagedata pid="512" name="Maps Old" tags="" position="704,534" size="100,100">{

	(set: $Brinstar to (a:

		00,00,00,00,00,00,00,00,00,

		00,35,00,00,00,00,00,00,00,

		00,35,35,36,31,19,00,00,00,

		00,32,33,37,30,18,39,00,00,

		00,28,34,38,29,17,40,00,00,

		00,26,27,00,25,16,00,00,00,

		00,24,23,14,12,13,15,00,00,

		00,00,00,00,06,00,00,00,00,

		00,00,08,07,05,04,00,00,00,

		00,00,09,00,00,03,22,00,00,

		00,00,10,00,00,02,20,21,00,

		00,00,11,00,00,01,00,00,00,

		00,00,00,00,00,00,00,00,00)

	)

}

(font: &quot;Courier&quot;)[

(set: $lineBreak to 10)	(for: each _y, ...(range: 1, $Brinstar&#39;s length))[		(set: $i to it + 1)		(if: $i is $lineBreak)[&lt;br&gt;(set: $lineBreak to it + 9)]		(set: $number to ($i) of $Brinstar)		(if: $Brinstar&#39;s (_y) &lt; 10)[(set: $string to &quot;0&quot; + (text: $number))]	(else:)[(set: $string to (text: $number))]	 		(if: (passage: )&#39;s name is $string)[(text-color: &quot;blue&quot;)[$string]]	(else-if: (history:) contains $string)[$string]			(else:)[&lt;big&gt;⊠&lt;big&gt;]]	]

(set: $i to 0)</tw-passagedata><tw-passagedata pid="513" name="Debug Room Brinstar" tags="DEBUG-ROOM" position="1343,2564" size="100,100">Weclome to the Debug Room! Select your quest!



[[Brinstar Combat Test]]

[[Norfair Combat Test]]

[[Tourian Test]]

To seek the Holy Grail

Break Energy (click: &quot;Break Energy&quot;)[(replace: ?SamusEnergy)[|SamusEnergy&gt;[50]]]



(set: $energy to 30, $maxEnergy to 30, $missiles to 0, $items to (a: &quot;Normal Beam&quot;), $startRoom to &quot;Debug Room&quot;, $combat to 1, $MotherBrainHealth to 10)



{

	(set: $maxEnergy to 30, 

	$energy to $maxEnergy, 

	$maxMissiles to 0,

	$missiles to $maxMissiles,

	$items to (a: &quot;Normal Beam&quot;),

	$missilePods to (a: &quot;0&quot;),

	$energyPacks to (a: &quot;0&quot;),

	$startRoom to &quot;01&quot;,

	$combat to 1,

	$Beam to &quot;Normal Beam&quot;,

	$Bombs to &quot;&quot;,

	$Varia to &quot;&quot;,

	$ScrewAttack to &quot;&quot;,

	$MotherBrainHealth to 10,

	$combat to 1,

	$displayStats to 1,

	$location to &quot;Brinstar&quot;,

	$displayMap to 1)

	(replace: ?Beam)[|Beam&gt;[$Beam]]

}</tw-passagedata><tw-passagedata pid="514" name="DEBUG ROOM NORFAIR" tags="DEBUG-ROOM" position="3224,225" size="100,100">Weclome to the Debug Room! Select your quest!



[[Brinstar Combat Test]]

[[Norfair Combat Test]]

[[Tourian Test]]

[[To seek the Holy Grail]]

Break Energy (click: &quot;Break Energy&quot;)[(replace: ?SamusEnergy)[|SamusEnergy&gt;[50]]]



(set: $energy to 30, $maxEnergy to 30, $missiles to 0, $items to (a: &quot;Normal Beam&quot;), $startRoom to &quot;Debug Room&quot;, $combat to 1, $MotherBrainHealth to 10)



{

	(set: $maxEnergy to 30, 

	$energy to $maxEnergy, 

	$maxMissiles to 0,

	$missiles to $maxMissiles,

	$items to (a: &quot;Normal Beam&quot;),

	$missilePods to (a: &quot;0&quot;),

	$energyPacks to (a: &quot;0&quot;),

	$startRoom to &quot;01&quot;,

	$combat to 1,

	$Beam to &quot;Normal Beam&quot;,

	$Bombs to &quot;&quot;,

	$Varia to &quot;&quot;,

	$ScrewAttack to &quot;&quot;,

	$MotherBrainHealth to 10,

	$combat to 1,

	$displayStats to 1,

	$location to &quot;Brinstar&quot;,

	$displayMap to 1)

	(replace: ?Beam)[|Beam&gt;[$Beam]]

}</tw-passagedata><tw-passagedata pid="515" name="Grab Sword" tags="" position="4900,4050" size="100,100">&lt;img src=./images/SamusSword.jpg&gt;



The Boss glances at me, raises an eyebrow in surprise, then stands slowly and takes two swords hanging on the wall. He tosses one of the swords to me. He wants to fight.



I get the drift and accept the sword, then remove the Ice Beam from my arm and toss it aside.



The Boss drops the cigarette he&#39;d been smoking and stamps it out with the sole of his boot. Then he mutters quietly, “Let’s do this,” and rushes at me.(click: &quot;rushes at me.&quot;)[

{

	(set: $random to (random: 1,3))

	(if: $random is 3)[(go-to: &quot;Metroid Mutant Revives&quot;)]

	(else:)[(go-to: &quot;Fighting Spirit&quot;)]

}]</tw-passagedata><tw-passagedata pid="516" name="Grab Sword 2" tags="" position="4750,3750" size="100,100">&lt;img src=./images/SamusSword.jpg&gt;



The Boss tosses aside his gun, takes two swords hanging on the wall, and throws one of them to me. I catch the sword, and getting the gist of his actions, remove my Ice Beam.



“Prepare yourself, little girl. You won’t get out of here alive.”

 

The battle between me and the Boss begins.(click: &quot;The battle between me and the Boss begins.&quot;)[



{

	(set: $random to (random: 1,3))

	(if: $random is 2)[(go-to: &quot;Metroid Mutant Revives&quot;)]

	(else:)[(go-to: &quot;A Desperate Fight&quot;)]

}]</tw-passagedata><tw-passagedata pid="517" name="New Mapper" tags="" position="1003,251" size="100,100">(if: $displayMap is 1)[		(if: $location is &quot;Brinstar&quot;)[(if: $items contains &quot;BrinstarMap&quot;)[&lt;hr&gt;&lt;img src=./images/Brinstar2.jpg&gt;]]	(if: $location is &quot;Norfair&quot;)[(if: $items contains &quot;NorfairMap&quot;)[&lt;hr&gt;&lt;img src=./images/Norfair2.jpg&gt;]]]</tw-passagedata><tw-passagedata pid="518" name="38" tags="Item-Room Missiles" position="451,1152" size="100,100">###Room A-38

My Missiles slam into the locked Red Door. After firing 2 rounds, the door collapses noisily. (text-color: red)[(-2 Missiles.)](set: $missiles to $missiles - 2)



The door brings down a mass of rock with it, raising a thick shroud of dust. The room dims, but finally my field of vision into the next chamber clears. I enter the room.



A statue of a strange monster has been placed in the center of the room, and there is a plate at its feet. On the plate is a description of how to access the hidden rooms:

(display: &quot;Secret Passage Instructions&quot;)

The statue cradles a Missile Pod in its hands. ((text-color: red)[Missile Pod (2)] acquired.(set: $maxMissiles to $maxMissiles + 2, $missiles to $missiles + 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]](replace: ?SamusMaxMissiles)[|SamusMaxMissiles&gt;[$maxMissiles]]Maximum Missiles increased to $maxMissiles.) 



I store the above information in my computer. There are no hidden rooms here. [[I retrace my steps.-&gt;37]]</tw-passagedata><tw-passagedata pid="519" name="63" tags="Item-Room" position="2402,1003" size="100,100">###Room B-63

(if: (history:) contains &quot;63&quot;)[](else:)[I fire Missiles at the Red Door. The Red Door takes 2 Missiles, and &lt;i&gt;(text-style: &quot;rumble&quot;)[KABOOM]&lt;/i&gt;, it opens. (set: $missiles to it - 2)(replace: ?SamusMissiles)[|SamusMissiles&gt;[$missiles]] I move forward and take a look.]



In the center of the room stands the figure of a strange creature fashioned from stone and perhaps modeled after one of the life-forms of this asteroid. An iron plate is embedded at its feet. On the plate is written information about the hidden rooms.



&lt;b&gt;Attention Crew: Reminders for Entering Secret Rooms

&lt;i&gt;Room B-61:&lt;/b&gt; The Ice Beam can be used to reach high places.

&lt;b&gt;Room B-67:&lt;/b&gt; I&#39;ve hidden the gate in the ceiling; check the &lt;b&gt;Room&lt;/b&gt;.

&lt;b&gt;Room B-74:&lt;/b&gt; The wall is too weak for a ladder, so create your own.&lt;/i&gt;



I store this information into my computer.



Beyond this, there is nothing else in the room. [[I go back South to Room B-58.-&gt;58]]</tw-passagedata><tw-passagedata pid="520" name="More Efficient Mapper" tags="" position="1134,376" size="100,100">{

	(if: $location is &quot;Brinstar&quot;)[(set: $Map to (a:

		109,

		35,106,

		35,35,36,31,19,102,

		32,33,37,30,18,39,00,

		28,34,38,29,17,40,00,

		26,27,00,25,16,102,

		24,23,14,12,13,15,00,

		103,06,103,

		00,08,07,05,04,102,

		00,09,102,03,22,00,

		00,10,102,02,20,21,

		00,11,102,01,102,

		109)

	)]

	

	(if: $location is &quot;Norfair&quot;)[(set: $Map to (a:

		109,

		79,106,

		78,77,105,

		75,76,105,

		74,73,105,

		69,68,72,62,45,102,

		70,67,71,60,43,56,55,

		65,66,63,59,41,53,54,

		64,61,58,57,42,50,51,

		00,52,48,46,44,47,49,

		109)

	)]

	

	(if: $location is &quot;Tourian&quot;)[(set: $Map to (a:

		109,

		103,89,90,

		00,84,85,88,91,

		00,83,86,87,92,

		00,82,102,93,

		00,80,81,102,94,

		103,00,95,

		109

		)

	)]

}



(font: &quot;Courier&quot;)[(set: $lineBreak to 8)	(for: each _y, ...(range: 1, $Map&#39;s length))[		(set: $i to it + 1)	 (if: $i is $lineBreak)[&lt;big&gt;⊠&lt;/big&gt;&lt;br&gt;(set: $lineBreak to it + 7)&lt;big&gt;⊠ &lt;/big&gt;]	(set: $number to ($i) of $Map)	(if: $Map&#39;s (_y) &lt; 10)[(set: $string to &quot;0&quot; + (text: $number))] 	(else:)[(set: $string to (text: $number))] 	 	(if: $number is &quot;109&quot;)[&lt;big&gt;⊠ ⊠ ⊠ ⊠ ⊠ ⊠ ⊠ ⊠ ⊠ &lt;/big&gt;]		(else-if: $number is &quot;105&quot;)[&lt;big&gt;⊠ ⊠ ⊠ ⊠ ⊠ &lt;/big&gt;(set: $i to it + 5)]	(else-if: $number is &quot;109&quot;)[&lt;big&gt;⊠ ⊠ ⊠ &lt;/big&gt;(set: $i to it + 3)]	(else-if: $number is &quot;102&quot;)[&lt;big&gt;⊠ ⊠ &lt;/big&gt;(set: $i to it + 2)]	(else-if: (passage: )&#39;s name is $string)[(text-color: &quot;blue&quot;)[$string]]	(else-if: (history:) contains $string)[$string]			(else:)[&lt;big&gt;⊠&lt;/big&gt;]]	(set: $i to 0)]</tw-passagedata><tw-passagedata pid="521" name="ME Mapper" tags="" position="1137,252" size="100,100">(if: $displayMap is 1)[&lt;hr&gt;Map (click: &quot;Map &quot;)[(replace: &quot;Map&quot;)[](display: &quot;More Efficient Mapper&quot;)]]</tw-passagedata><tw-passagedata pid="522" name="Maps" tags="" position="875,379" size="100,100">{

	(if: $location is &quot;Brinstar&quot;)[(set: $Map to (a:

		99,00,00,00,00,00,00,

		35,35,36,31,19,00,00,

		32,33,37,30,18,39,00,

		28,34,38,29,17,40,00,

		26,27,00,25,16,00,00,

		24,23,14,12,13,15,00,

		00,00,00,06,00,00,00,

		00,08,07,05,04,00,00,

		00,09,00,00,03,22,00,

		00,10,00,00,02,20,21,

		00,11,00,00,01,00,00)

	)]

	

	(if: $location is &quot;Norfair&quot;)[(set: $Map to (a:

		79,00,00,00,00,00,00,

		78,77,00,00,00,00,00,

		75,76,00,00,00,00,00,

		74,73,00,00,00,00,00,

		69,68,72,62,45,00,00,

		70,67,71,60,43,56,55,

		65,66,63,59,41,53,54,

		64,61,58,57,42,50,51,

		00,52,48,46,44,47,49)

	)]

	

	(if: $location is &quot;Tourian&quot;)[(set: $Map to (a:

		00,00,00,00,00,00,00,

		00,00,00,00,89,90,00,

		00,00,84,85,88,91,00,

		00,00,83,86,87,92,00,

		00,00,82,00,00,93,00,

		00,80,81,00,00,94,00,

		00,00,00,00,00,95,00,

		00,00,00,00,00,00,00)

	)]

}

(font: &quot;Courier&quot;)[&lt;big&gt;┏━━━━━━━━━━━┓&lt;br&gt;┃ &lt;/big&gt;(set: $lineBreak to 8)	(for: each _y, ...(range: 1, $Map&#39;s length))[		(set: $i to it + 1)	 (if: $i is $lineBreak)[&lt;big&gt;┃&lt;/big&gt;&lt;br&gt;(set: $lineBreak to it + 7)&lt;big&gt;┃ &lt;/big&gt;]	(set: $number to ($i) of $Map)	(if: $Map&#39;s (_y) &lt; 10)[(set: $string to &quot;0&quot; + (text: $number))]	(else:)[(set: $string to (text: $number))]	 		(if: (passage: )&#39;s name is $string)[(text-color: &quot;blue&quot;)[$string]]	(else-if: $Map&#39;s (_y) is 0)[&lt;big&gt;⊠&lt;/big&gt;]	(else-if: (history:) contains $string)[$string]			(else:)[&lt;big&gt;▉&lt;/big&gt;]]	(set: $i to 0)┃&lt;br&gt;&lt;big&gt;┗━━━━━━━━━━━┛&lt;/big&gt;]</tw-passagedata><tw-passagedata pid="523" name="Instructions" tags="" position="175,377" size="100,100">###Instructions



* Explore the labyrinthine corridors of Zebes to find the Mother Brain and retrieve the Metroid Capsule.

* Fight your way through the monsters infesting the maze...but sometimes it is better to run than fight!

* Combat results are randomly generated. Different weapons will increase your odds of winning and change the types of power-ups enemies leave behind.

* Zebes is riddled with secret passages. Use your mouse to locate hidden links within the text. Some can be tricky to find!

* You can save your game in Elevator Rooms. The game will also automatically save your progress in other points.

The game tracks your progress. However, the Map may load a bit more slowly on some computers than others.



[[Back-&gt;Title Screen]]</tw-passagedata><tw-passagedata pid="524" name="Dessgeega Normal Beam Damage" tags="" position="4001,2450" size="100,100">I take a tremendous amount of damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-6 Energy)](set: $energy to $energy - 6)](else:)[(text-color: red)[(-8 Energy)](set: $energy to $energy - 8)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Without a chance to select another weapon, my only hope is to escape.

Run  (click: &quot;Run  &quot;)[(replace: &quot;Run  &quot;)[Run]&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Escape Dessgeega&quot;)]

	(else:)[(display: &quot;Escape Dessgeega Fails&quot;)]

}]]</tw-passagedata><tw-passagedata pid="525" name="Escape Dessgeega" tags="Combat-Ended" position="4151,2450" size="100,100">I somehow manage to escape the Dessgeega. I fake going to the right, but fire my boosters at the last minute and quickly dash behind it. However, in the process, I am dealt a parting blow. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



(link:&quot;The battle is over.&quot;)[(set: $combat to 0)(go-to: (history: )&#39;s last)(set: $displayMap to 1)]]</tw-passagedata><tw-passagedata pid="526" name="Escape Dessgeega Fails" tags="" position="4301,2452" size="100,100">My attempt to escape the Dessgeega fails. I try to fake a move to the left, and suddenly turn right, but the Dessgeega is too fast and blocks my way. I take damage. (if: $items contains &quot;Varia&quot;)[(text-color: red)[(-3 Energy)](set: $energy to $energy - 3)](else:)[(text-color: red)[(-4 Energy)](set: $energy to $energy - 4)](replace: ?SamusEnergy)[|SamusEnergy&gt;[$energy]](if: $energy &lt; 1)[(set: $energy to 0)&lt;hr&gt;GAME OVER(click: &quot;GAME OVER&quot;)[(go-to: &quot;GAME OVER&quot;)]](else:)[



Without a chance to select another weapon, my only hope is to escape.

Run  (click: &quot;Run  &quot;)[(replace: &quot;Run  &quot;)[Run]&lt;hr&gt;

{

	(set: $random to (random: 1,3))

	(if: $random is 1)[(display: &quot;Escape Dessgeega&quot;)]

	(else:)[(display: &quot;Escape Dessgeega Fails&quot;)]

}]]</tw-passagedata><tw-passagedata pid="527" name="Wave Beam Hits Sidehopper" tags="" position="2302,2653" size="100,100">Attack successful! The enemy&#39;s movements are quick, and although it gives you some trouble, you are somehow able to beat it. The creature screams a single shriek through the air.



{

	(set: $random to (random: 1,6))

	(if: $random is 2)[(display: &quot;Nothing&quot;)]

	(else-if: $random is 1)[(display: &quot;Missile&quot;)]

	(else-if: $random is 3)[(display: &quot;Missile&quot;)]

	(else:)[(display: &quot;Medium Energy Ball&quot;)]

}</tw-passagedata><tw-passagedata pid="528" name="Norfair Hints" tags="" position="3184,1075" size="100,100">&lt;b&gt;Attention Crew: Reminders for Entering Secret Rooms



&lt;i&gt;Room B-61:&lt;/b&gt; The Ice Beam can be used to reach high places.

&lt;b&gt;Room B-67:&lt;/b&gt; I&#39;ve hidden the gate in the ceiling; check the &lt;b&gt;Room&lt;/b&gt;.

&lt;b&gt;Room B-74:&lt;/b&gt; The wall is too weak for a ladder, so create your own.&lt;/i&gt;</tw-passagedata><tw-passagedata pid="529" name="Cut to Ribbons" tags="" position="854,4725" size="100,100">Laser beams rain down on me from above

.

lasers slices through my armor</tw-passagedata></tw-storydata>



<script title="Twine engine code" data-main="harlowe">"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){/**

 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.

 * Released under MIT license, http://github.com/requirejs/almond/LICENSE

 */

var requirejs,require,define;!function(e){function t(e,t){return v.call(e,t)}function n(e,t){var n,r,i,o,a,s,u,c,l,f,p,d,h=t&&t.split("/"),m=g.map,y=m&&m["*"]||{};if(e){for(e=e.split("/"),a=e.length-1,g.nodeIdCompat&&w.test(e[a])&&(e[a]=e[a].replace(w,"")),"."===e[0].charAt(0)&&h&&(d=h.slice(0,h.length-1),e=d.concat(e)),l=0;l<e.length;l++)if(p=e[l],"."===p)e.splice(l,1),l-=1;else if(".."===p){if(0===l||1===l&&".."===e[2]||".."===e[l-1])continue;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}if((h||y)&&m){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),h)for(f=h.length;f>0;f-=1)if(i=m[h.slice(0,f).join("/")],i&&(i=i[r])){o=i,s=l;break}if(o)break;!u&&y&&y[r]&&(u=y[r],c=l)}!o&&u&&(o=u,s=c),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function r(t,n){return function(){var r=b.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),f.apply(e,r.concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function o(e){return function(t){h[e]=t}}function a(n){if(t(m,n)){var r=m[n];delete m[n],y[n]=!0,l.apply(e,r)}if(!t(h,n)&&!t(y,n))throw new Error("No "+n);return h[n]}function s(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return e?s(e):[]}function c(e){return function(){return g&&g.config&&g.config[e]||{}}}var l,f,p,d,h={},m={},g={},y={},v=Object.prototype.hasOwnProperty,b=[].slice,w=/\.js$/;p=function(e,t){var r,o=s(e),u=o[0],c=t[1];return e=o[1],u&&(u=n(u,c),r=a(u)),u?e=r&&r.normalize?r.normalize(e,i(c)):n(e,c):(e=n(e,c),o=s(e),u=o[0],e=o[1],u&&(r=a(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:r}},d={require:function(e){return r(e)},exports:function(e){var t=h[e];return"undefined"!=typeof t?t:h[e]={}},module:function(e){return{id:e,uri:"",exports:h[e],config:c(e)}}},l=function(n,i,s,c){var l,f,g,v,b,w,x,T=[],S="undefined"==typeof s?"undefined":_typeof(s);if(c=c||n,w=u(c),"undefined"===S||"function"===S){for(i=!i.length&&s.length?["require","exports","module"]:i,b=0;b<i.length;b+=1)if(v=p(i[b],w),f=v.f,"require"===f)T[b]=d.require(n);else if("exports"===f)T[b]=d.exports(n),x=!0;else if("module"===f)l=T[b]=d.module(n);else if(t(h,f)||t(m,f)||t(y,f))T[b]=a(f);else{if(!v.p)throw new Error(n+" missing "+f);v.p.load(v.n,r(c,!0),o(f),{}),T[b]=h[f]}g=s?s.apply(h[n],T):void 0,n&&(l&&l.exports!==e&&l.exports!==h[n]?h[n]=l.exports:g===e&&x||(h[n]=g))}else n&&(h[n]=s)},requirejs=require=f=function(t,n,r,i,o){if("string"==typeof t)return d[t]?d[t](n):a(p(t,u(n)).f);if(!t.splice){if(g=t,g.deps&&f(g.deps,g.callback),!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},"function"==typeof r&&(r=i,i=o),i?l(e,t,n,r):setTimeout(function(){l(e,t,n,r)},4),f},f.config=function(e){return f(e)},requirejs._defined=h,define=function(e,n,r){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");n.splice||(r=n,n=[]),t(h,e)||t(m,e)||(m[e]=[e,n,r])},define.amd={jQuery:!0}}(),define("almond",function(){}),function(e,t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e,t){t=t||te;var n=t.createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function r(e){var t=!!e&&"length"in e&&e.length,n=he.type(e);return"function"===n||he.isWindow(e)?!1:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){return he.isFunction(t)?he.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?he.grep(e,function(e){return e===t!==n}):"string"!=typeof t?he.grep(e,function(e){return ae.call(t,e)>-1!==n}):Oe.test(t)?he.filter(t,e,n):(t=he.filter(t,e),he.grep(e,function(e){return ae.call(t,e)>-1!==n&&1===e.nodeType}))}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function a(e){var t={};return he.each(e.match(Ne)||[],function(e,n){t[n]=!0}),t}function s(e){return e}function u(e){throw e}function c(e,t,n){var r;try{e&&he.isFunction(r=e.promise)?r.call(e).done(t).fail(n):e&&he.isFunction(r=e.then)?r.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}function l(){te.removeEventListener("DOMContentLoaded",l),e.removeEventListener("load",l),he.ready()}function f(){this.expando=he.expando+f.uid++}function p(e){return"true"===e?!0:"false"===e?!1:"null"===e?null:e===+e+""?+e:De.test(e)?JSON.parse(e):e}function d(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(qe,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n=p(n)}catch(e){}Fe.set(e,t,n)}else n=void 0;return n}function h(e,t,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return he.css(e,t,"")},u=s(),c=n&&n[3]||(he.cssNumber[t]?"":"px"),l=(he.cssNumber[t]||"px"!==c&&+u)&&He.exec(he.css(e,t));if(l&&l[3]!==c){c=c||l[3],n=n||[],l=+u||1;do o=o||".5",l/=o,he.style(e,t,l+c);while(o!==(o=s()/u)&&1!==o&&--a)}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}function m(e){var t,n=e.ownerDocument,r=e.nodeName,i=We[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=he.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),We[r]=i,i)}function g(e,t){for(var n,r,i=[],o=0,a=e.length;a>o;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=Le.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Be(r)&&(i[o]=m(r))):"none"!==n&&(i[o]="none",Le.set(r,"display",n)));for(o=0;a>o;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function y(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&he.nodeName(e,t)?he.merge([e],n):n}function v(e,t){for(var n=0,r=e.length;r>n;n++)Le.set(e[n],"globalEval",!t||Le.get(t[n],"globalEval"))}function b(e,t,n,r,i){for(var o,a,s,u,c,l,f=t.createDocumentFragment(),p=[],d=0,h=e.length;h>d;d++)if(o=e[d],o||0===o)if("object"===he.type(o))he.merge(p,o.nodeType?[o]:o);else if(Je.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(Ue.exec(o)||["",""])[1].toLowerCase(),u=Xe[s]||Xe._default,a.innerHTML=u[1]+he.htmlPrefilter(o)+u[2],l=u[0];l--;)a=a.lastChild;he.merge(p,a.childNodes),a=f.firstChild,a.textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&he.inArray(o,r)>-1)i&&i.push(o);else if(c=he.contains(o.ownerDocument,o),a=y(f.appendChild(o),"script"),c&&v(a),n)for(l=0;o=a[l++];)Ge.test(o.type||"")&&n.push(o);return f}function w(){return!0}function x(){return!1}function T(){try{return te.activeElement}catch(e){}}function S(e,t,n,r,i,o){var a,s;if("object"===("undefined"==typeof t?"undefined":_typeof(t))){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)S(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=x;else if(!i)return e;return 1===o&&(a=i,i=function(e){return he().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=he.guid++)),e.each(function(){he.event.add(this,t,i,r,n)})}function O(e,t){return he.nodeName(e,"table")&&he.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function j(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function k(e){var t=rt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function C(e,t){var n,r,i,o,a,s,u,c;if(1===t.nodeType){if(Le.hasData(e)&&(o=Le.access(e),a=Le.set(t,o),c=o.events)){delete a.handle,a.events={};for(i in c)for(n=0,r=c[i].length;r>n;n++)he.event.add(t,i,c[i][n])}Fe.hasData(e)&&(s=Fe.access(e),u=he.extend({},s),Fe.set(t,u))}}function A(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ze.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function E(e,t,r,i){t=ie.apply([],t);var o,a,s,u,c,l,f=0,p=e.length,d=p-1,h=t[0],m=he.isFunction(h);if(m||p>1&&"string"==typeof h&&!pe.checkClone&&nt.test(h))return e.each(function(n){var o=e.eq(n);m&&(t[0]=h.call(this,n,o.html())),E(o,t,r,i)});if(p&&(o=b(t,e[0].ownerDocument,!1,e,i),a=o.firstChild,1===o.childNodes.length&&(o=a),a||i)){for(s=he.map(y(o,"script"),j),u=s.length;p>f;f++)c=o,f!==d&&(c=he.clone(c,!0,!0),u&&he.merge(s,y(c,"script"))),r.call(e[f],c,f);if(u)for(l=s[s.length-1].ownerDocument,he.map(s,k),f=0;u>f;f++)c=s[f],Ge.test(c.type||"")&&!Le.access(c,"globalEval")&&he.contains(l,c)&&(c.src?he._evalUrl&&he._evalUrl(c.src):n(c.textContent.replace(it,""),l))}return e}function N(e,t,n){for(var r,i=t?he.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||he.cleanData(y(r)),r.parentNode&&(n&&he.contains(r.ownerDocument,r)&&v(y(r,"script")),r.parentNode.removeChild(r));return e}function _(e,t,n){var r,i,o,a,s=e.style;return n=n||st(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||he.contains(e.ownerDocument,e)||(a=he.style(e,t)),!pe.pixelMarginRight()&&at.test(a)&&ot.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function P(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function I(e){if(e in pt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=ft.length;n--;)if(e=ft[n]+t,e in pt)return e}function M(e,t,n){var r=He.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function L(e,t,n,r,i){var o,a=0;for(o=n===(r?"border":"content")?4:"width"===t?1:0;4>o;o+=2)"margin"===n&&(a+=he.css(e,n+$e[o],!0,i)),r?("content"===n&&(a-=he.css(e,"padding"+$e[o],!0,i)),"margin"!==n&&(a-=he.css(e,"border"+$e[o]+"Width",!0,i))):(a+=he.css(e,"padding"+$e[o],!0,i),"padding"!==n&&(a+=he.css(e,"border"+$e[o]+"Width",!0,i)));return a}function F(e,t,n){var r,i=!0,o=st(e),a="border-box"===he.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(r=e.getBoundingClientRect()[t]),0>=r||null==r){if(r=_(e,t,o),(0>r||null==r)&&(r=e.style[t]),at.test(r))return r;i=a&&(pe.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+L(e,t,n||(a?"border":"content"),i,o)+"px"}function D(e,t,n,r,i){return new D.prototype.init(e,t,n,r,i)}function q(){ht&&(e.requestAnimationFrame(q),he.fx.tick())}function R(){return e.setTimeout(function(){dt=void 0}),dt=he.now()}function H(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=$e[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function $(e,t,n){for(var r,i=(W.tweeners[t]||[]).concat(W.tweeners["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function B(e,t,n){var r,i,o,a,s,u,c,l,f="width"in t||"height"in t,p=this,d={},h=e.style,m=e.nodeType&&Be(e),y=Le.get(e,"fxshow");n.queue||(a=he._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,he.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],mt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;m=!0}d[r]=y&&y[r]||he.style(e,r)}if(u=!he.isEmptyObject(t),u||!he.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=y&&y.display,null==c&&(c=Le.get(e,"display")),l=he.css(e,"display"),"none"===l&&(c?l=c:(g([e],!0),c=e.style.display||c,l=he.css(e,"display"),g([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===he.css(e,"float")&&(u||(p.done(function(){h.display=c}),null==c&&(l=h.display,c="none"===l?"":l)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(y?"hidden"in y&&(m=y.hidden):y=Le.access(e,"fxshow",{display:c}),o&&(y.hidden=!m),m&&g([e],!0),p.done(function(){m||g([e]),Le.remove(e,"fxshow");for(r in d)he.style(e,r,d[r])})),u=$(m?y[r]:0,r,p),r in y||(y[r]=u.start,m&&(u.end=u.start,u.start=0))}}function V(e,t){var n,r,i,o,a;for(n in e)if(r=he.camelCase(n),i=t[r],o=e[n],he.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=he.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function W(e,t,n){var r,i,o=0,a=W.prefilters.length,s=he.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=dt||R(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,u=c.tweens.length;u>a;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),1>o&&u?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:he.extend({},t),opts:he.extend(!0,{specialEasing:{},easing:he.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||R(),duration:n.duration,tweens:[],createTween:function(t,n){var r=he.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(V(l,c.opts.specialEasing);a>o;o++)if(r=W.prefilters[o].call(c,e,l,c.opts))return he.isFunction(r.stop)&&(he._queueHooks(c.elem,c.opts.queue).stop=he.proxy(r.stop,r)),r;return he.map(l,$,c),he.isFunction(c.opts.start)&&c.opts.start.call(e,c),he.fx.timer(he.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function z(e){var t=e.match(Ne)||[];return t.join(" ")}function U(e){return e.getAttribute&&e.getAttribute("class")||""}function G(e,t,n,r){var i;if(he.isArray(t))he.each(t,function(t,i){n||kt.test(e)?r(e,i):G(e+"["+("object"===("undefined"==typeof i?"undefined":_typeof(i))&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==he.type(t))r(e,t);else for(i in t)G(e+"["+i+"]",t[i],n,r)}function X(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Ne)||[];if(he.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function J(e,t,n,r){function i(s){var u;return o[s]=!0,he.each(e[s]||[],function(e,s){var c=s(t,n,r);return"string"!=typeof c||a||o[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),i(c),!1)}),u}var o={},a=e===qt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function Y(e,t){var n,r,i=he.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&he.extend(!0,e,r),e}function Z(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function Q(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[i]:c[i]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function K(e){return he.isWindow(e)?e:9===e.nodeType&&e.defaultView}var ee=[],te=e.document,ne=Object.getPrototypeOf,re=ee.slice,ie=ee.concat,oe=ee.push,ae=ee.indexOf,se={},ue=se.toString,ce=se.hasOwnProperty,le=ce.toString,fe=le.call(Object),pe={},de="3.1.1",he=function e(t,n){return new e.fn.init(t,n)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ge=/^-ms-/,ye=/-([a-z])/g,ve=function(e,t){return t.toUpperCase()};he.fn=he.prototype={jquery:de,constructor:he,length:0,toArray:function(){return re.call(this)},get:function(e){return null==e?re.call(this):0>e?this[e+this.length]:this[e]},pushStack:function(e){var t=he.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return he.each(this,e)},map:function(e){return this.pushStack(he.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:oe,sort:ee.sort,splice:ee.splice},he.extend=he.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"===("undefined"==typeof a?"undefined":_typeof(a))||he.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(c&&r&&(he.isPlainObject(r)||(i=he.isArray(r)))?(i?(i=!1,o=n&&he.isArray(n)?n:[]):o=n&&he.isPlainObject(n)?n:{},a[t]=he.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},he.extend({expando:"jQuery"+(de+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===he.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=he.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return e&&"[object Object]"===ue.call(e)?(t=ne(e))?(n=ce.call(t,"constructor")&&t.constructor,"function"==typeof n&&le.call(n)===fe):!0:!1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e?se[ue.call(e)]||"object":"undefined"==typeof e?"undefined":_typeof(e)},globalEval:function(e){n(e)},camelCase:function(e){return e.replace(ge,"ms-").replace(ye,ve)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(r(e))for(n=e.length;n>i&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(r(Object(e))?he.merge(n,"string"==typeof e?[e]:e):oe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:ae.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;a>o;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,n){var i,o,a=0,s=[];if(r(e))for(i=e.length;i>a;a++)o=t(e[a],a,n),null!=o&&s.push(o);else for(a in e)o=t(e[a],a,n),null!=o&&s.push(o);return ie.apply([],s)},guid:1,proxy:function e(t,n){var r,i,e;return"string"==typeof n&&(r=t[n],n=t,t=r),he.isFunction(t)?(i=re.call(arguments,2),e=function(){return t.apply(n||this,i.concat(re.call(arguments)))},e.guid=t.guid=t.guid||he.guid++,e):void 0},now:Date.now,support:pe}),"function"==typeof Symbol&&(he.fn[Symbol.iterator]=ee[Symbol.iterator]),he.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){se["[object "+t+"]"]=t.toLowerCase()});var be=function(e){function t(e,t,n,r){var i,o,a,s,u,c,l,p=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!r&&((t?t.ownerDocument||t:$)!==I&&P(t),t=t||I,L)){if(11!==h&&(u=ye.exec(e)))if(i=u[1]){if(9===h){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(p&&(a=p.getElementById(i))&&R(t,a)&&a.id===i)return n.push(a),n}else{if(u[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(i)),n}if(!(!T.qsa||U[e+" "]||F&&F.test(e))){if(1!==h)p=t,l=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(xe,Te):t.setAttribute("id",s=H),c=k(e),o=c.length;o--;)c[o]="#"+s+" "+d(c[o]);l=c.join(","),p=ve.test(e)&&f(t.parentNode)||t}if(l)try{return Q.apply(n,p.querySelectorAll(l)),n}catch(e){}finally{s===H&&t.removeAttribute("id")}}}return A(e.replace(se,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>S.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[H]=!0,e}function i(e){var t=I.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)S.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Oe(t)===e:t.disabled===e:"label"in t?t.disabled===e:!1}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function f(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function p(){}function d(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=V++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var c,l,f,p=[B,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(f=t[H]||(t[H]={}),l=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[o])&&c[0]===B&&c[1]===s)return p[2]=c[2];if(l[o]=p,p[2]=e(t,n,u))return!0}return!1}}function m(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function y(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),c&&t.push(s));return a}function v(e,t,n,i,o,a){return i&&!i[H]&&(i=v(i)),o&&!o[H]&&(o=v(o,a)),r(function(r,a,s,u){var c,l,f,p=[],d=[],h=a.length,m=r||g(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?m:y(m,p,e,s,u),b=n?o||(r?e:h||i)?[]:a:v;if(n&&n(v,b,s,u),i)for(c=y(b,d),i(c,[],s,u),l=c.length;l--;)(f=c[l])&&(b[d[l]]=!(v[d[l]]=f));if(r){if(o||e){if(o){for(c=[],l=b.length;l--;)(f=b[l])&&c.push(v[l]=f);o(null,b=[],c,u)}for(l=b.length;l--;)(f=b[l])&&(c=o?ee(r,f):p[l])>-1&&(r[c]=!(a[c]=f))}}else b=y(b===a?b.splice(h,b.length):b),o?o(null,a,b,u):Q.apply(a,b)})}function b(e){for(var t,n,r,i=e.length,o=S.relative[e[0].type],a=o||S.relative[" "],s=o?1:0,u=h(function(e){return e===t},a,!0),c=h(function(e){return ee(t,e)>-1},a,!0),l=[function(e,n,r){var i=!o&&(r||n!==E)||((t=n).nodeType?u(e,n,r):c(e,n,r));return t=null,i}];i>s;s++)if(n=S.relative[e[s].type])l=[h(m(l),n)];else{if(n=S.filter[e[s].type].apply(null,e[s].matches),n[H]){for(r=++s;i>r&&!S.relative[e[r].type];r++);return v(s>1&&m(l),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,r>s&&b(e.slice(s,r)),i>r&&b(e=e.slice(r)),i>r&&d(e))}l.push(n)}return m(l)}function w(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,c){var l,f,p,d=0,h="0",m=r&&[],g=[],v=E,b=r||o&&S.find.TAG("*",c),w=B+=null==v?1:Math.random()||.1,x=b.length;for(c&&(E=a===I||a||c);h!==x&&null!=(l=b[h]);h++){if(o&&l){for(f=0,a||l.ownerDocument===I||(P(l),s=!L);p=e[f++];)if(p(l,a||I,s)){u.push(l);break}c&&(B=w)}i&&((l=!p&&l)&&d--,r&&m.push(l))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(m,g,a,s);if(r){if(d>0)for(;h--;)m[h]||g[h]||(g[h]=Y.call(u));g=y(g)}Q.apply(u,g),c&&!r&&g.length>0&&d+n.length>1&&t.uniqueSort(u)}return c&&(B=w,E=v),m};return i?r(a):a}var x,T,S,O,j,k,C,A,E,N,_,P,I,M,L,F,D,q,R,H="sizzle"+1*new Date,$=e.document,B=0,V=0,W=n(),z=n(),U=n(),G=function(e,t){return e===t&&(_=!0),0},X={}.hasOwnProperty,J=[],Y=J.pop,Z=J.push,Q=J.push,K=J.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\x00-\\xa0])+",ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+ne+"*\\]",oe=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(oe),pe=new RegExp("^"+re+"$"),de={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re+"|[*])"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},xe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Te=function(e,t){return t?"\x00"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Se=function(){P()},Oe=h(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(J=K.call($.childNodes),$.childNodes),J[$.childNodes.length].nodeType}catch(e){Q={apply:J.length?function(e,t){Z.apply(e,K.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}T=t.support={},j=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},P=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:$;return r!==I&&9===r.nodeType&&r.documentElement?(I=r,M=I.documentElement,L=!j(I),$!==I&&(n=I.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),T.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=i(function(e){return e.appendChild(I.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=ge.test(I.getElementsByClassName),T.getById=i(function(e){return M.appendChild(e).id=H,!I.getElementsByName||!I.getElementsByName(H).length}),T.getById?(S.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}},S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n=t.getElementById(e);return n?[n]:[]}}):(S.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&L){var n,r,i,o=t.getElementById(e);if(o){if(n=o.getAttributeNode("id"),n&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if(n=o.getAttributeNode("id"),n&&n.value===e)return[o]}return[]}}),S.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},S.find.CLASS=T.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&L?t.getElementsByClassName(e):void 0},D=[],F=[],(T.qsa=ge.test(I.querySelectorAll))&&(i(function(e){M.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&F.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||F.push("~="),e.querySelectorAll(":checked").length||F.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||F.push(".#.+[+~]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=I.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&F.push(":enabled",":disabled"),M.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(T.matchesSelector=ge.test(q=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&i(function(e){T.disconnectedMatch=q.call(e,"*"),q.call(e,"[s!='']:x"),D.push("!=",oe)}),F=F.length&&new RegExp(F.join("|")),D=D.length&&new RegExp(D.join("|")),t=ge.test(M.compareDocumentPosition),R=t||ge.test(M.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return _=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!T.sortDetached&&t.compareDocumentPosition(e)===n?e===I||e.ownerDocument===$&&R($,e)?-1:t===I||t.ownerDocument===$&&R($,t)?1:N?ee(N,e)-ee(N,t):0:4&n?-1:1)}:function(e,t){if(e===t)return _=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o)return e===I?-1:t===I?1:i?-1:o?1:N?ee(N,e)-ee(N,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?a(s[r],u[r]):s[r]===$?-1:u[r]===$?1:0},I):I},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==I&&P(e),n=n.replace(le,"='$1']"),!(!T.matchesSelector||!L||U[n+" "]||D&&D.test(n)||F&&F.test(n)))try{var r=q.call(e,n);if(r||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&P(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&P(e);var n=S.attrHandle[t.toLowerCase()],r=n&&X.call(S.attrHandle,t.toLowerCase())?n(e,t,!L):void 0;return void 0!==r?r:T.attributes||!L?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(xe,Te)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(_=!T.detectDuplicates,N=!T.sortStable&&e.slice(0),e.sort(G),_){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return N=null,e},O=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=O(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=O(t);return n},S=t.selectors={cacheLength:50,createPseudo:r,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),

"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,p,d,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s,b=!1;if(g){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(p=g,f=p[H]||(p[H]={}),l=f[p.uniqueID]||(f[p.uniqueID]={}),c=l[e]||[],d=c[0]===B&&c[1],b=d&&c[2],p=d&&g.childNodes[d];p=++d&&p&&p[m]||(b=d=0)||h.pop();)if(1===p.nodeType&&++b&&p===t){l[e]=[B,d,b];break}}else if(v&&(p=t,f=p[H]||(p[H]={}),l=f[p.uniqueID]||(f[p.uniqueID]={}),c=l[e]||[],d=c[0]===B&&c[1],b=d),b===!1)for(;(p=++d&&p&&p[m]||(b=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++b||(v&&(f=p[H]||(p[H]={}),l=f[p.uniqueID]||(f[p.uniqueID]={}),l[e]=[B,b]),p!==t)););return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,n){var i,o=S.pseudos[e]||S.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[H]?o(n):o.length>1?(i=[e,e,"",n],S.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=C(e.replace(se,"$1"));return i[H]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||O(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=L?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===M},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:c(!1),disabled:c(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},S.pseudos.nth=S.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})S.pseudos[x]=u(x);return p.prototype=S.filters=S.pseudos,S.setFilters=new p,k=t.tokenize=function(e,n){var r,i,o,a,s,u,c,l=z[e+" "];if(l)return n?0:l.slice(0);for(s=e,u=[],c=S.preFilter;s;){(!r||(i=ue.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(se," ")}),s=s.slice(r.length));for(a in S.filter)!(i=de[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):z(e,u).slice(0)},C=t.compile=function(e,t){var n,r=[],i=[],o=U[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=b(t[n]),o[H]?r.push(o):i.push(o);o=U(e,w(i,r)),o.selector=e}return o},A=t.select=function(e,t,n,r){var i,o,a,s,u,c="function"==typeof e&&e,l=!r&&k(e=c.selector||e);if(n=n||[],1===l.length){if(o=l[0]=l[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&L&&S.relative[o[1].type]){if(t=(S.find.ID(a.matches[0].replace(be,we),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=de.needsContext.test(e)?0:o.length;i--&&(a=o[i],!S.relative[s=a.type]);)if((u=S.find[s])&&(r=u(a.matches[0].replace(be,we),ve.test(o[0].type)&&f(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&d(o),!e)return Q.apply(n,r),n;break}}return(c||C(e,l))(r,t,!L,n,!t||ve.test(e)&&f(t.parentNode)||t),n},T.sortStable=H.split("").sort(G).join("")===H,T.detectDuplicates=!!_,P(),T.sortDetached=i(function(e){return 1&e.compareDocumentPosition(I.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);he.find=be,he.expr=be.selectors,he.expr[":"]=he.expr.pseudos,he.uniqueSort=he.unique=be.uniqueSort,he.text=be.getText,he.isXMLDoc=be.isXML,he.contains=be.contains,he.escapeSelector=be.escape;var we=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&he(e).is(n))break;r.push(e)}return r},xe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Te=he.expr.match.needsContext,Se=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Oe=/^.[^:#\[\.,]*$/;he.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?he.find.matchesSelector(r,e)?[r]:[]:he.find.matches(e,he.grep(t,function(e){return 1===e.nodeType}))},he.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(he(e).filter(function(){for(t=0;r>t;t++)if(he.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;r>t;t++)he.find(e,i[t],n);return r>1?he.uniqueSort(n):n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&Te.test(e)?he(e):e||[],!1).length}});var je,ke=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ce=he.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||je,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ke.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof he?t[0]:t,he.merge(this,he.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:te,!0)),Se.test(r[1])&&he.isPlainObject(t))for(r in t)he.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=te.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):he.isFunction(e)?void 0!==n.ready?n.ready(e):e(he):he.makeArray(e,this)};Ce.prototype=he.fn,je=he(te);var Ae=/^(?:parents|prev(?:Until|All))/,Ee={children:!0,contents:!0,next:!0,prev:!0};he.fn.extend({has:function(e){var t=he(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(he.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&he(e);if(!Te.test(e))for(;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&he.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?he.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ae.call(he(e),this[0]):ae.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(he.uniqueSort(he.merge(this.get(),he(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),he.each({parent:function e(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return we(e,"parentNode")},parentsUntil:function(e,t,n){return we(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return we(e,"nextSibling")},prevAll:function(e){return we(e,"previousSibling")},nextUntil:function(e,t,n){return we(e,"nextSibling",n)},prevUntil:function(e,t,n){return we(e,"previousSibling",n)},siblings:function(e){return xe((e.parentNode||{}).firstChild,e)},children:function(e){return xe(e.firstChild)},contents:function(e){return e.contentDocument||he.merge([],e.childNodes)}},function(e,t){he.fn[e]=function(n,r){var i=he.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=he.filter(r,i)),this.length>1&&(Ee[e]||he.uniqueSort(i),Ae.test(e)&&i.reverse()),this.pushStack(i)}});var Ne=/[^\x20\t\r\n\f]+/g;he.Callbacks=function(e){e="string"==typeof e?a(e):he.extend({},e);var t,n,r,i,o=[],s=[],u=-1,c=function(){for(i=e.once,r=t=!0;s.length;u=-1)for(n=s.shift();++u<o.length;)o[u].apply(n[0],n[1])===!1&&e.stopOnFalse&&(u=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(u=o.length-1,s.push(n)),function t(n){he.each(n,function(n,r){he.isFunction(r)?e.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==he.type(r)&&t(r)})}(arguments),n&&!t&&c()),this},remove:function(){return he.each(arguments,function(e,t){for(var n;(n=he.inArray(t,o,n))>-1;)o.splice(n,1),u>=n&&u--}),this},has:function(e){return e?he.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=s=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=s=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},he.extend({Deferred:function(t){var n=[["notify","progress",he.Callbacks("memory"),he.Callbacks("memory"),2],["resolve","done",he.Callbacks("once memory"),he.Callbacks("once memory"),0,"resolved"],["reject","fail",he.Callbacks("once memory"),he.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return he.Deferred(function(t){he.each(n,function(n,r){var i=he.isFunction(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&he.isFunction(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){function o(t,n,r,i){return function(){var c=this,l=arguments,f=function(){var e,f;if(!(a>t)){if(e=r.apply(c,l),e===n.promise())throw new TypeError("Thenable self-resolution");f=e&&("object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)&&e.then,he.isFunction(f)?i?f.call(e,o(a,n,s,i),o(a,n,u,i)):(a++,f.call(e,o(a,n,s,i),o(a,n,u,i),o(a,n,s,n.notifyWith))):(r!==s&&(c=void 0,l=[e]),(i||n.resolveWith)(c,l))}},p=i?f:function(){try{f()}catch(e){he.Deferred.exceptionHook&&he.Deferred.exceptionHook(e,p.stackTrace),t+1>=a&&(r!==u&&(c=void 0,l=[e]),n.rejectWith(c,l))}};t?p():(he.Deferred.getStackHook&&(p.stackTrace=he.Deferred.getStackHook()),e.setTimeout(p))}}var a=0;return he.Deferred(function(e){n[0][3].add(o(0,e,he.isFunction(i)?i:s,e.notifyWith)),n[1][3].add(o(0,e,he.isFunction(t)?t:s)),n[2][3].add(o(0,e,he.isFunction(r)?r:u))}).promise()},promise:function(e){return null!=e?he.extend(e,i):i}},o={};return he.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[0][2].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=re.call(arguments),o=he.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?re.call(arguments):n,--t||o.resolveWith(r,i)}};if(1>=t&&(c(e,o.done(a(n)).resolve,o.reject),"pending"===o.state()||he.isFunction(i[n]&&i[n].then)))return o.then();for(;n--;)c(i[n],a(n),o.reject);return o.promise()}});var _e=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;he.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&_e.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},he.readyException=function(t){e.setTimeout(function(){throw t})};var Pe=he.Deferred();he.fn.ready=function(e){return Pe.then(e).catch(function(e){he.readyException(e)}),this},he.extend({isReady:!1,readyWait:1,holdReady:function(e){e?he.readyWait++:he.ready(!0)},ready:function(e){(e===!0?--he.readyWait:he.isReady)||(he.isReady=!0,e!==!0&&--he.readyWait>0||Pe.resolveWith(te,[he]))}}),he.ready.then=Pe.then,"complete"===te.readyState||"loading"!==te.readyState&&!te.documentElement.doScroll?e.setTimeout(he.ready):(te.addEventListener("DOMContentLoaded",l),e.addEventListener("load",l));var Ie=function e(t,n,r,i,o,a,s){var u=0,c=t.length,l=null==r;if("object"===he.type(r)){o=!0;for(u in r)e(t,n,u,r[u],!0,a,s)}else if(void 0!==i&&(o=!0,he.isFunction(i)||(s=!0),l&&(s?(n.call(t,i),n=null):(l=n,n=function(e,t,n){return l.call(he(e),n)})),n))for(;c>u;u++)n(t[u],r,s?i:i.call(t[u],u,n(t[u],r)));return o?t:l?n.call(t):c?n(t[0],r):a},Me=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};f.uid=1,f.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Me(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[he.camelCase(t)]=n;else for(r in t)i[he.camelCase(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][he.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){he.isArray(t)?t=t.map(he.camelCase):(t=he.camelCase(t),t=t in r?[t]:t.match(Ne)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||he.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!he.isEmptyObject(t)}};var Le=new f,Fe=new f,De=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,qe=/[A-Z]/g;he.extend({hasData:function(e){return Fe.hasData(e)||Le.hasData(e)},data:function(e,t,n){return Fe.access(e,t,n)},removeData:function(e,t){Fe.remove(e,t)},_data:function(e,t,n){return Le.access(e,t,n)},_removeData:function(e,t){Le.remove(e,t)}}),he.fn.extend({data:function e(t,n){var r,i,e,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(e=Fe.get(o),1===o.nodeType&&!Le.get(o,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&(i=a[r].name,0===i.indexOf("data-")&&(i=he.camelCase(i.slice(5)),d(o,i,e[i])));Le.set(o,"hasDataAttrs",!0)}return e}return"object"===("undefined"==typeof t?"undefined":_typeof(t))?this.each(function(){Fe.set(this,t)}):Ie(this,function(e){var n;if(o&&void 0===e){if(n=Fe.get(o,t),void 0!==n)return n;if(n=d(o,t),void 0!==n)return n}else this.each(function(){Fe.set(this,t,e)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){Fe.remove(this,e)})}}),he.extend({queue:function e(t,n,r){var e;return t?(n=(n||"fx")+"queue",e=Le.get(t,n),r&&(!e||he.isArray(r)?e=Le.access(t,n,he.makeArray(r)):e.push(r)),e||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=he.queue(e,t),r=n.length,i=n.shift(),o=he._queueHooks(e,t),a=function(){he.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Le.get(e,n)||Le.access(e,n,{empty:he.Callbacks("once memory").add(function(){Le.remove(e,[t+"queue",n])})})}}),he.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?he.queue(this[0],e):void 0===t?this:this.each(function(){var n=he.queue(this,e,t);he._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&he.dequeue(this,e)})},dequeue:function(e){return this.each(function(){he.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=he.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=Le.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,He=new RegExp("^(?:([+-])=|)("+Re+")([a-z%]*)$","i"),$e=["Top","Right","Bottom","Left"],Be=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&he.contains(e.ownerDocument,e)&&"none"===he.css(e,"display")},Ve=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},We={};he.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Be(this)?he(this).show():he(this).hide()})}});var ze=/^(?:checkbox|radio)$/i,Ue=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ge=/^$|\/(?:java|ecma)script/i,Xe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td;var Je=/<|&#?\w+;/;!function(){var e=te.createDocumentFragment(),t=e.appendChild(te.createElement("div")),n=te.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),pe.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",pe.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Ye=te.documentElement,Ze=/^key/,Qe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ke=/^([^.]*)(?:\.(.+)|)/;he.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,c,l,f,p,d,h,m,g=Le.get(e);if(g)for(n.handler&&(o=n,n=o.handler,i=o.selector),i&&he.find.matchesSelector(Ye,i),n.guid||(n.guid=he.guid++),(u=g.events)||(u=g.events={}),(a=g.handle)||(a=g.handle=function(t){return"undefined"!=typeof he&&he.event.triggered!==t.type?he.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ne)||[""],c=t.length;c--;)s=Ke.exec(t[c])||[],d=m=s[1],h=(s[2]||"").split(".").sort(),d&&(f=he.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=he.event.special[d]||{},l=he.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&he.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,a)!==!1||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,l):p.push(l),he.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,c,l,f,p,d,h,m,g=Le.hasData(e)&&Le.get(e);if(g&&(u=g.events)){for(t=(t||"").match(Ne)||[""],c=t.length;c--;)if(s=Ke.exec(t[c])||[],d=m=s[1],h=(s[2]||"").split(".").sort(),d){for(f=he.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)l=p[o],!i&&m!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(p.splice(o,1),l.selector&&p.delegateCount--,f.remove&&f.remove.call(e,l));a&&!p.length&&(f.teardown&&f.teardown.call(e,h,g.handle)!==!1||he.removeEvent(e,d,g.handle),delete u[d])}else for(d in u)he.event.remove(e,d+t[c],n,r,!0);he.isEmptyObject(u)&&Le.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=he.event.fix(e),u=new Array(arguments.length),c=(Le.get(this,"events")||{})[s.type]||[],l=he.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,s)!==!1){for(a=he.event.handlers.call(this,s,c),t=0;(i=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!s.isImmediatePropagationStopped();)(!s.rnamespace||s.rnamespace.test(o.namespace))&&(s.handleObj=o,s.data=o.data,r=((he.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u),void 0!==r&&(s.result=r)===!1&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||c.disabled!==!0)){for(o=[],a={},n=0;u>n;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?he(i,this).index(c)>-1:he.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(he.Event.prototype,e,{enumerable:!0,configurable:!0,get:he.isFunction(t)?function(){return this.originalEvent?t(this.originalEvent):void 0}:function(){return this.originalEvent?this.originalEvent[e]:void 0},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[he.expando]?e:new he.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==T()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===T()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&he.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return he.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},he.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},he.Event=function(e,t){return this instanceof he.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?w:x,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&he.extend(this,t),this.timeStamp=e&&e.timeStamp||he.now(),void(this[he.expando]=!0)):new he.Event(e,t)},he.Event.prototype={constructor:he.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=w,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=w,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=w,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},he.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Ze.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Qe.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},he.event.addProp),he.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){he.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!he.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),he.fn.extend({on:function(e,t,n,r){return S(this,e,t,n,r)},one:function(e,t,n,r){return S(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,he(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===("undefined"==typeof e?"undefined":_typeof(e))){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=x),this.each(function(){he.event.remove(this,e,n,t)})}});var et=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,tt=/<script|<style|<link/i,nt=/checked\s*(?:[^=]|=\s*.checked.)/i,rt=/^true\/(.*)/,it=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;he.extend({htmlPrefilter:function(e){return e.replace(et,"<$1></$2>")},clone:function e(t,n,r){var i,o,a,s,e=t.cloneNode(!0),u=he.contains(t.ownerDocument,t);if(!(pe.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||he.isXMLDoc(t)))for(s=y(e),a=y(t),i=0,o=a.length;o>i;i++)A(a[i],s[i]);if(n)if(r)for(a=a||y(t),s=s||y(e),i=0,o=a.length;o>i;i++)C(a[i],s[i]);else C(t,e);return s=y(e,"script"),s.length>0&&v(s,!u&&y(t,"script")),e},cleanData:function(e){for(var t,n,r,i=he.event.special,o=0;void 0!==(n=e[o]);o++)if(Me(n)){if(t=n[Le.expando]){if(t.events)for(r in t.events)i[r]?he.event.remove(n,r):he.removeEvent(n,r,t.handle);n[Le.expando]=void 0}n[Fe.expando]&&(n[Fe.expando]=void 0)}}}),he.fn.extend({detach:function(e){return N(this,e,!0)},remove:function(e){return N(this,e)},text:function(e){return Ie(this,function(e){return void 0===e?he.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return E(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=O(this,e);t.appendChild(e)}})},prepend:function(){return E(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=O(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return E(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return E(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(he.cleanData(y(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return he.clone(this,e,t)})},html:function(e){return Ie(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!tt.test(e)&&!Xe[(Ue.exec(e)||["",""])[1].toLowerCase()]){e=he.htmlPrefilter(e);try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(he.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return E(this,arguments,function(t){var n=this.parentNode;he.inArray(this,e)<0&&(he.cleanData(y(this)),n&&n.replaceChild(t,this))},e)}}),he.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){he.fn[e]=function(e){for(var n,r=[],i=he(e),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),he(i[a])[t](n),oe.apply(r,n.get());return this.pushStack(r)}});var ot=/^margin/,at=new RegExp("^("+Re+")(?!px)[a-z%]+$","i"),st=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)};!function(){function t(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Ye.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,r="4px"===t.width,s.style.marginRight="50%",i="4px"===t.marginRight,Ye.removeChild(a),s=null}}var n,r,i,o,a=te.createElement("div"),s=te.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",pe.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),he.extend(pe,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return t(),r},pixelMarginRight:function(){return t(),i},reliableMarginLeft:function(){return t(),o}}))}();var ut=/^(none|table(?!-c[ea]).+)/,ct={position:"absolute",visibility:"hidden",display:"block"},lt={letterSpacing:"0",fontWeight:"400"},ft=["Webkit","Moz","ms"],pt=te.createElement("div").style;he.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function e(t,n,r,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,a,s,u=he.camelCase(n),e=t.style;return n=he.cssProps[u]||(he.cssProps[u]=I(u)||u),s=he.cssHooks[n]||he.cssHooks[u],void 0===r?s&&"get"in s&&void 0!==(o=s.get(t,!1,i))?o:e[n]:(a="undefined"==typeof r?"undefined":_typeof(r),"string"===a&&(o=He.exec(r))&&o[1]&&(r=h(t,n,o),a="number"),null!=r&&r===r&&("number"===a&&(r+=o&&o[3]||(he.cssNumber[u]?"":"px")),pe.clearCloneStyle||""!==r||0!==n.indexOf("background")||(e[n]="inherit"),s&&"set"in s&&void 0===(r=s.set(t,r,i))||(e[n]=r)),void 0)}},css:function(e,t,n,r){var i,o,a,s=he.camelCase(t);return t=he.cssProps[s]||(he.cssProps[s]=I(s)||s),a=he.cssHooks[t]||he.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_(e,t,r)),"normal"===i&&t in lt&&(i=lt[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),he.each(["height","width"],function(e,t){he.cssHooks[t]={get:function(e,n,r){return n?!ut.test(he.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?F(e,t,r):Ve(e,ct,function(){return F(e,t,r)}):void 0},set:function(e,n,r){var i,o=r&&st(e),a=r&&L(e,t,r,"border-box"===he.css(e,"boxSizing",!1,o),o);return a&&(i=He.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=he.css(e,t)),M(e,n,a)}}}),he.cssHooks.marginLeft=P(pe.reliableMarginLeft,function(e,t){return t?(parseFloat(_(e,"marginLeft"))||e.getBoundingClientRect().left-Ve(e,{

marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),he.each({margin:"",padding:"",border:"Width"},function(e,t){he.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+$e[r]+t]=o[r]||o[r-2]||o[0];return i}},ot.test(e)||(he.cssHooks[e+t].set=M)}),he.fn.extend({css:function(e,t){return Ie(this,function(e,t,n){var r,i,o={},a=0;if(he.isArray(t)){for(r=st(e),i=t.length;i>a;a++)o[t[a]]=he.css(e,t[a],!1,r);return o}return void 0!==n?he.style(e,t,n):he.css(e,t)},e,t,arguments.length>1)}}),he.Tween=D,D.prototype={constructor:D,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||he.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(he.cssNumber[n]?"":"px")},cur:function(){var e=D.propHooks[this.prop];return e&&e.get?e.get(this):D.propHooks._default.get(this)},run:function(e){var t,n=D.propHooks[this.prop];return this.pos=t=this.options.duration?he.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):D.propHooks._default.set(this),this}},D.prototype.init.prototype=D.prototype,D.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=he.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){he.fx.step[e.prop]?he.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[he.cssProps[e.prop]]&&!he.cssHooks[e.prop]?e.elem[e.prop]=e.now:he.style(e.elem,e.prop,e.now+e.unit)}}},D.propHooks.scrollTop=D.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},he.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},he.fx=D.prototype.init,he.fx.step={};var dt,ht,mt=/^(?:toggle|show|hide)$/,gt=/queueHooks$/;he.Animation=he.extend(W,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return h(n.elem,e,He.exec(t),n),n}]},tweener:function(e,t){he.isFunction(e)?(t=e,e=["*"]):e=e.match(Ne);for(var n,r=0,i=e.length;i>r;r++)n=e[r],W.tweeners[n]=W.tweeners[n]||[],W.tweeners[n].unshift(t)},prefilters:[B],prefilter:function(e,t){t?W.prefilters.unshift(e):W.prefilters.push(e)}}),he.speed=function(e,t,n){var r=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?he.extend({},e):{complete:n||!n&&t||he.isFunction(e)&&e,duration:e,easing:n&&t||t&&!he.isFunction(t)&&t};return he.fx.off||te.hidden?r.duration=0:"number"!=typeof r.duration&&(r.duration=r.duration in he.fx.speeds?he.fx.speeds[r.duration]:he.fx.speeds._default),(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){he.isFunction(r.old)&&r.old.call(this),r.queue&&he.dequeue(this,r.queue)},r},he.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Be).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=he.isEmptyObject(e),o=he.speed(t,n,r),a=function(){var t=W(this,he.extend({},e),o);(i||Le.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=he.timers,a=Le.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&gt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&he.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Le.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=he.timers,a=r?r.length:0;for(n.finish=!0,he.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),he.each(["toggle","show","hide"],function(e,t){var n=he.fn[t];he.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(H(t,!0),e,r,i)}}),he.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){he.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),he.timers=[],he.fx.tick=function(){var e,t=0,n=he.timers;for(dt=he.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||he.fx.stop(),dt=void 0},he.fx.timer=function(e){he.timers.push(e),e()?he.fx.start():he.timers.pop()},he.fx.interval=13,he.fx.start=function(){ht||(ht=e.requestAnimationFrame?e.requestAnimationFrame(q):e.setInterval(he.fx.tick,he.fx.interval))},he.fx.stop=function(){e.cancelAnimationFrame?e.cancelAnimationFrame(ht):e.clearInterval(ht),ht=null},he.fx.speeds={slow:600,fast:200,_default:400},he.fn.delay=function(t,n){return t=he.fx?he.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=te.createElement("input"),t=te.createElement("select"),n=t.appendChild(te.createElement("option"));e.type="checkbox",pe.checkOn=""!==e.value,pe.optSelected=n.selected,e=te.createElement("input"),e.value="t",e.type="radio",pe.radioValue="t"===e.value}();var yt,vt=he.expr.attrHandle;he.fn.extend({attr:function(e,t){return Ie(this,he.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){he.removeAttr(this,e)})}}),he.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?he.prop(e,t,n):(1===o&&he.isXMLDoc(e)||(i=he.attrHooks[t.toLowerCase()]||(he.expr.match.bool.test(t)?yt:void 0)),void 0!==n?null===n?void he.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=he.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!pe.radioValue&&"radio"===t&&he.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Ne);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),yt={set:function(e,t,n){return t===!1?he.removeAttr(e,n):e.setAttribute(n,n),n}},he.each(he.expr.match.bool.source.match(/\w+/g),function(e,t){var n=vt[t]||he.find.attr;vt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=vt[a],vt[a]=i,i=null!=n(e,t,r)?a:null,vt[a]=o),i}});var bt=/^(?:input|select|textarea|button)$/i,wt=/^(?:a|area)$/i;he.fn.extend({prop:function(e,t){return Ie(this,he.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[he.propFix[e]||e]})}}),he.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&he.isXMLDoc(e)||(t=he.propFix[t]||t,i=he.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=he.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),pe.optSelected||(he.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),he.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){he.propFix[this.toLowerCase()]=this}),he.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(he.isFunction(e))return this.each(function(t){he(this).addClass(e.call(this,t,U(this)))});if("string"==typeof e&&e)for(t=e.match(Ne)||[];n=this[u++];)if(i=U(n),r=1===n.nodeType&&" "+z(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=z(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(he.isFunction(e))return this.each(function(t){he(this).removeClass(e.call(this,t,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ne)||[];n=this[u++];)if(i=U(n),r=1===n.nodeType&&" "+z(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=z(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n="undefined"==typeof e?"undefined":_typeof(e);return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(he.isFunction(e)?function(n){he(this).toggleClass(e.call(this,n,U(this),t),t)}:function(){var t,r,i,o;if("string"===n)for(r=0,i=he(this),o=e.match(Ne)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(void 0===e||"boolean"===n)&&(t=U(this),t&&Le.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Le.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+z(U(n))+" ").indexOf(t)>-1)return!0;return!1}});var xt=/\r/g;he.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=he.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,he(this).val()):e,null==i?i="":"number"==typeof i?i+="":he.isArray(i)&&(i=he.map(i,function(e){return null==e?"":e+""})),t=he.valHooks[this.type]||he.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=he.valHooks[i.type]||he.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(xt,""):null==n?"":n)}}}),he.extend({valHooks:{option:{get:function(e){var t=he.find.attr(e,"value");return null!=t?t:z(he.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=0>o?u:a?o:0;u>r;r++)if(n=i[r],!(!n.selected&&r!==o||n.disabled||n.parentNode.disabled&&he.nodeName(n.parentNode,"optgroup"))){if(t=he(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=he.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=he.inArray(he.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),he.each(["radio","checkbox"],function(){he.valHooks[this]={set:function(e,t){return he.isArray(t)?e.checked=he.inArray(he(e).val(),t)>-1:void 0}},pe.checkOn||(he.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Tt=/^(?:focusinfocus|focusoutblur)$/;he.extend(he.event,{trigger:function(t,n,r,i){var o,a,s,u,c,l,f,p=[r||te],d=ce.call(t,"type")?t.type:t,h=ce.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||te,3!==r.nodeType&&8!==r.nodeType&&!Tt.test(d+he.event.triggered)&&(d.indexOf(".")>-1&&(h=d.split("."),d=h.shift(),h.sort()),c=d.indexOf(":")<0&&"on"+d,t=t[he.expando]?t:new he.Event(d,"object"===("undefined"==typeof t?"undefined":_typeof(t))&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:he.makeArray(n,[t]),f=he.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!he.isWindow(r)){for(u=f.delegateType||d,Tt.test(u+d)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(r.ownerDocument||te)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,l=(Le.get(a,"events")||{})[t.type]&&Le.get(a,"handle"),l&&l.apply(a,n),l=c&&a[c],l&&l.apply&&Me(a)&&(t.result=l.apply(a,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Me(r)||c&&he.isFunction(r[d])&&!he.isWindow(r)&&(s=r[c],s&&(r[c]=null),he.event.triggered=d,r[d](),he.event.triggered=void 0,s&&(r[c]=s)),t.result}},simulate:function(e,t,n){var r=he.extend(new he.Event,n,{type:e,isSimulated:!0});he.event.trigger(r,null,t)}}),he.fn.extend({trigger:function(e,t){return this.each(function(){he.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?he.event.trigger(e,t,n,!0):void 0}}),he.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){he.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),he.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),pe.focusin="onfocusin"in e,pe.focusin||he.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){he.event.simulate(t,e.target,he.event.fix(e))};he.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=Le.access(r,t);i||r.addEventListener(e,n,!0),Le.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Le.access(r,t)-1;i?Le.access(r,t,i):(r.removeEventListener(e,n,!0),Le.remove(r,t))}}});var St=e.location,Ot=he.now(),jt=/\?/;he.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return(!n||n.getElementsByTagName("parsererror").length)&&he.error("Invalid XML: "+t),n};var kt=/\[\]$/,Ct=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Et=/^(?:input|select|textarea|keygen)/i;he.param=function(e,t){var n,r=[],i=function(e,t){var n=he.isFunction(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(he.isArray(e)||e.jquery&&!he.isPlainObject(e))he.each(e,function(){i(this.name,this.value)});else for(n in e)G(n,e[n],t,i);return r.join("&")},he.fn.extend({serialize:function(){return he.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=he.prop(this,"elements");return e?he.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!he(this).is(":disabled")&&Et.test(this.nodeName)&&!At.test(e)&&(this.checked||!ze.test(e))}).map(function(e,t){var n=he(this).val();return null==n?null:he.isArray(n)?he.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}});var Nt=/%20/g,_t=/#.*$/,Pt=/([?&])_=[^&]*/,It=/^(.*?):[ \t]*([^\r\n]*)$/gm,Mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lt=/^(?:GET|HEAD)$/,Ft=/^\/\//,Dt={},qt={},Rt="*/".concat("*"),Ht=te.createElement("a");Ht.href=St.href,he.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:Mt.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":he.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Y(Y(e,he.ajaxSettings),t):Y(he.ajaxSettings,e)},ajaxPrefilter:X(Dt),ajaxTransport:X(qt),ajax:function(t,n){function r(t,n,r,s){var c,p,d,w,x,T=n;l||(l=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",S.readyState=t>0?4:0,c=t>=200&&300>t||304===t,r&&(w=Z(h,S,r)),w=Q(h,w,S,c),c?(h.ifModified&&(x=S.getResponseHeader("Last-Modified"),x&&(he.lastModified[o]=x),x=S.getResponseHeader("etag"),x&&(he.etag[o]=x)),204===t||"HEAD"===h.type?T="nocontent":304===t?T="notmodified":(T=w.state,p=w.data,d=w.error,c=!d)):(d=T,(t||!T)&&(T="error",0>t&&(t=0))),S.status=t,S.statusText=(n||T)+"",c?y.resolveWith(m,[p,T,S]):y.rejectWith(m,[S,T,d]),S.statusCode(b),b=void 0,f&&g.trigger(c?"ajaxSuccess":"ajaxError",[S,h,c?p:d]),v.fireWith(m,[S,T]),f&&(g.trigger("ajaxComplete",[S,h]),--he.active||he.event.trigger("ajaxStop")))}"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,c,l,f,p,d,h=he.ajaxSetup({},n),m=h.context||h,g=h.context&&(m.nodeType||m.jquery)?he(m):he.event,y=he.Deferred(),v=he.Callbacks("once memory"),b=h.statusCode||{},w={},x={},T="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=It.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,w[e]=t),this},overrideMimeType:function(e){return null==l&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)S.always(e[S.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||T;return i&&i.abort(t),r(0,t),this}};if(y.promise(S),h.url=((t||h.url||St.href)+"").replace(Ft,St.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Ne)||[""],null==h.crossDomain){c=te.createElement("a");try{c.href=h.url,c.href=c.href,h.crossDomain=Ht.protocol+"//"+Ht.host!=c.protocol+"//"+c.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=he.param(h.data,h.traditional)),J(Dt,h,n,S),l)return S;f=he.event&&h.global,f&&0===he.active++&&he.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Lt.test(h.type),o=h.url.replace(_t,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Nt,"+")):(d=h.url.slice(o.length),h.data&&(o+=(jt.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(o=o.replace(Pt,"$1"),d=(jt.test(o)?"&":"?")+"_="+Ot++ +d),h.url=o+d),h.ifModified&&(he.lastModified[o]&&S.setRequestHeader("If-Modified-Since",he.lastModified[o]),he.etag[o]&&S.setRequestHeader("If-None-Match",he.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&S.setRequestHeader("Content-Type",h.contentType),S.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Rt+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)S.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(h.beforeSend.call(m,S,h)===!1||l))return S.abort();if(T="abort",v.add(h.complete),S.done(h.success),S.fail(h.error),i=J(qt,h,n,S)){if(S.readyState=1,f&&g.trigger("ajaxSend",[S,h]),l)return S;h.async&&h.timeout>0&&(u=e.setTimeout(function(){S.abort("timeout")},h.timeout));try{l=!1,i.send(w,r)}catch(e){if(l)throw e;r(-1,e)}}else r(-1,"No Transport");return S},getJSON:function(e,t,n){return he.get(e,t,n,"json")},getScript:function(e,t){return he.get(e,void 0,t,"script")}}),he.each(["get","post"],function(e,t){he[t]=function(e,n,r,i){return he.isFunction(n)&&(i=i||r,r=n,n=void 0),he.ajax(he.extend({url:e,type:t,dataType:i,data:n,success:r},he.isPlainObject(e)&&e))}}),he._evalUrl=function(e){return he.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},he.fn.extend({wrapAll:function(e){var t;return this[0]&&(he.isFunction(e)&&(e=e.call(this[0])),t=he(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return this.each(he.isFunction(e)?function(t){he(this).wrapInner(e.call(this,t))}:function(){var t=he(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=he.isFunction(e);return this.each(function(n){he(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){he(this).replaceWith(this.childNodes)}),this}}),he.expr.pseudos.hidden=function(e){return!he.expr.pseudos.visible(e)},he.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},he.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var $t={0:200,1223:204},Bt=he.ajaxSettings.xhr();pe.cors=!!Bt&&"withCredentials"in Bt,pe.ajax=Bt=!!Bt,he.ajaxTransport(function(t){var n,r;return pe.cors||Bt&&!t.crossDomain?{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o($t[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}:void 0}),he.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),he.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return he.globalEval(e),e}}}),he.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),he.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=he("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),te.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Vt=[],Wt=/(=)\?(?=&|$)|\?\?/;he.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||he.expando+"_"+Ot++;return this[e]=!0,e}}),he.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=he.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+i):t.jsonp!==!1&&(t.url+=(jt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||he.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?he(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Vt.push(i)),a&&he.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),pe.createHTMLDocument=function(){var e=te.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),he.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(pe.createHTMLDocument?(t=te.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=te.location.href,t.head.appendChild(r)):t=te),i=Se.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=b([e],t,o),o&&o.length&&he(o).remove(),he.merge([],i.childNodes))},he.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=z(e.slice(s)),e=e.slice(0,s)),he.isFunction(t)?(n=t,t=void 0):t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&(i="POST"),a.length>0&&he.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?he("<div>").append(he.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},he.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){he.fn[t]=function(e){return this.on(t,e)}}),he.expr.pseudos.animated=function(e){return he.grep(he.timers,function(t){return e===t.elem}).length},he.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c,l=he.css(e,"position"),f=he(e),p={};"static"===l&&(e.style.position="relative"),s=f.offset(),o=he.css(e,"top"),u=he.css(e,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),he.isFunction(t)&&(t=t.call(e,n,he.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):f.css(p)}},he.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){he.offset.setOffset(this,e,t)});var t,n,r,i,o=this[0];if(o)return o.getClientRects().length?(r=o.getBoundingClientRect(),r.width||r.height?(i=o.ownerDocument,n=K(i),t=i.documentElement,{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):{top:0,left:0}},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===he.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),he.nodeName(e[0],"html")||(r=e.offset()),r={top:r.top+he.css(e[0],"borderTopWidth",!0),left:r.left+he.css(e[0],"borderLeftWidth",!0)}),{top:t.top-r.top-he.css(n,"marginTop",!0),left:t.left-r.left-he.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===he.css(e,"position");)e=e.offsetParent;return e||Ye})}}),he.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;he.fn[e]=function(r){return Ie(this,function(e,r,i){var o=K(e);return void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),he.each(["top","left"],function(e,t){he.cssHooks[t]=P(pe.pixelPosition,function(e,n){return n?(n=_(e,t),at.test(n)?he(e).position()[t]+"px":n):void 0})}),he.each({Height:"height",Width:"width"},function(e,t){he.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){he.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Ie(this,function(t,n,i){var o;return he.isWindow(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?he.css(t,n,s):he.style(t,n,i,s)},t,a?i:void 0,a)}})}),he.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),he.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return he});var zt=e.jQuery,Ut=e.$;return he.noConflict=function(t){return e.$===he&&(e.$=Ut),t&&e.jQuery===he&&(e.jQuery=zt),he},t||(e.jQuery=e.$=he),he}),/*!

  * https://github.com/paulmillr/es6-shim

  * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)

  *   and contributors,  MIT License

  * es6-shim: v0.35.1

  * see https://github.com/paulmillr/es6-shim/blob/0.35.1/LICENSE

  * Details and documentation:

  * https://github.com/paulmillr/es6-shim/

  */

function(e,t){"function"==typeof define&&define.amd?define("es6-shim",t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t():e.returnExports=t()}(this,function(){var e,t=Function.call.bind(Function.apply),n=Function.call.bind(Function.call),r=Array.isArray,i=Object.keys,o=function(e){return function(){return!t(e,this,arguments)}},a=function(e){try{return e(),!1}catch(e){return!0}},s=function(e){try{return e()}catch(e){return!1}},u=o(a),c=function(){return!a(function(){Object.defineProperty({},"x",{get:function(){}})})},l=!!Object.defineProperty&&c(),f="foo"===function(){}.name,p=Function.call.bind(Array.prototype.forEach),d=Function.call.bind(Array.prototype.reduce),h=Function.call.bind(Array.prototype.filter),m=Function.call.bind(Array.prototype.some),g=function(e,t,n,r){!r&&t in e||(l?Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n}):e[t]=n)},y=function(e,t,n){p(i(t),function(r){var i=t[r];g(e,r,i,!!n)})},v=Function.call.bind(Object.prototype.toString),b="function"==typeof/abc/?function(e){return"function"==typeof e&&"[object Function]"===v(e)}:function(e){return"function"==typeof e},w={getter:function(e,t,n){if(!l)throw new TypeError("getters require true ES5 support");Object.defineProperty(e,t,{configurable:!0,enumerable:!1,get:n})},proxy:function(e,t,n){if(!l)throw new TypeError("getters require true ES5 support");var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,{configurable:r.configurable,enumerable:r.enumerable,get:function(){return e[t]},set:function(n){e[t]=n}})},redefine:function(e,t,n){if(l){var r=Object.getOwnPropertyDescriptor(e,t);r.value=n,Object.defineProperty(e,t,r)}else e[t]=n},defineByDescriptor:function(e,t,n){l?Object.defineProperty(e,t,n):"value"in n&&(e[t]=n.value)},preserveToString:function(e,t){t&&b(t.toString)&&g(e,"toString",t.toString.bind(t),!0)}},x=Object.create||function(e,t){var n=function(){};n.prototype=e;var r=new n;return"undefined"!=typeof t&&i(t).forEach(function(e){w.defineByDescriptor(r,e,t[e])}),r},T=function(e,t){return Object.setPrototypeOf?s(function(){var n=function t(n){var r=new e(n);return Object.setPrototypeOf(r,t.prototype),r};return Object.setPrototypeOf(n,e),n.prototype=x(e.prototype,{constructor:{value:n}}),t(n)}):!1},S=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")},O=S(),j=O.isFinite,k=Function.call.bind(String.prototype.indexOf),C=Function.apply.bind(Array.prototype.indexOf),A=Function.call.bind(Array.prototype.concat),E=Function.call.bind(String.prototype.slice),N=Function.call.bind(Array.prototype.push),_=Function.apply.bind(Array.prototype.push),P=Function.call.bind(Array.prototype.shift),I=Math.max,M=Math.min,L=Math.floor,F=Math.abs,D=Math.exp,q=Math.log,R=Math.sqrt,H=Function.call.bind(Object.prototype.hasOwnProperty),$=function(){},B=O.Symbol||{},V=B.species||"@@species",W=Number.isNaN||function(e){return e!==e},z=Number.isFinite||function(e){return"number"==typeof e&&j(e)},U=b(Math.sign)?Math.sign:function(e){var t=Number(e);return 0===t?t:W(t)?t:0>t?-1:1},G=function(e){return"[object Arguments]"===v(e)},X=function(e){return null!==e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==v(e)&&"[object Function]"===v(e.callee)},J=G(arguments)?G:X,Y={primitive:function(e){return null===e||"function"!=typeof e&&"object"!==("undefined"==typeof e?"undefined":_typeof(e))},string:function(e){return"[object String]"===v(e)},regex:function(e){return"[object RegExp]"===v(e)},symbol:function(e){return"function"==typeof O.Symbol&&"symbol"===("undefined"==typeof e?"undefined":_typeof(e))}},Z=function(e,t,n){var r=e[t];g(e,t,n,!0),w.preserveToString(e[t],r)},Q="function"==typeof B&&"function"==typeof B.for&&Y.symbol(B()),K=Y.symbol(B.iterator)?B.iterator:"_es6-shim iterator_";O.Set&&"function"==typeof(new O.Set)["@@iterator"]&&(K="@@iterator"),O.Reflect||g(O,"Reflect",{},!0);var ee=O.Reflect,te=String,ne={Call:function(e,n){var r=arguments.length>2?arguments[2]:[];if(!ne.IsCallable(e))throw new TypeError(e+" is not a function");return t(e,n,r)},RequireObjectCoercible:function(e,t){if(null==e)throw new TypeError(t||"Cannot call method on "+e);return e},TypeIsObject:function(e){return void 0===e||null===e||e===!0||e===!1?!1:"function"==typeof e||"object"===("undefined"==typeof e?"undefined":_typeof(e))},ToObject:function(e,t){return Object(ne.RequireObjectCoercible(e,t))},IsCallable:b,IsConstructor:function(e){return ne.IsCallable(e)},ToInt32:function(e){return ne.ToNumber(e)>>0},ToUint32:function(e){return ne.ToNumber(e)>>>0},ToNumber:function(e){if("[object Symbol]"===v(e))throw new TypeError("Cannot convert a Symbol value to a number");return+e},ToInteger:function(e){var t=ne.ToNumber(e);return W(t)?0:0!==t&&z(t)?(t>0?1:-1)*L(F(t)):t},ToLength:function(e){var t=ne.ToInteger(e);return 0>=t?0:t>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t},SameValue:function(e,t){return e===t?0===e?1/e===1/t:!0:W(e)&&W(t)},SameValueZero:function(e,t){return e===t||W(e)&&W(t)},IsIterable:function(e){return ne.TypeIsObject(e)&&("undefined"!=typeof e[K]||J(e))},GetIterator:function(t){if(J(t))return new e(t,"value");var n=ne.GetMethod(t,K);if(!ne.IsCallable(n))throw new TypeError("value is not an iterable");var r=ne.Call(n,t);if(!ne.TypeIsObject(r))throw new TypeError("bad iterator");return r},GetMethod:function(e,t){var n=ne.ToObject(e)[t];if(void 0===n||null===n)return void 0;if(!ne.IsCallable(n))throw new TypeError("Method not callable: "+t);return n},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var n=ne.GetMethod(e,"return");if(void 0!==n){var r,i;try{r=ne.Call(n,e)}catch(e){i=e}if(!t){if(i)throw i;if(!ne.TypeIsObject(r))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ne.TypeIsObject(t))throw new TypeError("bad iterator");return t},IteratorStep:function(e){var t=ne.IteratorNext(e),n=ne.IteratorComplete(t);return n?!1:t},Construct:function(e,t,n,r){var i="undefined"==typeof n?e:n;if(!r&&ee.construct)return ee.construct(e,t,i);var o=i.prototype;ne.TypeIsObject(o)||(o=Object.prototype);var a=x(o),s=ne.Call(e,a,t);return ne.TypeIsObject(s)?s:a},SpeciesConstructor:function(e,t){var n=e.constructor;if(void 0===n)return t;if(!ne.TypeIsObject(n))throw new TypeError("Bad constructor");var r=n[V];if(void 0===r||null===r)return t;if(!ne.IsConstructor(r))throw new TypeError("Bad @@species");return r},CreateHTML:function(e,t,n,r){var i=ne.ToString(e),o="<"+t;if(""!==n){var a=ne.ToString(r),s=a.replace(/"/g,"&quot;");o+=" "+n+'="'+s+'"'}var u=o+">",c=u+i;return c+"</"+t+">"},IsRegExp:function(e){if(!ne.TypeIsObject(e))return!1;var t=e[B.match];return"undefined"!=typeof t?!!t:Y.regex(e)},ToString:function(e){return te(e)}};if(l&&Q){var re=function(e){if(Y.symbol(B[e]))return B[e];var t=B.for("Symbol."+e);return Object.defineProperty(B,e,{configurable:!1,enumerable:!1,writable:!1,value:t}),t};if(!Y.symbol(B.search)){var ie=re("search"),oe=String.prototype.search;g(RegExp.prototype,ie,function(e){return ne.Call(oe,e,[this])});var ae=function(e){var t=ne.RequireObjectCoercible(this);if(null!==e&&"undefined"!=typeof e){var n=ne.GetMethod(e,ie);if("undefined"!=typeof n)return ne.Call(n,e,[t])}return ne.Call(oe,t,[ne.ToString(e)])};Z(String.prototype,"search",ae)}if(!Y.symbol(B.replace)){var se=re("replace"),ue=String.prototype.replace;g(RegExp.prototype,se,function(e,t){return ne.Call(ue,e,[this,t])});var ce=function(e,t){var n=ne.RequireObjectCoercible(this);if(null!==e&&"undefined"!=typeof e){var r=ne.GetMethod(e,se);if("undefined"!=typeof r)return ne.Call(r,e,[n,t])}return ne.Call(ue,n,[ne.ToString(e),t])};Z(String.prototype,"replace",ce)}if(!Y.symbol(B.split)){var le=re("split"),fe=String.prototype.split;g(RegExp.prototype,le,function(e,t){return ne.Call(fe,e,[this,t])});var pe=function(e,t){var n=ne.RequireObjectCoercible(this);if(null!==e&&"undefined"!=typeof e){var r=ne.GetMethod(e,le);if("undefined"!=typeof r)return ne.Call(r,e,[n,t])}return ne.Call(fe,n,[ne.ToString(e),t])};Z(String.prototype,"split",pe)}var de=Y.symbol(B.match),he=de&&function(){var e={};return e[B.match]=function(){return 42},42!=="a".match(e)}();if(!de||he){var me=re("match"),ge=String.prototype.match;g(RegExp.prototype,me,function(e){return ne.Call(ge,e,[this])});var ye=function(e){var t=ne.RequireObjectCoercible(this);if(null!==e&&"undefined"!=typeof e){var n=ne.GetMethod(e,me);if("undefined"!=typeof n)return ne.Call(n,e,[t])}return ne.Call(ge,t,[ne.ToString(e)])};Z(String.prototype,"match",ye)}}var ve=function(e,t,n){w.preserveToString(t,e),Object.setPrototypeOf&&Object.setPrototypeOf(e,t),l?p(Object.getOwnPropertyNames(e),function(r){r in $||n[r]||w.proxy(e,r,t)}):p(Object.keys(e),function(r){r in $||n[r]||(t[r]=e[r])}),t.prototype=e.prototype,w.redefine(e.prototype,"constructor",t)},be=function(){return this},we=function(e){l&&!H(e,V)&&w.getter(e,V,be)},xe=function(e,t){var n=t||function(){return this};g(e,K,n),!e[K]&&Y.symbol(K)&&(e[K]=n)},Te=function(e,t,n){l?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,writable:!0,value:n}):e[t]=n},Se=function(e,t,n){if(Te(e,t,n),!ne.SameValue(e[t],n))throw new TypeError("property is nonconfigurable")},Oe=function(e,t,n,r){if(!ne.TypeIsObject(e))throw new TypeError("Constructor requires `new`: "+t.name);var i=t.prototype;ne.TypeIsObject(i)||(i=n);var o=x(i);for(var a in r)if(H(r,a)){var s=r[a];g(o,a,s,!0)}return o};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var je=String.fromCodePoint;Z(String,"fromCodePoint",function(){return ne.Call(je,this,arguments)})}var ke={fromCodePoint:function(){for(var e,t=[],n=0,r=arguments.length;r>n;n++){if(e=Number(arguments[n]),!ne.SameValue(e,ne.ToInteger(e))||0>e||e>1114111)throw new RangeError("Invalid code point "+e);65536>e?N(t,String.fromCharCode(e)):(e-=65536,N(t,String.fromCharCode((e>>10)+55296)),N(t,String.fromCharCode(e%1024+56320)))}return t.join("")},raw:function(e){var t=ne.ToObject(e,"bad callSite"),n=ne.ToObject(t.raw,"bad raw value"),r=n.length,i=ne.ToLength(r);if(0>=i)return"";for(var o,a,s,u,c=[],l=0;i>l&&(o=ne.ToString(l),s=ne.ToString(n[o]),N(c,s),!(l+1>=i));)a=l+1<arguments.length?arguments[l+1]:"",u=ne.ToString(a),N(c,u),l+=1;return c.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&Z(String,"raw",ke.raw),y(String,ke);var Ce=function e(t,n){if(1>n)return"";if(n%2)return e(t,n-1)+t;var r=e(t,n/2);return r+r},Ae=1/0,Ee={repeat:function(e){var t=ne.ToString(ne.RequireObjectCoercible(this)),n=ne.ToInteger(e);if(0>n||n>=Ae)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return Ce(t,n)},startsWith:function(e){var t=ne.ToString(ne.RequireObjectCoercible(this));if(ne.IsRegExp(e))throw new TypeError('Cannot call method "startsWith" with a regex');var n,r=ne.ToString(e);arguments.length>1&&(n=arguments[1]);var i=I(ne.ToInteger(n),0);return E(t,i,i+r.length)===r},endsWith:function(e){var t=ne.ToString(ne.RequireObjectCoercible(this));if(ne.IsRegExp(e))throw new TypeError('Cannot call method "endsWith" with a regex');var n,r=ne.ToString(e),i=t.length;arguments.length>1&&(n=arguments[1]);var o="undefined"==typeof n?i:ne.ToInteger(n),a=M(I(o,0),i);return E(t,a-r.length,a)===r},includes:function(e){if(ne.IsRegExp(e))throw new TypeError('"includes" does not accept a RegExp');var t,n=ne.ToString(e);return arguments.length>1&&(t=arguments[1]),-1!==k(this,n,t)},codePointAt:function(e){var t=ne.ToString(ne.RequireObjectCoercible(this)),n=ne.ToInteger(e),r=t.length;if(n>=0&&r>n){var i=t.charCodeAt(n),o=n+1===r;if(55296>i||i>56319||o)return i;var a=t.charCodeAt(n+1);return 56320>a||a>57343?i:1024*(i-55296)+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",1/0)!==!1&&Z(String.prototype,"includes",Ee.includes),String.prototype.startsWith&&String.prototype.endsWith){var Ne=a(function(){"/a/".startsWith(/a/)}),_e=s(function(){return"abc".startsWith("a",1/0)===!1});Ne&&_e||(Z(String.prototype,"startsWith",Ee.startsWith),Z(String.prototype,"endsWith",Ee.endsWith))}if(Q){var Pe=s(function(){var e=/a/;return e[B.match]=!1,"/a/".startsWith(e)});Pe||Z(String.prototype,"startsWith",Ee.startsWith);var Ie=s(function(){var e=/a/;return e[B.match]=!1,"/a/".endsWith(e)});Ie||Z(String.prototype,"endsWith",Ee.endsWith);var Me=s(function(){var e=/a/;return e[B.match]=!1,"/a/".includes(e)});Me||Z(String.prototype,"includes",Ee.includes)}y(String.prototype,Ee);var Le=["	\n\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join(""),Fe=new RegExp("(^["+Le+"]+)|(["+Le+"]+$)","g"),De=function(){return ne.ToString(ne.RequireObjectCoercible(this)).replace(Fe,"")},qe=["\x85","\u200b","\ufffe"].join(""),Re=new RegExp("["+qe+"]","g"),He=/^[\-+]0x[0-9a-f]+$/i,$e=qe.trim().length!==qe.length;g(String.prototype,"trim",De,$e);var Be=function(e){return{value:e,done:0===arguments.length}},Ve=function(e){ne.RequireObjectCoercible(e),this._s=ne.ToString(e),this._i=0};Ve.prototype.next=function(){var e=this._s,t=this._i;if("undefined"==typeof e||t>=e.length)return this._s=void 0,Be();var n,r,i=e.charCodeAt(t);return 55296>i||i>56319||t+1===e.length?r=1:(n=e.charCodeAt(t+1),r=56320>n||n>57343?1:2),this._i=t+r,Be(e.substr(t,r))},xe(Ve.prototype),xe(String.prototype,function(){return new Ve(this)});var We={from:function(e){var t,r=this;arguments.length>1&&(t=arguments[1]);var i,o;if("undefined"==typeof t)i=!1;else{if(!ne.IsCallable(t))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2]),i=!0}var a,s,u,c="undefined"!=typeof(J(e)||ne.GetMethod(e,K));if(c){s=ne.IsConstructor(r)?Object(new r):[];var l,f,p=ne.GetIterator(e);for(u=0;;){if(l=ne.IteratorStep(p),l===!1)break;f=l.value;try{i&&(f="undefined"==typeof o?t(f,u):n(t,o,f,u)),s[u]=f}catch(e){throw ne.IteratorClose(p,!0),e}u+=1}a=u}else{var d=ne.ToObject(e);a=ne.ToLength(d.length),s=ne.IsConstructor(r)?Object(new r(a)):new Array(a);var h;for(u=0;a>u;++u)h=d[u],i&&(h="undefined"==typeof o?t(h,u):n(t,o,h,u)),Se(s,u,h)}return s.length=a,s},of:function(){for(var e=arguments.length,t=this,n=r(t)||!ne.IsCallable(t)?new Array(e):ne.Construct(t,[e]),i=0;e>i;++i)Se(n,i,arguments[i]);return n.length=e,n}};y(Array,We),we(Array),e=function(e,t){this.i=0,this.array=e,this.kind=t},y(e.prototype,{next:function(){var t=this.i,n=this.array;if(!(this instanceof e))throw new TypeError("Not an ArrayIterator");if("undefined"!=typeof n)for(var r=ne.ToLength(n.length);r>t;t++){var i,o=this.kind;return"key"===o?i=t:"value"===o?i=n[t]:"entry"===o&&(i=[t,n[t]]),this.i=t+1,Be(i)}return this.array=void 0,Be()}}),xe(e.prototype);var ze=Array.of===We.of||function(){var e=function(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&2===t.length}();ze||Z(Array,"of",We.of);var Ue={copyWithin:function(e,t){var n,r=ne.ToObject(this),i=ne.ToLength(r.length),o=ne.ToInteger(e),a=ne.ToInteger(t),s=0>o?I(i+o,0):M(o,i),u=0>a?I(i+a,0):M(a,i);arguments.length>2&&(n=arguments[2]);var c="undefined"==typeof n?i:ne.ToInteger(n),l=0>c?I(i+c,0):M(c,i),f=M(l-u,i-s),p=1;for(s>u&&u+f>s&&(p=-1,u+=f-1,s+=f-1);f>0;)u in r?r[s]=r[u]:delete r[s],u+=p,s+=p,f-=1;return r},fill:function(e){var t;arguments.length>1&&(t=arguments[1]);var n;arguments.length>2&&(n=arguments[2]);var r=ne.ToObject(this),i=ne.ToLength(r.length);t=ne.ToInteger("undefined"==typeof t?0:t),n=ne.ToInteger("undefined"==typeof n?i:n);for(var o=0>t?I(i+t,0):M(t,i),a=0>n?i+n:n,s=o;i>s&&a>s;++s)r[s]=e;return r},find:function(e){var t=ne.ToObject(this),r=ne.ToLength(t.length);if(!ne.IsCallable(e))throw new TypeError("Array#find: predicate must be a function");for(var i,o=arguments.length>1?arguments[1]:null,a=0;r>a;a++)if(i=t[a],o){if(n(e,o,i,a,t))return i}else if(e(i,a,t))return i},findIndex:function(e){var t=ne.ToObject(this),r=ne.ToLength(t.length);if(!ne.IsCallable(e))throw new TypeError("Array#findIndex: predicate must be a function");for(var i=arguments.length>1?arguments[1]:null,o=0;r>o;o++)if(i){if(n(e,i,t[o],o,t))return o}else if(e(t[o],o,t))return o;return-1},keys:function(){return new e(this,"key")},values:function(){return new e(this,"value")},entries:function(){return new e(this,"entry")}};if(Array.prototype.keys&&!ne.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!ne.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[K]&&(y(Array.prototype,{values:Array.prototype[K]}),Y.symbol(B.unscopables)&&(Array.prototype[B.unscopables].values=!0)),f&&Array.prototype.values&&"values"!==Array.prototype.values.name){var Ge=Array.prototype.values;Z(Array.prototype,"values",function(){return ne.Call(Ge,this,arguments)}),g(Array.prototype,K,Array.prototype.values,!0)}y(Array.prototype,Ue),1/[!0].indexOf(!0,-0)<0&&g(Array.prototype,"indexOf",function(){var e=C(this,arguments);return 0===e&&0>1/e?0:e},!0),xe(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&xe(Object.getPrototypeOf([].values()));var Xe=function(){return s(function(){return 0===Array.from({length:-1}).length})}(),Je=function(){var e=Array.from([0].entries());return 1===e.length&&r(e[0])&&0===e[0][0]&&0===e[0][1]}();Xe&&Je||Z(Array,"from",We.from);var Ye=function(){return s(function(){return Array.from([0],void 0)})}();if(!Ye){var Ze=Array.from;Z(Array,"from",function(e){return arguments.length>1&&"undefined"!=typeof arguments[1]?ne.Call(Ze,this,arguments):n(Ze,this,e)})}var Qe=-(Math.pow(2,32)-1),Ke=function(e,t){var r={length:Qe};return r[t?(r.length>>>0)-1:0]=!0,s(function(){return n(e,r,function(){throw new RangeError("should not reach here")},[]),!0})};if(!Ke(Array.prototype.forEach)){var et=Array.prototype.forEach;Z(Array.prototype,"forEach",function(){return ne.Call(et,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.map)){var tt=Array.prototype.map;Z(Array.prototype,"map",function(){return ne.Call(tt,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.filter)){var nt=Array.prototype.filter;Z(Array.prototype,"filter",function(){return ne.Call(nt,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.some)){var rt=Array.prototype.some;Z(Array.prototype,"some",function(){return ne.Call(rt,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.every)){var it=Array.prototype.every;Z(Array.prototype,"every",function(){return ne.Call(it,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.reduce)){var ot=Array.prototype.reduce;Z(Array.prototype,"reduce",function(){return ne.Call(ot,this.length>=0?this:[],arguments)},!0)}if(!Ke(Array.prototype.reduceRight,!0)){var at=Array.prototype.reduceRight;Z(Array.prototype,"reduceRight",function(){return ne.Call(at,this.length>=0?this:[],arguments)},!0)}var st=8!==Number("0o10"),ut=2!==Number("0b10"),ct=m(qe,function(e){return 0===Number(e+0+e)});if(st||ut||ct){var lt=Number,ft=/^0b[01]+$/i,pt=/^0o[0-7]+$/i,dt=ft.test.bind(ft),ht=pt.test.bind(pt),mt=function(e){var t;if("function"==typeof e.valueOf&&(t=e.valueOf(),Y.primitive(t)))return t;if("function"==typeof e.toString&&(t=e.toString(),Y.primitive(t)))return t;throw new TypeError("No default value")},gt=Re.test.bind(Re),yt=He.test.bind(He),vt=function(){var e=function(t){var n;n=arguments.length>0?Y.primitive(t)?t:mt(t,"number"):0,"string"==typeof n&&(n=ne.Call(De,n),dt(n)?n=parseInt(E(n,2),2):ht(n)?n=parseInt(E(n,2),8):(gt(n)||yt(n))&&(n=0/0));var r=this,i=s(function(){return lt.prototype.valueOf.call(r),!0});return r instanceof e&&!i?new lt(n):lt(n)};return e}();ve(lt,vt,{}),y(vt,{NaN:lt.NaN,MAX_VALUE:lt.MAX_VALUE,MIN_VALUE:lt.MIN_VALUE,NEGATIVE_INFINITY:lt.NEGATIVE_INFINITY,POSITIVE_INFINITY:lt.POSITIVE_INFINITY}),Number=vt,w.redefine(O,"Number",vt)}var bt=Math.pow(2,53)-1;y(Number,{MAX_SAFE_INTEGER:bt,MIN_SAFE_INTEGER:-bt,EPSILON:2.220446049250313e-16,parseInt:O.parseInt,parseFloat:O.parseFloat,isFinite:z,isInteger:function(e){return z(e)&&ne.ToInteger(e)===e},isSafeInteger:function(e){return Number.isInteger(e)&&F(e)<=Number.MAX_SAFE_INTEGER},isNaN:W}),g(Number,"parseInt",O.parseInt,Number.parseInt!==O.parseInt),[,1].find(function(e,t){return 0===t})||Z(Array.prototype,"find",Ue.find),0!==[,1].findIndex(function(e,t){return 0===t})&&Z(Array.prototype,"findIndex",Ue.findIndex);var wt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),xt=function(e,t){l&&wt(e,t)&&Object.defineProperty(e,t,{enumerable:!1})},Tt=function(){for(var e=Number(this),t=arguments.length,n=t-e,r=new Array(0>n?0:n),i=e;t>i;++i)r[i-e]=arguments[i];return r},St=function(e){return function(t,n){return t[n]=e[n],t}},Ot=function(e,t){var n,r=i(Object(t));return ne.IsCallable(Object.getOwnPropertySymbols)&&(n=h(Object.getOwnPropertySymbols(Object(t)),wt(t))),d(A(r,n||[]),St(t),e)},jt={assign:function(e){var t=ne.ToObject(e,"Cannot convert undefined or null to object");return d(ne.Call(Tt,1,arguments),Ot,t)},is:function(e,t){return ne.SameValue(e,t)}},kt=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return"y"===e[1]}}();if(kt&&Z(Object,"assign",jt.assign),y(Object,jt),l){var Ct={setPrototypeOf:function(e,t){var r,i=function(e,t){if(!ne.TypeIsObject(e))throw new TypeError("cannot set prototype on a non-object");if(null!==t&&!ne.TypeIsObject(t))throw new TypeError("can only set prototype to an object or null"+t)},o=function(e,t){return i(e,t),n(r,e,t),e};try{r=e.getOwnPropertyDescriptor(e.prototype,t).set,n(r,{},null)}catch(n){if(e.prototype!=={}[t])return;r=function(e){this[t]=e},o.polyfill=o(o({},null),e.prototype)instanceof e}return o}(Object,"__proto__")};y(Object,Ct)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&!function(){var e=Object.create(null),t=Object.getPrototypeOf,n=Object.setPrototypeOf;Object.getPrototypeOf=function(n){var r=t(n);return r===e?null:r},Object.setPrototypeOf=function(t,r){var i=null===r?e:r;return n(t,i)},Object.setPrototypeOf.polyfill=!1}();var At=!a(function(){Object.keys("foo")});if(!At){var Et=Object.keys;Z(Object,"keys",function(e){return Et(ne.ToObject(e))}),i=Object.keys}var Nt=a(function(){Object.keys(/a/g)});if(Nt){var _t=Object.keys;Z(Object,"keys",function(e){if(Y.regex(e)){var t=[];for(var n in e)H(e,n)&&N(t,n);return t}return _t(e)}),i=Object.keys}if(Object.getOwnPropertyNames){var Pt=!a(function(){Object.getOwnPropertyNames("foo")});if(!Pt){var It="object"===("undefined"==typeof window?"undefined":_typeof(window))?Object.getOwnPropertyNames(window):[],Mt=Object.getOwnPropertyNames;Z(Object,"getOwnPropertyNames",function(e){var t=ne.ToObject(e);if("[object Window]"===v(t))try{return Mt(t)}catch(e){return A([],It)}return Mt(t)})}}if(Object.getOwnPropertyDescriptor){var Lt=!a(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Lt){var Ft=Object.getOwnPropertyDescriptor;Z(Object,"getOwnPropertyDescriptor",function(e,t){return Ft(ne.ToObject(e),t)})}}if(Object.seal){var Dt=!a(function(){Object.seal("foo")});if(!Dt){var qt=Object.seal;Z(Object,"seal",function(e){return ne.TypeIsObject(e)?qt(e):e})}}if(Object.isSealed){var Rt=!a(function(){Object.isSealed("foo")});if(!Rt){var Ht=Object.isSealed;Z(Object,"isSealed",function(e){return ne.TypeIsObject(e)?Ht(e):!0})}}if(Object.freeze){var $t=!a(function(){Object.freeze("foo")});if(!$t){var Bt=Object.freeze;Z(Object,"freeze",function(e){return ne.TypeIsObject(e)?Bt(e):e})}}if(Object.isFrozen){var Vt=!a(function(){Object.isFrozen("foo")});if(!Vt){var Wt=Object.isFrozen;Z(Object,"isFrozen",function(e){return ne.TypeIsObject(e)?Wt(e):!0})}}if(Object.preventExtensions){var zt=!a(function(){Object.preventExtensions("foo")});if(!zt){var Ut=Object.preventExtensions;Z(Object,"preventExtensions",function(e){return ne.TypeIsObject(e)?Ut(e):e})}}if(Object.isExtensible){var Gt=!a(function(){Object.isExtensible("foo")});if(!Gt){var Xt=Object.isExtensible;Z(Object,"isExtensible",function(e){return ne.TypeIsObject(e)?Xt(e):!1})}}if(Object.getPrototypeOf){var Jt=!a(function(){Object.getPrototypeOf("foo")});if(!Jt){var Yt=Object.getPrototypeOf;Z(Object,"getPrototypeOf",function(e){return Yt(ne.ToObject(e))})}}var Zt=l&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ne.IsCallable(e.get)}();if(l&&!Zt){var Qt=function(){if(!ne.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e};w.getter(RegExp.prototype,"flags",Qt)}var Kt=l&&s(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),en=Q&&l&&function(){var e=/./;return e[B.match]=!1,RegExp(e)===e}(),tn=s(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),nn=tn&&s(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!tn||!nn){var rn=RegExp.prototype.toString;g(RegExp.prototype,"toString",function(){var e=ne.RequireObjectCoercible(this);if(Y.regex(e))return n(rn,e);var t=te(e.source),r=te(e.flags);return"/"+t+"/"+r},!0),w.preserveToString(RegExp.prototype.toString,rn)}if(l&&(!Kt||en)){var on=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,an=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},sn=function(){return this.source},un=ne.IsCallable(an.get)?an.get:sn,cn=RegExp,ln=function(){return function e(t,n){var r=ne.IsRegExp(t),i=this instanceof e;if(!i&&r&&"undefined"==typeof n&&t.constructor===e)return t;var o=t,a=n;return Y.regex(t)?(o=ne.Call(un,t),a="undefined"==typeof n?ne.Call(on,t):n,new e(o,a)):(r&&(o=t.source,a="undefined"==typeof n?t.flags:n),new cn(t,n))}}();ve(cn,ln,{$input:!0}),RegExp=ln,w.redefine(O,"RegExp",ln)}if(l){var fn={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};p(i(fn),function(e){e in RegExp&&!(fn[e]in RegExp)&&w.getter(RegExp,fn[e],function(){return RegExp[e]})})}we(RegExp);var pn=1/Number.EPSILON,dn=function(e){return e+pn-pn},hn=Math.pow(2,-23),mn=Math.pow(2,127)*(2-hn),gn=Math.pow(2,-126),yn=Math.E,vn=Math.LOG2E,bn=Math.LOG10E,wn=Number.prototype.clz;delete Number.prototype.clz;var xn={acosh:function(e){var t=Number(e);return W(t)||1>e?0/0:1===t?0:t===1/0?t:q(t/yn+R(t+1)*R(t-1)/yn)+1},asinh:function e(t){var n=Number(t);return 0!==n&&j(n)?0>n?-e(-n):q(n+R(n*n+1)):n},atanh:function(e){var t=Number(e);return W(t)||-1>t||t>1?0/0:-1===t?-(1/0):1===t?1/0:0===t?t:.5*q((1+t)/(1-t))},cbrt:function(e){var t=Number(e);if(0===t)return t;var n,r=0>t;return r&&(t=-t),t===1/0?n=1/0:(n=D(q(t)/3),n=(t/(n*n)+2*n)/3),r?-n:n},clz32:function(e){var t=Number(e),n=ne.ToUint32(t);return 0===n?32:wn?ne.Call(wn,n):31-L(q(n+.5)*vn)},cosh:function(e){var t=Number(e);return 0===t?1:W(t)?0/0:j(t)?(0>t&&(t=-t),t>21?D(t)/2:(D(t)+D(-t))/2):1/0},expm1:function(e){var t=Number(e);if(t===-(1/0))return-1;if(!j(t)||0===t)return t;if(F(t)>.5)return D(t)-1;for(var n=t,r=0,i=1;r+n!==r;)r+=n,i+=1,n*=t/i;return r},hypot:function(){for(var e=0,t=0,n=0;n<arguments.length;++n){var r=F(Number(arguments[n]));r>t?(e*=t/r*(t/r),e+=1,t=r):e+=r>0?r/t*(r/t):r}return t===1/0?1/0:t*R(e)},log2:function(e){return q(e)*vn},log10:function(e){return q(e)*bn},log1p:function(e){var t=Number(e);return-1>t||W(t)?0/0:0===t||t===1/0?t:-1===t?-(1/0):1+t-1===0?t:t*(q(1+t)/(1+t-1))},sign:U,sinh:function(e){var t=Number(e);return j(t)&&0!==t?F(t)<1?(Math.expm1(t)-Math.expm1(-t))/2:(D(t-1)-D(-t-1))*yn/2:t},tanh:function(e){var t=Number(e);return W(t)||0===t?t:t>=20?1:-20>=t?-1:(Math.expm1(t)-Math.expm1(-t))/(D(t)+D(-t))},trunc:function(e){var t=Number(e);return 0>t?-L(-t):L(t)},imul:function(e,t){var n=ne.ToUint32(e),r=ne.ToUint32(t),i=n>>>16&65535,o=65535&n,a=r>>>16&65535,s=65535&r;return o*s+(i*s+o*a<<16>>>0)|0},fround:function(e){var t=Number(e);if(0===t||t===1/0||t===-(1/0)||W(t))return t;var n=U(t),r=F(t);if(gn>r)return n*dn(r/gn/hn)*gn*hn;var i=(1+hn/Number.EPSILON)*r,o=i-(i-r);return o>mn||W(o)?n*(1/0):n*o}};y(Math,xn),g(Math,"log1p",xn.log1p,-1e-17!==Math.log1p(-1e-17)),g(Math,"asinh",xn.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),g(Math,"tanh",xn.tanh,-2e-17!==Math.tanh(-2e-17)),g(Math,"acosh",xn.acosh,Math.acosh(Number.MAX_VALUE)===1/0),g(Math,"cbrt",xn.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8),g(Math,"sinh",xn.sinh,-2e-17!==Math.sinh(-2e-17));var Tn=Math.expm1(10);g(Math,"expm1",xn.expm1,Tn>22025.465794806718||22025.465794806718>Tn);var Sn=Math.round,On=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+Number.EPSILON/3.99),jn=pn+1,kn=2*pn-1,Cn=[jn,kn].every(function(e){return Math.round(e)===e});g(Math,"round",function(e){var t=L(e),n=-1===t?-0:t+1;return.5>e-t?t:n},!On||!Cn),w.preserveToString(Math.round,Sn);var An=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=xn.imul,w.preserveToString(Math.imul,An)),2!==Math.imul.length&&Z(Math,"imul",function(){return ne.Call(An,Math,arguments)});var En=function(){var e=O.setTimeout;if("function"==typeof e||"object"===("undefined"==typeof e?"undefined":_typeof(e))){ne.IsPromise=function(e){return ne.TypeIsObject(e)?"undefined"==typeof e._promise?!1:!0:!1};var t,r=function(e){if(!ne.IsConstructor(e))throw new TypeError("Bad promise constructor");var t=this,n=function(e,n){if(void 0!==t.resolve||void 0!==t.reject)throw new TypeError("Bad Promise implementation!");t.resolve=e,t.reject=n};if(t.resolve=void 0,t.reject=void 0,t.promise=new e(n),!ne.IsCallable(t.resolve)||!ne.IsCallable(t.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&ne.IsCallable(window.postMessage)&&(t=function(){var e=[],t="zero-timeout-message",n=function(n){N(e,n),window.postMessage(t,"*")},r=function(n){if(n.source===window&&n.data===t){if(n.stopPropagation(),0===e.length)return;var r=P(e);r()}};return window.addEventListener("message",r,!0),n});var i,o,a=function(){var e=O.Promise,t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}},s=ne.IsCallable(O.setImmediate)?O.setImmediate:"object"===("undefined"==typeof process?"undefined":_typeof(process))&&process.nextTick?process.nextTick:a()||(ne.IsCallable(t)?t():function(t){e(t,0)}),u=function(e){return e},c=function(e){throw e},l=0,f=1,p=2,d=0,h=1,m=2,g={},v=function(e,t,n){s(function(){b(e,t,n)})},b=function(e,t,n){var r,i;if(t===g)return e(n);try{r=e(n),i=t.resolve}catch(e){r=e,i=t.reject}i(r)},w=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(v(n.fulfillReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,o=0;r>i;i++,o+=3)v(n[o+d],n[o+m],t),e[o+d]=void 0,e[o+h]=void 0,e[o+m]=void 0;n.result=t,n.state=f,n.reactionLength=0},x=function(e,t){var n=e._promise,r=n.reactionLength;if(r>0&&(v(n.rejectReactionHandler0,n.reactionCapability0,t),n.fulfillReactionHandler0=void 0,n.rejectReactions0=void 0,n.reactionCapability0=void 0,r>1))for(var i=1,o=0;r>i;i++,o+=3)v(n[o+h],n[o+m],t),e[o+d]=void 0,e[o+h]=void 0,e[o+m]=void 0;n.result=t,n.state=p,n.reactionLength=0},T=function(e){var t=!1,n=function(n){var r;if(!t){if(t=!0,n===e)return x(e,new TypeError("Self resolution"));if(!ne.TypeIsObject(n))return w(e,n);try{r=n.then}catch(t){return x(e,t)}return ne.IsCallable(r)?void s(function(){j(e,n,r)}):w(e,n)}},r=function(n){return t?void 0:(t=!0,x(e,n))};return{resolve:n,reject:r}},S=function(e,t,r,i){e===o?n(e,t,r,i,g):n(e,t,r,i)},j=function(e,t,n){var r=T(e),i=r.resolve,o=r.reject;try{S(n,t,i,o)}catch(e){o(e)}},k=function(){var e=function(t){if(!(this instanceof e))throw new TypeError('Constructor Promise requires "new"');



if(this&&this._promise)throw new TypeError("Bad construction");if(!ne.IsCallable(t))throw new TypeError("not a valid resolver");var n=Oe(this,e,i,{_promise:{result:void 0,state:l,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),r=T(n),o=r.reject;try{t(r.resolve,o)}catch(e){o(e)}return n};return e}();i=k.prototype;var C=function(e,t,n,r){var i=!1;return function(o){if(!i&&(i=!0,t[e]=o,0===--r.count)){var a=n.resolve;a(t)}}},A=function(e,t,n){for(var r,i,o=e.iterator,a=[],s={count:1},u=0;;){try{if(r=ne.IteratorStep(o),r===!1){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}a[u]=void 0;var c=t.resolve(i),l=C(u,a,n,s);s.count+=1,S(c.then,c,l,n.reject),u+=1}if(0===--s.count){var f=n.resolve;f(a)}return n.promise},E=function(e,t,n){for(var r,i,o,a=e.iterator;;){try{if(r=ne.IteratorStep(a),r===!1){e.done=!0;break}i=r.value}catch(t){throw e.done=!0,t}o=t.resolve(i),S(o.then,o,n.resolve,n.reject)}return n.promise};return y(k,{all:function(e){var t=this;if(!ne.TypeIsObject(t))throw new TypeError("Promise is not object");var n,i,o=new r(t);try{return n=ne.GetIterator(e),i={iterator:n,done:!1},A(i,t,o)}catch(e){var a=e;if(i&&!i.done)try{ne.IteratorClose(n,!0)}catch(e){a=e}var s=o.reject;return s(a),o.promise}},race:function(e){var t=this;if(!ne.TypeIsObject(t))throw new TypeError("Promise is not object");var n,i,o=new r(t);try{return n=ne.GetIterator(e),i={iterator:n,done:!1},E(i,t,o)}catch(e){var a=e;if(i&&!i.done)try{ne.IteratorClose(n,!0)}catch(e){a=e}var s=o.reject;return s(a),o.promise}},reject:function(e){var t=this;if(!ne.TypeIsObject(t))throw new TypeError("Bad promise constructor");var n=new r(t),i=n.reject;return i(e),n.promise},resolve:function(e){var t=this;if(!ne.TypeIsObject(t))throw new TypeError("Bad promise constructor");if(ne.IsPromise(e)){var n=e.constructor;if(n===t)return e}var i=new r(t),o=i.resolve;return o(e),i.promise}}),y(i,{catch:function(e){return this.then(null,e)},then:function(e,t){var n=this;if(!ne.IsPromise(n))throw new TypeError("not a promise");var i,o=ne.SpeciesConstructor(n,k),a=arguments.length>2&&arguments[2]===g;i=a&&o===k?g:new r(o);var s,y=ne.IsCallable(e)?e:u,b=ne.IsCallable(t)?t:c,w=n._promise;if(w.state===l){if(0===w.reactionLength)w.fulfillReactionHandler0=y,w.rejectReactionHandler0=b,w.reactionCapability0=i;else{var x=3*(w.reactionLength-1);w[x+d]=y,w[x+h]=b,w[x+m]=i}w.reactionLength+=1}else if(w.state===f)s=w.result,v(y,i,s);else{if(w.state!==p)throw new TypeError("unexpected Promise state");s=w.result,v(b,i,s)}return i.promise}}),g=new r(k),o=i.then,k}}();if(O.Promise&&(delete O.Promise.accept,delete O.Promise.defer,delete O.Promise.prototype.chain),"function"==typeof En){y(O,{Promise:En});var Nn=T(O.Promise,function(e){return e.resolve(42).then(function(){})instanceof e}),_n=!a(function(){O.Promise.reject(42).then(null,5).then(null,$)}),Pn=a(function(){O.Promise.call(3,$)}),In=function(e){var t=e.resolve(5);t.constructor={};var n=e.resolve(t);try{n.then(null,$).then(null,$)}catch(e){return!0}return t===n}(O.Promise),Mn=l&&function(){var e=0,t=Object.defineProperty({},"then",{get:function(){e+=1}});return Promise.resolve(t),1===e}(),Ln=function e(t){var n=new Promise(t);t(3,function(){}),this.then=n.then,this.constructor=e};Ln.prototype=Promise.prototype,Ln.all=Promise.all;var Fn=s(function(){return!!Ln.all([1,2])});if(Nn&&_n&&Pn&&!In&&Mn&&!Fn||(Promise=En,Z(O,"Promise",En)),1!==Promise.all.length){var Dn=Promise.all;Z(Promise,"all",function(){return ne.Call(Dn,this,arguments)})}if(1!==Promise.race.length){var qn=Promise.race;Z(Promise,"race",function(){return ne.Call(qn,this,arguments)})}if(1!==Promise.resolve.length){var Rn=Promise.resolve;Z(Promise,"resolve",function(){return ne.Call(Rn,this,arguments)})}if(1!==Promise.reject.length){var Hn=Promise.reject;Z(Promise,"reject",function(){return ne.Call(Hn,this,arguments)})}xt(Promise,"all"),xt(Promise,"race"),xt(Promise,"resolve"),xt(Promise,"reject"),we(Promise)}var $n=function(e){var t=i(d(e,function(e,t){return e[t]=!0,e},{}));return e.join(":")===t.join(":")},Bn=$n(["z","a","bb"]),Vn=$n(["z",1,"a","3",2]);if(l){var Wn=function(e){return Bn?"undefined"==typeof e||null===e?"^"+ne.ToString(e):"string"==typeof e?"$"+e:"number"==typeof e?Vn?e:"n"+e:"boolean"==typeof e?"b"+e:null:null},zn=function(){return Object.create?Object.create(null):{}},Un=function(e,t,i){if(r(i)||Y.string(i))p(i,function(e){if(!ne.TypeIsObject(e))throw new TypeError("Iterator value "+e+" is not an entry object");t.set(e[0],e[1])});else if(i instanceof e)n(e.prototype.forEach,i,function(e,n){t.set(n,e)});else{var o,a;if(null!==i&&"undefined"!=typeof i){if(a=t.set,!ne.IsCallable(a))throw new TypeError("bad map");o=ne.GetIterator(i)}if("undefined"!=typeof o)for(;;){var s=ne.IteratorStep(o);if(s===!1)break;var u=s.value;try{if(!ne.TypeIsObject(u))throw new TypeError("Iterator value "+u+" is not an entry object");n(a,t,u[0],u[1])}catch(e){throw ne.IteratorClose(o,!0),e}}}},Gn=function(e,t,i){if(r(i)||Y.string(i))p(i,function(e){t.add(e)});else if(i instanceof e)n(e.prototype.forEach,i,function(e){t.add(e)});else{var o,a;if(null!==i&&"undefined"!=typeof i){if(a=t.add,!ne.IsCallable(a))throw new TypeError("bad set");o=ne.GetIterator(i)}if("undefined"!=typeof o)for(;;){var s=ne.IteratorStep(o);if(s===!1)break;var u=s.value;try{n(a,t,u)}catch(e){throw ne.IteratorClose(o,!0),e}}}},Xn={Map:function(){var e={},t=function(e,t){this.key=e,this.value=t,this.next=null,this.prev=null};t.prototype.isRemoved=function(){return this.key===e};var r=function(e){return!!e._es6map},i=function(e,t){if(!ne.TypeIsObject(e)||!r(e))throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ne.ToString(e))},o=function(e,t){i(e,"[[MapIterator]]"),this.head=e._head,this.i=this.head,this.kind=t};o.prototype={next:function(){var e=this.i,t=this.kind,n=this.head;if("undefined"==typeof this.i)return Be();for(;e.isRemoved()&&e!==n;)e=e.prev;for(var r;e.next!==n;)if(e=e.next,!e.isRemoved())return r="key"===t?e.key:"value"===t?e.value:[e.key,e.value],this.i=e,Be(r);return this.i=void 0,Be()}},xe(o.prototype);var a,s=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var n=Oe(this,e,a,{_es6map:!0,_head:null,_storage:zn(),_size:0}),r=new t(null,null);return r.next=r.prev=r,n._head=r,arguments.length>0&&Un(e,n,arguments[0]),n};return a=s.prototype,w.getter(a,"size",function(){if("undefined"==typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size}),y(a,{get:function(e){i(this,"get");var t=Wn(e);if(null!==t){var n=this._storage[t];return n?n.value:void 0}for(var r=this._head,o=r;(o=o.next)!==r;)if(ne.SameValueZero(o.key,e))return o.value},has:function(e){i(this,"has");var t=Wn(e);if(null!==t)return"undefined"!=typeof this._storage[t];for(var n=this._head,r=n;(r=r.next)!==n;)if(ne.SameValueZero(r.key,e))return!0;return!1},set:function(e,n){i(this,"set");var r,o=this._head,a=o,s=Wn(e);if(null!==s){if("undefined"!=typeof this._storage[s])return this._storage[s].value=n,this;r=this._storage[s]=new t(e,n),a=o.prev}for(;(a=a.next)!==o;)if(ne.SameValueZero(a.key,e))return a.value=n,this;return r=r||new t(e,n),ne.SameValue(-0,e)&&(r.key=0),r.next=this._head,r.prev=this._head.prev,r.prev.next=r,r.next.prev=r,this._size+=1,this},delete:function(t){i(this,"delete");var n=this._head,r=n,o=Wn(t);if(null!==o){if("undefined"==typeof this._storage[o])return!1;r=this._storage[o].prev,delete this._storage[o]}for(;(r=r.next)!==n;)if(ne.SameValueZero(r.key,t))return r.key=r.value=e,r.prev.next=r.next,r.next.prev=r.prev,this._size-=1,!0;return!1},clear:function(){i(this,"clear"),this._size=0,this._storage=zn();for(var t=this._head,n=t,r=n.next;(n=r)!==t;)n.key=n.value=e,r=n.next,n.next=n.prev=t;t.next=t.prev=t},keys:function(){return i(this,"keys"),new o(this,"key")},values:function(){return i(this,"values"),new o(this,"value")},entries:function(){return i(this,"entries"),new o(this,"key+value")},forEach:function(e){i(this,"forEach");for(var t=arguments.length>1?arguments[1]:null,r=this.entries(),o=r.next();!o.done;o=r.next())t?n(e,t,o.value[1],o.value[0],this):e(o.value[1],o.value[0],this)}}),xe(a,a.entries),s}(),Set:function(){var e,t=function(e){return e._es6set&&"undefined"!=typeof e._storage},r=function(e,n){if(!ne.TypeIsObject(e)||!t(e))throw new TypeError("Set.prototype."+n+" called on incompatible receiver "+ne.ToString(e))},o=function t(){if(!(this instanceof t))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var n=Oe(this,t,e,{_es6set:!0,"[[SetData]]":null,_storage:zn()});if(!n._es6set)throw new TypeError("bad set");return arguments.length>0&&Gn(t,n,arguments[0]),n};e=o.prototype;var a=function(e){var t=e;if("^null"===t)return null;if("^undefined"===t)return void 0;var n=t.charAt(0);return"$"===n?E(t,1):"n"===n?+E(t,1):"b"===n?"btrue"===t:+t},s=function(e){if(!e["[[SetData]]"]){var t=e["[[SetData]]"]=new Xn.Map;p(i(e._storage),function(e){var n=a(e);t.set(n,n)}),e["[[SetData]]"]=t}e._storage=null};return w.getter(o.prototype,"size",function(){return r(this,"size"),this._storage?i(this._storage).length:(s(this),this["[[SetData]]"].size)}),y(o.prototype,{has:function(e){r(this,"has");var t;return this._storage&&null!==(t=Wn(e))?!!this._storage[t]:(s(this),this["[[SetData]]"].has(e))},add:function(e){r(this,"add");var t;return this._storage&&null!==(t=Wn(e))?(this._storage[t]=!0,this):(s(this),this["[[SetData]]"].set(e,e),this)},delete:function(e){r(this,"delete");var t;if(this._storage&&null!==(t=Wn(e))){var n=H(this._storage,t);return delete this._storage[t]&&n}return s(this),this["[[SetData]]"].delete(e)},clear:function(){r(this,"clear"),this._storage&&(this._storage=zn()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return r(this,"values"),s(this),this["[[SetData]]"].values()},entries:function(){return r(this,"entries"),s(this),this["[[SetData]]"].entries()},forEach:function(e){r(this,"forEach");var t=arguments.length>1?arguments[1]:null,i=this;s(i),this["[[SetData]]"].forEach(function(r,o){t?n(e,t,o,o,i):e(o,o,i)})}}),g(o.prototype,"keys",o.prototype.values,!0),xe(o.prototype,o.prototype.values),o}()};if(O.Map||O.Set){var Jn=s(function(){return 2===new Map([[1,2]]).get(1)});if(!Jn){var Yn=O.Map;O.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new Yn;return arguments.length>0&&Un(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,O.Map.prototype),t},O.Map.prototype=x(Yn.prototype),g(O.Map.prototype,"constructor",O.Map,!0),w.preserveToString(O.Map,Yn)}var Zn=new Map,Qn=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);return e.set(-0,e),e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}(),Kn=Zn.set(1,2)===Zn;if(!Qn||!Kn){var er=Map.prototype.set;Z(Map.prototype,"set",function(e,t){return n(er,this,0===e?0:e,t),this})}if(!Qn){var tr=Map.prototype.get,nr=Map.prototype.has;y(Map.prototype,{get:function(e){return n(tr,this,0===e?0:e)},has:function(e){return n(nr,this,0===e?0:e)}},!0),w.preserveToString(Map.prototype.get,tr),w.preserveToString(Map.prototype.has,nr)}var rr=new Set,ir=function(e){return e.delete(0),e.add(-0),!e.has(0)}(rr),or=rr.add(1)===rr;if(!ir||!or){var ar=Set.prototype.add;Set.prototype.add=function(e){return n(ar,this,0===e?0:e),this},w.preserveToString(Set.prototype.add,ar)}if(!ir){var sr=Set.prototype.has;Set.prototype.has=function(e){return n(sr,this,0===e?0:e)},w.preserveToString(Set.prototype.has,sr);var ur=Set.prototype.delete;Set.prototype.delete=function(e){return n(ur,this,0===e?0:e)},w.preserveToString(Set.prototype.delete,ur)}var cr=T(O.Map,function(e){var t=new e([]);return t.set(42,42),t instanceof e}),lr=Object.setPrototypeOf&&!cr,fr=function(){try{return!(O.Map()instanceof O.Map)}catch(e){return e instanceof TypeError}}();if(0!==O.Map.length||lr||!fr){var pr=O.Map;O.Map=function e(){if(!(this instanceof e))throw new TypeError('Constructor Map requires "new"');var t=new pr;return arguments.length>0&&Un(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},O.Map.prototype=pr.prototype,g(O.Map.prototype,"constructor",O.Map,!0),w.preserveToString(O.Map,pr)}var dr=T(O.Set,function(e){var t=new e([]);return t.add(42,42),t instanceof e}),hr=Object.setPrototypeOf&&!dr,mr=function(){try{return!(O.Set()instanceof O.Set)}catch(e){return e instanceof TypeError}}();if(0!==O.Set.length||hr||!mr){var gr=O.Set;O.Set=function e(){if(!(this instanceof e))throw new TypeError('Constructor Set requires "new"');var t=new gr;return arguments.length>0&&Gn(e,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,e.prototype),t},O.Set.prototype=gr.prototype,g(O.Set.prototype,"constructor",O.Set,!0),w.preserveToString(O.Set,gr)}var yr=new O.Map,vr=!s(function(){return yr.keys().next().done});if(("function"!=typeof O.Map.prototype.clear||0!==(new O.Set).size||0!==yr.size||"function"!=typeof O.Map.prototype.keys||"function"!=typeof O.Set.prototype.keys||"function"!=typeof O.Map.prototype.forEach||"function"!=typeof O.Set.prototype.forEach||u(O.Map)||u(O.Set)||"function"!=typeof yr.keys().next||vr||!cr)&&y(O,{Map:Xn.Map,Set:Xn.Set},!0),O.Set.prototype.keys!==O.Set.prototype.values&&g(O.Set.prototype,"keys",O.Set.prototype.values,!0),xe(Object.getPrototypeOf((new O.Map).keys())),xe(Object.getPrototypeOf((new O.Set).keys())),f&&"has"!==O.Set.prototype.has.name){var br=O.Set.prototype.has;Z(O.Set.prototype,"has",function(e){return n(br,this,e)})}}y(O,Xn),we(O.Map),we(O.Set)}var wr=function(e){if(!ne.TypeIsObject(e))throw new TypeError("target must be an object")},xr={apply:function(){return ne.Call(ne.Call,null,arguments)},construct:function(e,t){if(!ne.IsConstructor(e))throw new TypeError("First argument must be a constructor.");var n=arguments.length>2?arguments[2]:e;if(!ne.IsConstructor(n))throw new TypeError("new.target must be a constructor.");return ne.Construct(e,t,n,"internal")},deleteProperty:function(e,t){if(wr(e),l){var n=Object.getOwnPropertyDescriptor(e,t);if(n&&!n.configurable)return!1}return delete e[t]},has:function(e,t){return wr(e),t in e}};Object.getOwnPropertyNames&&Object.assign(xr,{ownKeys:function(e){wr(e);var t=Object.getOwnPropertyNames(e);return ne.IsCallable(Object.getOwnPropertySymbols)&&_(t,Object.getOwnPropertySymbols(e)),t}});var Tr=function(e){return!a(e)};if(Object.preventExtensions&&Object.assign(xr,{isExtensible:function(e){return wr(e),Object.isExtensible(e)},preventExtensions:function(e){return wr(e),Tr(function(){Object.preventExtensions(e)})}}),l){var Sr=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);if(!r){var i=Object.getPrototypeOf(e);return null===i?void 0:Sr(i,t,n)}return"value"in r?r.value:r.get?ne.Call(r.get,n):void 0},Or=function(e,t,r,i){var o=Object.getOwnPropertyDescriptor(e,t);if(!o){var a=Object.getPrototypeOf(e);if(null!==a)return Or(a,t,r,i);o={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in o){if(!o.writable)return!1;if(!ne.TypeIsObject(i))return!1;var s=Object.getOwnPropertyDescriptor(i,t);return s?ee.defineProperty(i,t,{value:r}):ee.defineProperty(i,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}return o.set?(n(o.set,i,r),!0):!1};Object.assign(xr,{defineProperty:function(e,t,n){return wr(e),Tr(function(){Object.defineProperty(e,t,n)})},getOwnPropertyDescriptor:function(e,t){return wr(e),Object.getOwnPropertyDescriptor(e,t)},get:function(e,t){wr(e);var n=arguments.length>2?arguments[2]:e;return Sr(e,t,n)},set:function(e,t,n){wr(e);var r=arguments.length>3?arguments[3]:e;return Or(e,t,n,r)}})}if(Object.getPrototypeOf){var jr=Object.getPrototypeOf;xr.getPrototypeOf=function(e){return wr(e),jr(e)}}if(Object.setPrototypeOf&&xr.getPrototypeOf){var kr=function(e,t){for(var n=t;n;){if(e===n)return!0;n=xr.getPrototypeOf(n)}return!1};Object.assign(xr,{setPrototypeOf:function(e,t){if(wr(e),null!==t&&!ne.TypeIsObject(t))throw new TypeError("proto must be an object or null");return t===ee.getPrototypeOf(e)?!0:ee.isExtensible&&!ee.isExtensible(e)?!1:kr(e,t)?!1:(Object.setPrototypeOf(e,t),!0)}})}var Cr=function(e,t){if(ne.IsCallable(O.Reflect[e])){var n=s(function(){return O.Reflect[e](1),O.Reflect[e](0/0),O.Reflect[e](!0),!0});n&&Z(O.Reflect,e,t)}else g(O.Reflect,e,t)};Object.keys(xr).forEach(function(e){Cr(e,xr[e])});var Ar=O.Reflect.getPrototypeOf;if(f&&Ar&&"getPrototypeOf"!==Ar.name&&Z(O.Reflect,"getPrototypeOf",function(e){return n(Ar,O.Reflect,e)}),O.Reflect.setPrototypeOf&&s(function(){return O.Reflect.setPrototypeOf(1,{}),!0})&&Z(O.Reflect,"setPrototypeOf",xr.setPrototypeOf),O.Reflect.defineProperty&&(s(function(){var e=!O.Reflect.defineProperty(1,"test",{value:1}),t="function"!=typeof Object.preventExtensions||!O.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})||Z(O.Reflect,"defineProperty",xr.defineProperty)),O.Reflect.construct&&(s(function(){var e=function(){};return O.Reflect.construct(function(){},[],e)instanceof e})||Z(O.Reflect,"construct",xr.construct)),"Invalid Date"!==String(new Date(0/0))){var Er=Date.prototype.toString,Nr=function(){var e=+this;return e!==e?"Invalid Date":ne.Call(Er,this)};Z(Date.prototype,"toString",Nr)}var _r={anchor:function(e){return ne.CreateHTML(this,"a","name",e)},big:function(){return ne.CreateHTML(this,"big","","")},blink:function(){return ne.CreateHTML(this,"blink","","")},bold:function(){return ne.CreateHTML(this,"b","","")},fixed:function(){return ne.CreateHTML(this,"tt","","")},fontcolor:function(e){return ne.CreateHTML(this,"font","color",e)},fontsize:function(e){return ne.CreateHTML(this,"font","size",e)},italics:function(){return ne.CreateHTML(this,"i","","")},link:function(e){return ne.CreateHTML(this,"a","href",e)},small:function(){return ne.CreateHTML(this,"small","","")},strike:function(){return ne.CreateHTML(this,"strike","","")},sub:function(){return ne.CreateHTML(this,"sub","","")},sup:function(){return ne.CreateHTML(this,"sup","","")}};p(Object.keys(_r),function(e){var t=String.prototype[e],r=!1;if(ne.IsCallable(t)){var i=n(t,"",' " '),o=A([],i.match(/"/g)).length;r=i!==i.toLowerCase()||o>2}else r=!0;r&&Z(String.prototype,e,_r[e])});var Pr=function(){if(!Q)return!1;var e="object"===("undefined"==typeof JSON?"undefined":_typeof(JSON))&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!e)return!1;if("undefined"!=typeof e(B()))return!0;if("[null]"!==e([B()]))return!0;var t={a:B()};return t[B()]=!0,"{}"!==e(t)?!0:!1}(),Ir=s(function(){return Q?"{}"===JSON.stringify(Object(B()))&&"[{}]"===JSON.stringify([Object(B())]):!0});if(Pr||!Ir){var Mr=JSON.stringify;Z(JSON,"stringify",function(e){if("symbol"!==("undefined"==typeof e?"undefined":_typeof(e))){var t;arguments.length>1&&(t=arguments[1]);var i=[e];if(r(t))i.push(t);else{var o=ne.IsCallable(t)?t:null,a=function(e,t){var r=o?n(o,this,e,t):t;return"symbol"!==("undefined"==typeof r?"undefined":_typeof(r))?Y.symbol(r)?St({})(r):r:void 0};i.push(a)}return arguments.length>2&&i.push(arguments[2]),Mr.apply(this,i)}})}return O}),define("jqueryplugins",["jquery"],function(e){e.prototype.extend({popAttr:function(e){var t=this.attr(e);return this.removeAttr(e),t},popData:function(e){var t=this.data(e);return this.removeData(e),t},tag:function(){return this[0]&&this[0].tagName&&this[0].tagName.toLowerCase()},textNodes:function(){return 1===this.length&&this[0]instanceof Text?[this[0]]:Array.from(this.add(this.contents().add(this.find("*").contents())).filter(function(){return this instanceof Text})).sort(function(e,t){return 2&e.compareDocumentPosition(t)?1:-1})},findAndFilter:function(e){return this.filter(e).add(this.find(e))}})}),function(){function e(){for(var e=0;e<arguments.length;e++)for(var t in arguments[e])this[t]=arguments[e][t]}function t(e,t){e.childAt=e.childAt||{};for(var n=t.start;n<t.end;n+=1)e.childAt[n]=t}function n(e,t,n,r){return!(e.canFollow&&!(e.canFollow.indexOf(n&&n.type)>-1)||e.cannotFollow&&(-1!==e.cannotFollow.indexOf(n&&n.type)||e.cannotFollow.indexOf("text")>-1&&r)||e.peek&&e.peek.toLowerCase()!==t.slice(0,e.peek.length).toLowerCase())}function r(e){for(var t=e.innerText,r=[],o=0,s=o,u=t.length,c=null;u>o;){for(var l=t.slice(o),f=(r.length?r[0]:e).innerMode,p=0,d=f.length;d>p;p+=1){var h=a[f[p]];if(n(h,l,c,o>s)&&h.pattern.test(l)){var m=h.pattern.exec(l),g=h.fn(m),y=!1,v=0;if(g.matches){for(;v<r.length;v+=1){var b=r[v].type;if(b in g.matches){y=!0;break}0===b.indexOf("verbatim")&&(b="verbatimOpener"),g.cannotCross&&g.cannotCross.indexOf(b)>-1&&(v=r.length-1)}if(v>=r.length&&!g.isFront)continue}o>s&&e.addChild({type:"text",text:t.slice(s,o),innerMode:f}),c=e.addChild(g),o+=c.text.length,s=o,y&&(i(e,c,r[v]),r=r.slice(v+1)),c.isFrontToken()&&r.unshift(c);break}}p===d&&(o+=1,null===c&&(c={type:"text"}))}for(o>s&&e.addChild({type:"text",text:t.slice(s,o),innerMode:(r.length?r[0]:e).innerMode});r.length>0;)r.shift().demote();return e}function i(e,n,r){var i=e.children.indexOf(n),o=e.children.indexOf(r);n.children=e.children.splice(o+1,i-(o+1)),n.children.forEach(function(e){t(n,e)}),n.type=n.matches[r.type],n.innerText="";for(var a=0,s=n.children.length;s>a;a++)n.innerText+=n.children[a].text;n.start=r.start,n.text=r.text+n.innerText+n.text,Object.keys(r).forEach(function(e){Object.hasOwnProperty.call(n,e)||(n[e]=r[e])}),n.isFront&&(n.isFront=!1),e.children.splice(o,1),t(e,n)}var o=void 0,a={};e.prototype={constructor:e,addChild:function(n){var i=this.lastChildEnd(),o=new e({start:i,end:n.text&&i+n.text.length,children:[]},n);return o.innerText&&r(o),this.children.push(o),t(this,o),o},lastChild:function(){return this.children?this.children[this.children.length-1]||null:null},lastChildEnd:function(){var e=this.lastChild();return e?e.end:this.start+Math.max(0,this.text.indexOf(this.innerText))},tokenAt:function(e){if(e<this.start||e>=this.end)return null;if(this.childAt)return this.childAt[e]&&this.childAt[e].tokenAt(e)||this;if(this.children.length)for(var t=0;t<this.children.length;t+=1){var n=this.children[t].tokenAt(e);if(n)return n}return this},pathAt:function(e){if(e<this.start||e>=this.end)return[];if(this.childAt)return(this.childAt[e]&&this.childAt[e].pathAt(e)||[]).concat(this);var t=[];if(this.children.length)for(var n=0;n<this.children.length;n+=1){var r=this.children[n].pathAt(e);if(r.length){t.concat(r);break}}return t.concat(this)},nearestTokenAt:function(e){return e<this.start||e>=this.end?null:this.children?this.children.reduce(function(t,n){return t||(e>=n.start&&e<n.end?n:null)},null):this},everyLeaf:function(e){return this.children&&0!==this.children.length?this.children.reduce(function(t,n){return n.everyLeaf(e)&&t},!0):!!e(this)},isWhitespace:function(){return this.everyLeaf(function(e){return"whitespace"===e.type||!e.text.trim()})},isFrontToken:function(){return this.isFront},isBackToken:function(){return"matches"in this},demote:function(){this.type="text"},error:function(e){this.type="error",this.message=e},toString:function(){var e=this.type+"("+this.start+"\u2192"+this.end+")";return this.children&&this.children.length>0&&(e+="["+this.children+"]"),e}},o={lex:function(t,n){return r(new e({type:"root",start:n||0,end:t.length,text:t,innerText:t,children:[],childAt:{},innerMode:o.modes.start}))},rules:a,modes:{}},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=o:"function"==typeof define&&define.amd?define("lexer",[],function(){return o}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Lexer=o):this.TwineLexer=o}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){function e(t){return t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?(Object.keys(t).forEach(function(n){t[n]=e(t[n])}),t):(t+"").replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function t(){return"[^"+Array.apply(0,arguments).map(e).join("")+"]*"}function n(e){return function(){return"("+e+Array.apply(0,arguments).join("|")+")"}}var r=void 0,i=n("?:"),o=n("?!"),a=n("?="),s="[ \\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]*",u=s.replace("*","+"),c="\\b",l="\\\\\\n\\\\?|\\n\\\\",f="\\n(?!\\\\)",p="[\\w\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",d=p.replace("\\-",""),h=i("\\n","$"),m="("+i(l,"[^\\n]")+"+)",g="\\*",y=s+"("+g+"+)"+u+m+h,v="(?:0\\.)",b=s+"("+v+"+)"+u+m+h,w=s+"-{3,}"+s+h,x=s+"(#{1,6})"+s+m+h,T=s+"(==+>|<=+|=+><=+|<==+>)"+s+h,S=s+"(=+\\|+|\\|+=+|=+\\|+=+|\\|=+\\|)"+s+h,O={opener:"\\[\\[(?!\\[)",text:"("+t("]")+")",rightSeparator:i("\\->","\\|"),leftSeparator:"<\\-",closer:"\\]\\]",legacySeparator:"\\|",legacyText:"("+i("[^\\|\\]]","\\]"+o("\\]"))+"+)"},j=d+"*"+d.replace("\\w","a-zA-Z")+d+"*",k="\\$("+j+")",C="'s"+u+"("+j+")",A="("+j+")"+u+"of"+c+o("it"+c),E="'s"+u,N="of"+c,_=i("it","time")+c,P="its"+u+"("+j+")",I="its"+u,M="("+j+")"+u+"of"+u+"it"+c,L="of"+c+u+"it"+c,F={opener:"\\(",name:"("+i(p+"+",k)+"):"+o("\\/"),closer:"\\)"},D="<<[^>\\s]+\\s*(?:\\\\.|'(?:[^'\\\\]*\\\\.)*[^'\\\\]*'|\"(?:[^\"\\\\]*\\\\.)*[^\"\\\\]*\"|[^'\"\\\\>]|>(?!>))*>>",q=i("=<","=>","[gl]te?"+c,"n?eq"+c,"isnot"+c,"are"+c,"x"+c),R={name:"[a-zA-Z][\\w\\-]*",attrs:"(?:\"[^\"]*\"|'[^']*'|[^'\">])*?"},H="\\|("+p+"+)(>|\\))",$="(<|\\()("+p+"+)\\|",B="_("+j+")"+c,V="\\b(\\d+(?:\\.\\d+)?(?:[eE][+\\-]?\\d+)?)"+o("m?s")+c;O.main=O.opener+i(O.text+O.rightSeparator,O.text.replace("*","*?")+O.leftSeparator)+O.text,r={upperLetter:"[A-Z\\u00c0-\\u00de\\u0150\\u0170]",lowerLetter:"[a-z0-9_\\-\\u00df-\\u00ff\\u0151\\u0171]",anyLetter:p,anyLetterStrict:d,whitespace:u,escapedLine:l,br:f,commentFront:"<!--",commentBack:"-->",tag:"<\\/?"+R.name+R.attrs+">",tagPeek:"<",scriptStyleTag:"<("+i("script","style")+")"+R.attrs+">[^]*?<\\/\\1>",scriptStyleTagOpener:"<",url:"("+i("https?","mailto","javascript","ftp","data")+":\\/\\/[^\\s<]+[^<.,:;\"')\\]\\s])",bullet:g,hr:w,heading:x,align:T,column:S,bulleted:y,numbered:b,strikeOpener:e("~~"),italicOpener:e("//"),boldOpener:e("''"),supOpener:e("^^"),strongFront:e("**"),strongBack:e("**"),emFront:e("*"),emBack:e("*"),verbatimOpener:"`+",collapsedFront:"{",collapsedBack:"}",hookAppendedFront:"\\[",hookPrependedFront:H+"\\[",hookFront:"\\[",hookBack:"\\]"+o($),hookAppendedBack:"\\]"+$,passageLink:O.main+O.closer,passageLinkPeek:"[[",legacyLink:O.opener+O.legacyText+O.legacySeparator+O.legacyText+O.closer,legacyLinkPeek:"[[",simpleLink:O.opener+O.legacyText+O.closer,simpleLinkPeek:"[[",macroFront:F.opener+a(F.name),macroFrontPeek:"(",macroName:F.name,groupingFront:"\\("+o(F.name),groupingFrontPeek:"(",groupingBack:"\\)",twine1Macro:D,twine1MacroPeek:"<<",property:C,propertyPeek:"'s",belongingProperty:A,possessiveOperator:E,belongingOperator:N,belongingOperatorPeek:"of",itsOperator:I,itsOperatorPeek:"its",belongingItOperator:L,belongingItOperatorPeek:"of",variable:k,variablePeek:"$",tempVariable:B,tempVariablePeek:"_",hookRef:"\\?("+p+"+)\\b",hookRefPeek:"?",cssTime:"(\\d+\\.?\\d*|\\d*\\.?\\d+)(m?s)"+c,colour:i(i("Red","Orange","Yellow","Lime","Green","Cyan","Aqua","Blue","Navy","Purple","Fuchsia","Magenta","White","Gray","Grey","Black"),"#[\\dA-Fa-f]{3}(?:[\\dA-Fa-f]{3})?"),number:V,boolean:i("true","false")+c,identifier:_,itsProperty:P,itsPropertyPeek:"its",belongingItProperty:M,escapedStringChar:"\\\\[^\\n]",singleStringOpener:"'",doubleStringOpener:'"',is:"is"+o(u+"not",u+"in",u+"<",u+">")+c,isNot:"is"+u+"not"+c,and:"and"+c,or:"or"+c,not:"not"+c,inequality:"((?:is(?:"+u+"not)?"+s+")*)("+i("<(?!=)","<=",">(?!=)",">=")+")",isIn:"is"+u+"in"+c,contains:"contains"+c,addition:e("+")+o("="),subtraction:e("-")+o("="),multiplication:e("*")+o("="),division:i("/","%")+o("="),comma:",",spread:"\\.\\.\\."+o("\\."),to:i("to"+c,"="),into:"into"+c,making:"making"+c,where:"where"+c,via:"via"+c,with:"with"+c,each:"each"+c,augmentedAssign:i("\\+","\\-","\\*","\\/","%")+"=",incorrectOperator:q},"object"===("undefined"==typeof module?"undefined":_typeof(module))?module.exports=r:"function"==typeof define&&define.amd?define("patterns",[],function(){return r}):this&&this.loaded?(this.modules||(this.modules={}),this.modules.Patterns=r):this.Patterns=r}.call(eval("this")||("undefined"!=typeof global?global:window)),function(){function e(e){function t(e){return e=e||"innerText",function(t){var n=t.reduceRight(function(e,t,n){return e||(n?t:"")},""),r={};return r[e]=n,r}}function r(e,t){var n={};return n[e]=t,function(){return{isFront:!0,matches:n,cannotCross:["verbatimOpener"]}}}function i(e,t){return Object.keys(t).forEach(function(n){var r=t[n].fn;t[n].fn=function(t){var i=r(t);return i.text||(i.text=t[0]),i.type||(i.type=n),i.innerMode||(i.innerMode=e),i}}),t}var o=Object.bind(0,null),a=[],s=[],u=i(a,{hr:{fn:o},bulleted:{fn:function(e){return{depth:e[1].length,innerText:e[2]}}},numbered:{fn:function(e){return{depth:e[1].length/2,innerText:e[2]}}},heading:{fn:function(e){return{depth:e[1].length,innerText:e[2]}}},align:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("><");return~r?(t=Math.round(r/(n.length-2)*50),25===t&&(t="center")):"<"===n[0]&&">"===n.slice(-1)?t="justify":n.indexOf(">")>-1?t="right":n.indexOf("<")>-1&&(t="left"),{align:t}}},column:{fn:function(e){var t=void 0,n=e[1],r=n.indexOf("|");return r&&r<n.length-1?t="center":"|"===n[0]&&"|"===n.slice(-1)?t="none":r===n.length-1?t="right":r||(t="left"),{column:t,width:/\|+/.exec(n)[0].length,marginLeft:/^=*/.exec(n)[0].length,marginRight:/=*$/.exec(n)[0].length}}}});Object.keys(u).forEach(function(e){u[e].canFollow=[null,"br","hr","bulleted","numbered","heading","align"],u[e].cannotFollow=["text"]});var c=i(a,{twine1Macro:{fn:function(){return{type:"error",message:"Harlowe macros use a different syntax to Twine 1 and SugarCube macros."}}},emBack:{fn:function(){return{matches:{emFront:"em"},cannotCross:["verbatimOpener"]}}},strongBack:{fn:function(){return{matches:{strongFront:"strong"},cannotCross:["verbatimOpener"]}}},strongFront:{fn:function(){return{isFront:!0}}},emFront:{fn:function(){return{isFront:!0}}},boldOpener:{fn:r("boldOpener","bold")},italicOpener:{fn:r("italicOpener","italic")},strikeOpener:{fn:r("strikeOpener","strike")},supOpener:{fn:r("supOpener","sup")},commentFront:{fn:function(){return{isFront:!0}}},commentBack:{fn:function(){return{matches:{commentFront:"comment"}}}},scriptStyleTag:{fn:o},tag:{fn:o},url:{fn:o},hookPrependedFront:{fn:function(e){return{name:e[1],hidden:")"===e[2],isFront:!0,tagPosition:"prepended"}}},hookFront:{fn:function(){return{isFront:!0}}},hookBack:{fn:function(){return{matches:{hookPrependedFront:"hook",hookFront:"hook"},cannotCross:["verbatimOpener"]}}},hookAppendedBack:{fn:function(e){return{name:e[2],hidden:"("===e[1],tagPosition:"appended",matches:{hookFront:"hook"},cannotCross:["verbatimOpener"]}}},verbatimOpener:{fn:function(e){var t=e[0].length,n={};return n["verbatim"+t]="verbatim",{type:"verbatim"+t,isFront:!0,matches:n}}},collapsedFront:{fn:function(){return{isFront:!0}}},collapsedBack:{fn:function(){return{matches:{collapsedFront:"collapsed"},cannotCross:["verbatimOpener"]}}},escapedLine:{fn:o},legacyLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[2]}}},br:{fn:o}}),l=i(s,{macroFront:{fn:function(e){return{isFront:!0,name:e[1]}}},groupingBack:{fn:function(){return{matches:{groupingFront:"grouping",macroFront:"macro"},cannotCross:["singleStringOpener","doubleStringOpener"]}}},passageLink:{fn:function(e){var t=e[1],n=e[2],r=e[3];return{type:"twineLink",innerText:n?r:t,passage:t?r:n}}},simpleLink:{fn:function(e){return{type:"twineLink",innerText:e[1],passage:e[1]}}},variable:{fn:t("name")},tempVariable:{fn:t("name")}}),f=i(s,Object.assign({macroName:{canFollow:["macroFront"],fn:function(e){return e[2]?{isMethodCall:!0,innerText:e[2]}:{isMethodCall:!1}}},groupingFront:{fn:function(){return{isFront:!0}}},property:{fn:t("name"),canFollow:["variable","hookRef","property","tempVariable","colour","itsProperty","belongingItProperty","macro","grouping","string","boolean","number"]},possessiveOperator:{

fn:o},itsProperty:{cannotFollow:["text"],fn:t("name")},itsOperator:{cannotFollow:["text"],fn:o},belongingItProperty:{cannotFollow:["text"],fn:t("name")},belongingItOperator:{cannotFollow:["text"],fn:o},belongingProperty:{cannotFollow:["text"],fn:t("name")},belongingOperator:{cannotFollow:["text"],fn:o},escapedStringChar:{fn:function(){return{type:"text"}}},singleStringOpener:{fn:function(){return{isFront:!0,matches:{singleStringOpener:"string"}}}},doubleStringOpener:{fn:function(){return{isFront:!0,matches:{doubleStringOpener:"string"}}}},hookRef:{fn:t("name")},cssTime:{fn:function(e){return{value:+e[1]*("s"===e[2].toLowerCase()?1e3:1)}}},colour:{cannotFollow:["text"],fn:function(e){var t,n=e[0].toLowerCase(),r={red:"e61919",orange:"e68019",yellow:"e5e619",lime:"80e619",green:"19e619",cyan:"19e5e6",aqua:"19e5e6",blue:"197fe6",navy:"1919e6",purple:"7f19e6",fuchsia:"e619e5",magenta:"e619e5",white:"fff",black:"000",gray:"888",grey:"888"};return t=Object.hasOwnProperty.call(r,n)?"#"+r[n]:n,{colour:t}}},number:{fn:function(e){return{value:parseFloat(e[0])}}},addition:{fn:o},subtraction:{fn:o},multiplication:{fn:o},division:{fn:o},inequality:{fn:function(e){return{operator:e[2],negate:e[1].indexOf("not")>-1}}},augmentedAssign:{fn:function(e){return{operator:e[0][0]}}},identifier:{fn:t("name"),cannotFollow:["text"]},whitespace:{fn:o,cannotFollow:"text"},incorrectOperator:{fn:function(e){var t={"=>":">=","=<":"<=",gte:">=",lte:"<=",gt:">",lt:"<",eq:"is",isnot:"is not",neq:"is not",are:"is",x:"*"}[e[0].toLowerCase()];return{type:"error",message:"Please say "+(t?"'"+t+"'":"something else")+" instead of '"+e[0]+"'."}},cannotFollow:"text"}},["boolean","is","to","into","where","via","with","making","each","and","or","not","isNot","contains","isIn"].reduce(function(e,t){return e[t]={fn:o,cannotFollow:["text"]},e},{}),["comma","spread","addition","subtraction","multiplication","division"].reduce(function(e,t){return e[t]={fn:o},e},{})));a.push.apply(a,_toConsumableArray(Object.keys(u)).concat(_toConsumableArray(Object.keys(l)),_toConsumableArray(Object.keys(c)))),s.push.apply(s,_toConsumableArray(Object.keys(l)).concat(_toConsumableArray(Object.keys(f))));var p=Object.assign({},u,c,l,f);return Object.keys(p).forEach(function(e){var t=n[e];p[e].pattern="string"!=typeof t?t:new RegExp("^(?:"+t+")","i"),n[e+"Peek"]&&(p[e].peek=n[e+"Peek"])}),Object.assign(e.rules,p),e.modes.start=e.modes.markup=a,e.modes.macro=s,e}function t(t){return Object.freeze({lex:e(t).lex,Patterns:n})}var n=void 0;Object.assign=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},"object"===("undefined"==typeof module?"undefined":_typeof(module))?(n=require("./patterns"),module.exports=t(require("./lexer"))):"function"==typeof define&&define.amd?define("markup",["lexer","patterns"],function(e,r){return n=r,t(e)}):this&&this.loaded&&this.modules?(n=this.modules.Patterns,this.modules.Markup=t(this.modules.Lexer)):(n=this.Patterns,this.TwineMarkup=t(this.TwineLexer))}.call(eval("this")||("undefined"!=typeof global?global:window)),define("utils/selectors",[],function(){return Object.freeze({passage:"tw-passage",story:"tw-story",sidebar:"tw-sidebar",internalLink:"tw-link",brokenLink:"tw-broken-link",hook:"tw-hook",enchantment:"tw-enchantment",expression:"tw-expression",script:"[role=script]",stylesheet:"[role=stylesheet]",storyData:"tw-storydata",passageData:"tw-passagedata",collapsed:"tw-collapsed"})}),define("utils/polyfills",[],function(){var e=Array.prototype;"function"!=typeof e.includes&&(e.includes=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!Number.isNaN(t)&&Number.isFinite(n)&&"undefined"!=typeof t)return e.indexOf.call(this,t,n)>-1;var r=Object(this),i=parseInt(r.length);if(0>=i)return!1;for(var o=n>=0?n:Math.max(0,i+n);i>o;){if(Object.is(t,r[o]))return!0;o+=1}return!1})}),define("utils",["jquery","markup","utils/selectors","utils/polyfills"],function(e,t,n){function r(t,n){var r=o[n];if(!r[t]){var i=e("<p>").appendTo(document.body).attr("data-t8n",t).addClass(n);r[t]=c.cssTimeUnit(i.css("animation-duration"))+c.cssTimeUnit(i.css("animation-delay")),i.remove()}return r[t]}var i={configurable:0,writable:0},o={"transition-in":Object.create(null),"transition-out":Object.create(null)},a="audio,blockquote,canvas,div,h1,h2,h3,h4,h5,hr,ol,p,pre,table,ul,video,tw-align,tw-story,tw-passage".split(","),s="a,b,i,em,strong,sup,sub,abbr,acronym,s,strike,del,big,small,script,img,button,input,tw-link,tw-broken-link,tw-verbatim,tw-collapsed,tw-error".split(","),u=["audio"],c=void 0,l=void 0;return c={lockProperty:function(e,t,n){var r=Object.create(i);return n&&(r.value=n),Object.defineProperty(e,t,r),e},toJSLiteral:function(e){return e instanceof Map?"(new Map("+c.toJSLiteral([].concat(_toConsumableArray(e.entries())))+"))":e instanceof Set?"(new Set("+c.toJSLiteral([].concat(_toConsumableArray(e.values())))+"))":JSON.stringify(e)},cssTimeUnit:function(e){return e=e.toLowerCase(),"ms"===e.slice(-2)?+e.slice(0,-2)||0:"s"===e.slice(-1)?1e3*+e.slice(0,-1)||0:0},nth:function(e){var t=(+e+"").slice(-1);return e+("1"===t?"st":"2"===t?"nd":"3"===t?"rd":"th")},plural:function(e,t){return e+" "+t+(e>1?"s":"")},andList:function(e){return 1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},realWhitespace:"[ \\n\\r\\f\\t\\v\\u00a0\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]",anyRealLetter:"[\\dA-Za-z\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171\\uD800-\\uDFFF]",unescape:function(e){return e.replace(/&(?:amp|lt|gt|quot|nbsp|zwnj|#39|#96);/g,function(e){return{"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'","&nbsp;":String.fromCharCode(160),"&zwnj;":String.fromCharCode(8204)}[e]})},escape:function(e){return e.replace(/[&><"']/g,function(e){return{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"}[e]})},insensitiveName:function(e){return(e+"").toLowerCase().replace(/-|_/g,"")},childrenProbablyInline:function(e){var t=[];return Array.prototype.every.call(e.find("*"),function(e){return e.hidden||/none|inline/.test(e.style.display)?!0:a.includes(e.tagName.toLowerCase())||/none|inline/.test(e.style.display)?!1:s.includes(e.tagName.toLowerCase())?!0:(t.push(e),!0)})&&t.every(function(e){return/none|inline/.test(e.style.display)})},transitionReplace:function(t,r,i){var o=t.closest(n.hook);o.length>0&&(t=o);var a=e("<tw-transition-container>").css("position","relative");a.insertBefore(t.first());var s=void 0;r&&(s=e("<tw-transition-container>").appendTo(a),r.appendTo(s));var u=e("<tw-transition-container>").css("position","absolute").prependTo(a);t.detach().appendTo(u),c.transitionOut(u,i),r&&c.transitionIn(s,i,function(){s.unwrap().children().first().unwrap()})},transitionOut:function(e,t,n){function i(){e.remove()}var o=c.childrenProbablyInline(e),a=e.length>1||!o||!["tw-hook","tw-passage"].includes(e.tag());a&&(e=e.wrapAll("<tw-transition-container>").parent()),e.attr("data-t8n",t).addClass("transition-out"),c.childrenProbablyInline(e)&&e.css("display","inline-block"),"number"==typeof n&&e.css("animation-duration",n+"ms");var s=n||r(t,"transition-out");s?window.setTimeout(i,s):i()},transitionIn:function(e,t,n){function i(){var t=0===e.findAndFilter(u.join(",")).length;a&&t?e.contents().unwrap():e.removeClass("transition-in").removeAttr("data-t8n")}var o=c.childrenProbablyInline(e),a=e.length>1||!o||!["tw-hook","tw-passage"].includes(e.tag());a&&(e=e.wrapAll("<tw-transition-container>").parent()),e.attr("data-t8n",t).addClass("transition-in"),"number"==typeof n&&e.css("animation-duration",n+"ms"),c.childrenProbablyInline(e)&&e.css("display","inline-block");var s=n||r(t,"transition-in");s?window.setTimeout(i,s):i()},$:function(t,n){return e(t,n||c.storyElement).not(".transition-out, .transition-out *")},impossible:function(e,t){window.console&&console.error(e+"(): "+t)},assertMustHave:function(e,t){if(window.console)for(var n=0;n<t.length;n+=1)t[n]in e||console.error("Assertion failed: object lacks property "+t[n])},assertOnlyHas:function(e,t){if(window.console)for(var n in e)t.includes(n)||console.error("Assertion failed: object had unexpected property '"+n+"'!")},get storyElement(){return l}},e(function(){return l=e(n.story)}),Object.freeze(c)}),define("passages",["jquery","utils","utils/selectors"],function(e,t,n){function r(e){return Object.assign(new Map([["source",i(e.html())],["tags",(e.attr("tags")||"").split(/\s/)||[]],["name",e.attr("name")]]),{TwineScript_TypeName:"passage datamap",TwineScript_ObjectName:"a passage datamap"})}var i=t.unescape,o=Object.assign(new Map,{TwineScript_ObjectName:"the Passages datamap",getTagged:function(e){var t=[];return this.forEach(function(n){var r=n instanceof Map&&n.get("tags");Array.isArray(r)&&r.includes(e)&&t.push(n)}),t.sort(function(e,t){return e.get("name")>t.get("name")})},create:r});return e(function(){Array.from(e(n.storyData+" > "+n.passageData)).forEach(function(t){t=e(t),o.set(t.attr("name"),new r(t))})}),o}),define("datatypes/hookset",["jquery","utils","utils/selectors","markup"],function(e,t,n,r){function i(e,t,n){var r=e.textContent.length;if(!(t>=r)){var i=void 0,o=[i=0===t?e:e.splitText(t)];return n&&(0>=n&&(n=r-n),r>n&&o.push(i.splitText(n-t))),o}}function o(e,t){var n=[],r="",a=[];if(!e.length||!t)return a;for(;e.length>0;){n.push(e[0]),r+=e[0].textContent,e.shift();var s=r.indexOf(t);if(s>-1){for(var u,c=r.length-(s+t.length);s>=n[0].textContent.length;)s-=n[0].textContent.length,n.shift();if(1===n.length){var l=i(n[0],s,s+t.length);a.push(l[0]),l[1]&&e.unshift(l[1]);break}a.push(i(n[0],s,n[0].length)[0]),(u=a).push.apply(u,_toConsumableArray(n.slice(1,-1)));var f=i(n[n.length-1],0,n[n.length-1].textContent.length-c);a.push(f[0]),f[1]&&e.unshift(f[1]),a=a.filter(Boolean);break}}return[a].concat(_toConsumableArray(o(e,t)))}function a(t,n,r){var i=o(n.textNodes(),t),a=e();return i.forEach(function(t){a=a.add(e(t).wrapAll(r))}),a.parent()}function s(e){e=t.insensitiveName(e).replace(/\?/g,"").replace(/"/g,"&quot;");var r=n.hook+'[name="'+e+'"]';return r+={page:", tw-story",passage:", tw-passage",sidebar:", tw-sidebar",link:", tw-link, .enchantment-link"}[e]||""}function u(n){var r=n.dom,i=e();this.prev&&(i=i.add(u.call(this.prev,{dom:r})));var o=function(t,n){return Array.isArray(n)?n.reduce(function(e,n){return e.add(t.get(n))},e()):e(t.get(n))};if(this.selector){var c=void 0;c=this.selector.match("^"+f.hookRef+"$")?r.add(r.parentsUntil(t.storyElement.parent())).findAndFilter(s(this.selector)):a(this.selector,r,"<tw-pseudo-hook>"),i=i.add(this.properties.length?this.properties.reduce(o,c):c)}return this.base&&(i=i.add(this.properties.reduce(o,u.call(this.base,{dom:r})))),i}function c(e){var n=e.dom;t.$("tw-pseudo-hook",n).contents().unwrap().parent().each(function(){this.normalize()})}function l(e){if(!e)return[];var n=e.selector,r=e.base,i=e.properties,o=e.prev;return[JSON.stringify([t.insensitiveName(n)||"",l(r),[].concat(_toConsumableArray(i)).sort()])].concat(_toConsumableArray(l(o))).sort()}var f=r.Patterns,p=Object.freeze({forEach:function(t,n){var r=u.call(this,t).each(function(t){n(e(this),t)});return c.call(this,t),r},get TwineScript_ObjectName(){return this.properties.length>0||this.prev?"a complex hook name":this.selector+" (a hook name)"},TwineScript_TypeName:"a hook name (like ?this)",TwineScript_Unstorable:!0,"TwineScript_+":function(e){var t=e.TwineScript_Clone();return t.prev=this,t},TwineScript_is:function(e){return l(this)+""==l(e)+""},TwineScript_GetElement:function(e){return p.create(void 0,this,[e],void 0)},TwineScript_Clone:function(){return p.create(this.selector,this.base,this.properties,this.prev)},create:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Object.assign(Object.create(this||p),{selector:e,base:t,properties:n,prev:r})},from:function(e){return p.isPrototypeOf(e)?e:p.create(e)}});return p}),define("internaltypes/twineerror",["jquery","utils"],function(e,t){var n=t.impossible,r=t.escape,i={syntax:"The markup seems to contain a mistake.",saving:"I tried to save or load the game, but I couldn't do it.",operation:"I tried to perform an operation on some data, but the data's type was incorrect.",macrocall:"I tried to use a macro, but its call wasn't written correctly.",datatype:"I tried to use a macro, but was given the wrong type of data to it.",keyword:"I was given a keyword in a way that I didn't understand.",infinite:"I almost ended up doing the same thing over and over, forever.",property:"I tried to access a value in a string/array/datamap, but I couldn't find it.",unimplemented:"I currently don't have this particular feature. I'm sorry.",javascript:"This error message was reported by your browser's Javascript engine. I don't understand it either, but it usually means that an expression was badly written."},o={create:function(e,t,r){return t||n("TwineError.create","called with only 1 string."),r||e in i||n("TwineError.create","no error explanation given"),Object.assign(Object.create(this),{type:e,message:t,explanation:r})},fromError:function(e){return o.create("javascript","\u2615 "+e.message)},containsError:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return t.reduce(function(e,t){return e?e:t instanceof Error?t:o.isPrototypeOf(t)?t:Array.isArray(t)?o.containsError.apply(o,_toConsumableArray(t)):!1},!1)},createWarning:function(e,t){return Object.assign(this.create(e,t),{warning:!0})},render:function(t){t=t||"";var n=e("<tw-error class='"+("javascript"===this.type?"javascript ":"")+(this.warning?"warning":"error")+"' title='"+r(t)+"'>"+r(this.message)+"</tw-error>"),o=e("<tw-error-explanation>").text(this.explanation||i[this.type]).hide(),a=e("<tw-error-explanation-button tabindex=0>").html("<span class='folddown-arrowhead'>&#9658;</span>");return a.on("click",function(){o.toggle(),a.children(".folddown-arrowhead").css("transform","rotate("+(o.is(":visible")?"90deg":"0deg")+")")}),n.append(a).append(o),n}};return o}),define("utils/operationutils",["utils","datatypes/hookset","internaltypes/twineerror"],function(e,t,n){function r(e){return!!e&&("object"===("undefined"==typeof e?"undefined":_typeof(e))||"function"==typeof e)}function i(e){return Array.isArray(e)?"array":e instanceof Map?"datamap":e instanceof Set?"dataset":"string"==typeof e?"string":e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?"object":""}function o(e,t){if(e instanceof Map||g("isValidDatamapName","called with non-Map"),"string"!=typeof t&&"number"!=typeof t)return n.create("property","Only strings and numbers can be used as data names for "+l(e)+", not "+l(t)+".");var r="string"==typeof t?+t:""+t;return!Number.isNaN(r)&&e.has(r)?n.create("property","You mustn't use both "+l(t)+" and "+l(r)+" as data names in the same datamap."):!0}function a(e,t){if(null===t)return void 0===e;if(t.innerType){if("optional"===t.pattern||"zero or more"===t.pattern)return void 0===e?!0:a(e,t.innerType);if("either"===t.pattern)return t.innerType.some(function(t){return a(e,t)});if("lambda"===t.pattern&&a(e,t.innerType))return"string"!=typeof t.clauses&&g("singleTypeCheck","lambda signature had non-string clauses"),t.clauses.includes("where")==="where"in e&&t.clauses.includes("making")==="making"in e&&t.clauses.includes("via")==="via"in e&&t.clauses.includes("with")==="with"in e;if("wrapped"===t.pattern)return a(e,t.innerType)}return void 0!==t&&void 0===e?!1:"anything"!==t.TwineScript_TypeName||void 0===e||e.TwineScript_Unstorable?t===String?"string"==typeof e:t===Boolean?"boolean"==typeof e:t===parseInt?"number"==typeof e&&!Number.isNaN(e)&&!(e+"").includes("."):t===Number?"number"==typeof e&&!Number.isNaN(e):t===Array?Array.isArray(e):t===Map||t===Set?e instanceof t:Object.isPrototypeOf.call(t,e):!0}function s(e){return"string"==typeof e||Array.isArray(e)||t.isPrototypeOf(e)}function u(e){if(!r(e))return e;if("function"==typeof e.TwineScript_Clone)return e.TwineScript_Clone();if(Array.isArray(e))return[].concat(_toConsumableArray(e));if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if("function"==typeof e)return Object.assign(e.bind(),e);switch(Object.getPrototypeOf(e)){case Object.prototype:return Object.assign({},e);case null:return Object.assign(Object.create(null),e)}return g("OperationUtils.clone","The value "+(e.toSource?e.toSource():e)+" cannot be cloned!"),e}function c(e,t,n){return"string"==typeof t&&r(n)&&"TwineScript_ToString"in n?e(t,n.TwineScript_ToString()):"string"==typeof n&&r(t)&&"TwineScript_ToString"in t?e(t.TwineScript_ToString(),n):!1}function l(e){return r(e)&&"TwineScript_ObjectName"in e?e.TwineScript_ObjectName:Array.isArray(e)?"an array":e instanceof Map?"a datamap":e instanceof Set?"a dataset":"boolean"==typeof e?"the boolean value '"+e+"'":"string"==typeof e||"number"==typeof e?"the "+("undefined"==typeof e?"undefined":_typeof(e))+" "+y(e):void 0===e?"an empty variable":"...whatever this is"}function f(e){return e.innerType?"either"===e.pattern?(Array.isArray(e.innerType)||g("typeName",'"either" pattern had non-array inner type'),e.innerType.map(f).join(" or ")):"optional"===e.pattern?"(an optional) "+f(e.innerType):f(e.innerType):e===String||e===Number||e===Boolean?"a "+_typeof(e()):e===parseInt?"a non-fractional number":e===Map?"a datamap":e===Set?"a dataset":e===Array?"an array":r(e)&&"TwineScript_TypeName"in e?e.TwineScript_TypeName:l(e)}function p(e,t){return"object"!==("undefined"==typeof e?"undefined":_typeof(e))&&"object"!==("undefined"==typeof t?"undefined":_typeof(t))?e===t:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:e.every(function(e,n){return p(t[n],e)}):e instanceof Map&&t instanceof Map?p(Array.from(e.entries()).sort(),Array.from(t.entries()).sort()):e instanceof Set&&t instanceof Set?p([].concat(_toConsumableArray(e)),[].concat(_toConsumableArray(t))):e&&"function"==typeof e.TwineScript_is?e.TwineScript_is(t):e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype?p(Object.getOwnPropertyNames(e).map(function(t){return[t,e[t]]}),Object.getOwnPropertyNames(t).map(function(e){return[e,t[e]]})):Object.is(e,t)}function d(e,t){if(e){if("string"==typeof e)return e.includes(t);if(Array.isArray(e))return e.some(function(e){return p(e,t)});if(e instanceof Set||e instanceof Map)return Array.from(e.keys()).some(function(e){return p(e,t)})}return n.create("operation",l(e)+" cannot contain any values, let alone "+l(t))}function h(e,t,r){if(!t||!r)return n.create("macrocall","The sub"+i(e)+" index values must not be 0 or NaN.");if(0>t&&(t=e.length+t+1),0>r&&(r=e.length+r+1),t>r)return h(e,r,t);var o="string"==typeof e;o&&(e=Array.from(e));var a=e.slice(t>0?t-1:t,r).map(u);return o?a.join(""):a}function m(e){return n.containsError(e)?e:e&&"function"==typeof e.TwineScript_Print?e.TwineScript_Print():e instanceof Map?(e=Array.from(e.entries()),n.containsError(e)?e:e.reduce(function(e,t){var n=_slicedToArray(t,2),r=n[0],i=n[1];return e+"<tr><td>`"+m(r)+"`</td><td>`"+m(i)+"`</td></tr>"},"<table class=datamap>")+"</table>"):e instanceof Set?Array.from(e.values()).map(m)+"":Array.isArray(e)?e.map(m)+"":r(e)?n.create("unimplemented","I don't know how to print this value yet."):e+""}var g=e.impossible,y=e.toJSLiteral,v=Object.freeze({isObject:r,singleTypeCheck:a,isValidDatamapName:o,collectionType:i,isSequential:s,clone:u,coerceToString:c,objectName:l,typeName:f,is:p,contains:d,subset:h,printBuiltinValue:m,numericIndex:/^(?:[1-9]\d*|0)$/,unique:function(e,t,n){return!n.slice(t+1).some(function(t){return p(e,t)})}});return v}),define("twinescript/compiler",["utils"],function(e){function t(e,t){for(var n=0;n<e.length;n+=1)if(t.includes(e[n].type))return n;return 0/0}function n(e,n){return e.length-1-t.apply(void 0,[[].concat(_toConsumableArray(e)).reverse(),n])}function r(e,r){var i=[];return e.length?([["error"],["comma"],["spread"],["to"],["into"],{rightAssociative:["where","via"]},{rightAssociative:["with","making","each"]},["augmentedAssign"],["and","or"],["is","isNot"],["contains","isIn"],["inequality"],["addition","subtraction"],["multiplication","division"],["not"],["belongingProperty"],["belongingOperator","belongingItOperator"],{rightAssociative:["property"]},{rightAssociative:["itsProperty"]},["belongingItProperty"],{rightAssociative:["possessiveOperator","itsOperator"]},["twineLink"],["macro"],["grouping"]]["most"===r?"reverse":"valueOf"]().some(function(r){var o=void 0;return o=r.rightAssociative?n(e,r.rightAssociative):t(e,r),!Number.isNaN(o)&&o>-1?(i=[e[o],o],!0):void 0}),i):i}function i(e){if("inequality"===e.type){var t=e.operator;return e.negate?{">":"<=","<":">=",">=":"<","<=":">"}[t]:t}return e.type}function o(e){var t=i(e);return{">":"<","<":">",">=":"<=","<=":">=",contains:"isIn",isIn:"contains",is:"isNot",isNot:"is"}[t]}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isVarRef,c=t.whitespaceError,l=t.elidedComparison;if(e=[].concat(e),!e.length)return n&&c?"TwineError.create('operation',"+s(c)+")":"";var f=e[0];if(1===e.length){if("identifier"===f.type)return n?"VarRef.create(Operations.Identifiers,"+s(f.text)+")":" Operations.Identifiers."+f.text.toLowerCase()+" ";if("variable"===f.type)return"VarRef.create(State.variables,"+s(f.name)+")"+(n?"":".get()");if("tempVariable"===f.type)return"VarRef.create(section.stack[0].tempVariables,"+s(f.name)+")"+(n?"":".get()");if("hookRef"===f.type)return" HookSet.create('?"+f.name+"') ";if("string"===f.type)return f.text.replace(/\n/g,"\\n");if("colour"===f.type)return"Colour.create("+s(f.colour)+")";if("root"===f.type)return a(f.children);if("whitespace"===f.type&&n&&c)return"TwineError.create('operation',"+s(c)+")"}var p=void 0,d=r(e,"least"),h=_slicedToArray(d,2);f=h[0],p=h[1];var m=(f||{}).type,g=function(e){return{isVarRef:!0,whitespaceError:"I need usable data to be on the "+e+' of "'+f.text+'".'}},y=void 0,v=void 0,b=void 0,w=void 0,x=void 0,T=void 0,S=!0,O=!0,j=!1;if(m){if("error"===m)return"TwineError.create('syntax',"+s(f.message)+")";if("comma"===m)b=",",O=!1;else if("spread"===m)b="Operations.makeSpreader(",v=a(e.slice(p+1))+")",S=!1;else if("to"===m)x="to",v=a(e.slice(p+1),g("right")),y="Operations.setIt("+a(e.slice(0,p),g("left"))+")";else if("into"===m)x="into",v=a(e.slice(0,p),g("left")),y="Operations.setIt("+a(e.slice(p+1),g("right"))+")";else if("where"===m||"via"===m)y="Lambda.create("+(a(e.slice(0,p),{isVarRef:!0,whitespaceError:null}).trim()||"undefined")+",",b=s(f.type)+",",v=s(a(e.slice(p+1)))+")";else if("with"===m||"making"===m||"each"===m){var k=e.slice(p+1);![2,3].includes(k.length)||"whitespace"!==k[0].type||"tempVariable"!==k[1].type||k[2]&&"whitespace"!==k[2].type?(y="TwineError.create('operation','I need a temporary variable to the right of \\'",b=f.type,v="\\'.')"):"each"===m?(y="Lambda.create(",b=a(k,g("right")).trim(),v=",'where','true')"):(y="Lambda.create("+(a(e.slice(0,p),{isVarRef:!0,whitespaceError:null}).trim()||"undefined")+",",b=s(f.type)+",",v=s(k[1].name)+")")}else if("augmentedAssign"===m)x=f.operator,y=a(e.slice(0,p),g("left")),v="Operations['"+x+"']("+(a(e.slice(0,p))+","+a(e.slice(p+1)))+")";else if("and"===m||"or"===m){var C=function(){var t=function e(t){var n=r(t,"least"),i=_slicedToArray(n,2),o=i[0],a=i[1];if(o)return["inequality","is","isNot","isIn","contains"].includes(o.type)?o:["and","or"].includes(o.type)?e(t.slice(0,a))||e(t.slice(a+1)):void 0},u=t(e.slice(0,p)),c=t(e.slice(p+1)),d="TwineError.create('operation', 'This use of \"is not\" and \""+m+"\" is grammatically ambiguous','Maybe try rewriting this as \"__ is not __ "+m+" __ is not __\"') ";if(w=f.type,l===f.type)w="",y=a(e.slice(0,p),{isVarRef:n,elidedComparison:l}).trim(),b=",",v=a(e.slice(p+1),{elidedComparison:l}).trim();else if(u&&!c){var h=r(e.slice(0,p),"least"),g=_slicedToArray(h,1),x=g[0],T=s(i(x));if("isNot"===x.type)return{v:d};v="Operations.elidedComparisonOperator("+s(f.type)+","+T+","+a(e.slice(p+1),{elidedComparison:m})+")"}else if(!u&&c){var S=c,O=e.indexOf(S),j=s(o(S));if("isNot"===S.type)return{v:d};v="Operations.elidedComparisonOperator("+s(f.type)+","+j+","+a(e.slice(0,p),{elidedComparison:m})+")",y=a([].concat(_toConsumableArray(e.slice(O+1)),[Object.assign(Object.create(S),_defineProperty({},"inequality"===S.type?"operator":"type",o(S)))],_toConsumableArray(e.slice(p+1,O))))}}();if("object"===("undefined"==typeof C?"undefined":_typeof(C)))return C.v}else if("is"===m||"isNot"===m||"contains"===m||"isIn"===m||"inequality"===m)j=!0,w=i(f);else if("addition"===m||"subtraction"===m)w=f.text,y=a(e.slice(0,p)),y.trim()||(y="0");else if("multiplication"===m||"division"===m)w=f.text;else if("not"===m)b=" ",v="Operations.not("+a(e.slice(p+1))+")",S=!1;else if("belongingProperty"===m)v="VarRef.create("+a(e.slice(p+1),g("right"))+","+s(f.name)+")"+(n?"":".get()"),b=" ",S=O=!1;else if("belongingOperator"===m||"belongingItOperator"===m)f.type.includes("It")?(v="Operations.Identifiers.it",O=!1):v=a(e.slice(p+1),g("right")),T="belonging";else if("property"===m)y="VarRef.create("+a(e.slice(0,p),g("left"))+","+s(f.name)+")"+(n?"":".get()"),b=" ",S=O=!1;else if("itsProperty"===m||"belongingItProperty"===m)y="VarRef.create(Operations.Identifiers.it,"+s(f.name)+").get()",b=" ",S=O=!1;else if("possessiveOperator"===m||"itsOperator"===m)f.type.includes("it")&&(y="Operations.Identifiers.it",S=!1),T="possessive";else if("twineLink"===m)b='Macros.run("link-goto", [section,'+s(f.innerText)+","+s(f.passage)+"])",S=O=!1;else if("macro"===m){var A=f.children[0];"macroName"!==A.type&&u("Compiler.compile","macro token had no macroName child token"),b="Macros.run("+(A.isMethodCall?a(A.children):'"'+f.name+'"')+", [section,"+a(f.children.slice(1))+"])",S=O=!1}else"grouping"===m&&(b="("+a(f.children,{isVarRef:n})+")",S=O=!1)}else;return p>-1?(w&&(n=!1),y=y||a(e.slice(0,p),{isVarRef:n}).trim(),v=v||a(e.slice(p+1)).trim(),j&&!y&&(y=" Operations.Identifiers.it "),S&&!y||O&&!v?"TwineError.create('operation','I need some code to be "+(S?"left ":"")+(S&&O?"and ":"")+(O?"right ":"")+'of "'+f.text+"\"')":b?y+b+v:x?"Operations.makeAssignmentRequest("+[y,v,s(x)]+")":T?"VarRef.create("+("belonging"===T?v:y)+",{computed:true,value:"+("belonging"===T?y:v)+"})"+(n?"":".get()"):w?" Operations["+s(w)+"]("+y+","+v+") ":""):1===e.length?(("value"in e[0]?e[0].value:e[0].text)+"").trim()||" ":e.reduce(function(e,t){return e+a(t,{isVarRef:n})},"")}var s=e.toJSLiteral,u=e.impossible;return a}),define("renderer",["utils","markup","twinescript/compiler","internaltypes/twineerror"],function(e,t,n,r){function i(e,t){return"<"+t+">"+e+"</"+t+">"}function o(e,t){var n=l.render(e.children);return n&&i(n,t)}var a=e.escape,s=e.impossible,u=e.toJSLiteral,c=e.insensitiveName,l=void 0,f="text-align: center; max-width:50%; ";return l={options:{},exec:function(){var e=void 0,n=void 0;return function(r){return"string"!=typeof r?(s("Renderer.exec","source was not a string, but "+("undefined"==typeof r?"undefined":_typeof(r))),""):r===e?n:(e=r,n=l.render(t.lex(r).children))}}(),render:function e(s){var p="",d=[];if(!s)return p;for(var h=s.length,m=0;h>m;m+=1){var g=s[m];switch(g.type){case"error":p+=r.create("syntax",g.message).render(a(g.text))[0].outerHTML;break;case"numbered":case"bulleted":var y="numbered"===g.type?"ol":"ul";p+="<"+y+">";for(var v=1;h>m&&s[m]&&s[m].type===g.type;)p+=("<"+y+">").repeat(Math.max(0,s[m].depth-v)),p+=("</"+y+">").repeat(Math.max(0,v-s[m].depth)),v=s[m].depth,p+=o(s[m],"li"),m+=1;m-=1,p+=("</"+y+">").repeat(v+1);break;case"align":for(;g&&"align"===g.type;){var b=g,w=b.align,x=m+=1;if("left"===w){m-=1;break}for(;h>m&&s[m]&&"align"!==s[m].type;)m+=1;var T=e(s.slice(x,m)),S="";switch(w){case"center":S+=f+"margin-left: auto; margin-right: auto;";break;case"justify":case"right":S+="text-align: "+w+";";break;default:+w&&(S+=f+"margin-left: "+w+"%;")}p+="<tw-align "+(S?'style="'+S+'"':"")+(l.options.debug?' title="'+g.text+'"':"")+">"+T+"</tw-align>\n",g=s[m]}break;case"column":for(var O=[];g&&"column"===g.type;){var j=g,k=j.column,C=m+=1;if("none"===k){m-=1;break}for(;h>m&&s[m]&&"column"!==s[m].type;)m+=1;O.push({text:g.text,type:k,body:e(s.slice(C,m)),width:g.width,marginLeft:g.marginLeft,marginRight:g.marginRight}),g=s[m]}O.length&&!function(){var e=O.reduce(function(e,t){return e+t.width},0);p+="<tw-columns>"+O.map(function(t){return"<tw-column type="+t.type+'  style="width:'+t.width/e*100+"%; margin-left: "+t.marginLeft+"em; margin-right: "+t.marginRight+'em;" '+(l.options.debug?' title="'+t.text+'"':"")+">"+t.body+"</tw-column>\n"}).join("")+"</tw-columns>"}();break;case"heading":p+=o(g,"h"+g.depth);break;case"br":(!d.length||/td|th/.test(d[0]))&&(p+="<br>");break;case"hr":p+="<hr>";break;case"escapedLine":case"comment":break;case"inlineUrl":p+='<a class="link" href="'+a(g.text)+'">'+g.text+"</a>";break;case"scriptStyleTag":case"tag":var A=g.text.toLowerCase();/^<\/?(?:table|thead|tbody|tr|tfoot|td|th)\b/.test(A)&&d[g.text.startsWith("</")?"shift":"unshift"](A),p+=g.text.startsWith("</")?g.text:g.text.replace(/>$/," data-raw>");break;case"sub":case"sup":case"strong":case"em":p+=o(g,g.type);break;case"strike":p+=o(g,"s");break;case"bold":p+=o(g,"b");break;case"italic":p+=o(g,"i");break;case"twineLink":var E=t.lex("(link-goto:"+u(g.innerText)+","+u(g.passage)+")");p+=e(E.children);break;case"hook":p+="<tw-hook "+(g.hidden?"hidden ":"")+(g.name?'name="'+c(g.name)+'"':"")+(l.options.debug&&g.name?' title="Hook: ?'+g.name+'"':"")+' source="'+a(g.innerText)+'"></tw-hook>';break;case"verbatim":p+=i(a(g.innerText).replace(/\n/g,"<br>"),"tw-verbatim");break;case"collapsed":p+=o(g,"tw-collapsed");break;case"variable":case"tempVariable":case"macro":p+='<tw-expression type="'+g.type+'" name="'+a(g.name||g.text)+'"'+(l.options.debug?' title="'+a(g.text)+'"':"")+' js="'+a(n(g))+'"></tw-expression>';break;default:p+=g.children&&g.children.length?e(g.children):g.text}}return p}},Object.freeze(l)}),define("internaltypes/changedescriptor",["jquery","utils","renderer","datatypes/hookset"],function(e,t,n,r){var i=t.assertOnlyHas,o=t.impossible,a=t.transitionIn,s=n.exec,u=void 0,c={source:"",innerSource:"",enabled:!0,target:null,append:"append",newTargets:null,transition:"instant",transitionTime:null,loopVars:null,styles:null,attr:null,data:null,section:null,summary:function(){var e=this;return["source","innerSource","enabled","target","append","newTargets","transition","transitionTime"].filter(function(t){return e.hasOwnProperty(t)}).concat([this.attr.length&&"attr",this.styles.length&&"styles",Object.keys(this.loopVars).length&&"loopVars",Object.keys(this.data).length&&"data"].filter(Boolean))},create:function(e,t){var n=Object.assign(Object.create(this),{attr:[].concat(this.attr||[]),styles:[].concat(this.styles||[]),loopVars:this.loopVars||{},data:this.data||{}},e);return t&&t.run(n),n},update:function(){var e=this,t=this.section,n=this.newTargets,i=this.target,o=function(t){Array.isArray(e.styles)&&e.styles.length>0&&setTimeout(function(){return t.css(Object.assign.apply(Object,_toConsumableArray([{}].concat(e.styles))))}),e.attr&&e.attr.forEach(function(e){return t.attr(e)}),e.data&&t.data(e.data)};Array.isArray(n)&&n.length&&(i=n.map(function(e){return e.target})),[].concat(i).forEach(function(e){r.isPrototypeOf(e)?e.forEach(t,o):o(e)})},render:function(){var t=this,n=this.source,l=this.transition,f=this.transitionTime,p=this.enabled,d=this.section,h=this.newTargets,m=this.target,g=this.append;if(i(this,u),!p||void 0!==m.popAttr("hidden"))return c.create({target:m,data:{hiddenSource:n}}).update(),e();if(Array.isArray(h)&&h.length&&(m=h),!m)return o("ChangeDescriptor.render","ChangeDescriptor has source but not a target!"),e();var y=e(),v=function(e){return function(n){y=y.add(t.create({target:n,append:e,

newTargets:null}).render())}};if([].concat(m).forEach(function t(n,i,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;r.isPrototypeOf(n)?n.forEach(d,v(a)):n.jquery&&n.length>1?Array.from(n).map(e).forEach(v(a)):n.target&&n.append&&t(n.target,i,o,n.append)}),y.length||Array.isArray(m)||r.isPrototypeOf(m))return y;if(!(g in m)){if("replace"!==g)return o("Section.render","The target doesn't have a '"+g+"' method."),e();m.empty(),g="append"}return y=e(n&&e.parseHTML(s(n),document,!0)),m[g](y.length?y:void 0),this.update(),l&&a("replace"===g?m:y,l,f),y}};return u=Object.keys(c),Object.seal(c)}),define("datatypes/changercommand",["utils","utils/operationutils","internaltypes/changedescriptor"],function(e,t,n){var r=e.impossible,i=t.is,o={},a={changer:!0,TwineScript_TypeName:"a changer command",TwineScript_Print:function(){return"`[A '"+this.macroName+"' command]`"},summary:function(){var e=n.create();return this.run(e),e.summary()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Array.isArray(t)||r("ChangerCommand.create","params was not an array"),Object.assign(Object.create(this),{macroName:e,params:t,next:n,TwineScript_ObjectName:"a ("+e+":) command"})},"TwineScript_+":function(e){for(var t=this.TwineScript_Clone(),n=t;n.next;)n=n.next;return n.next=e,t},TwineScript_is:function(e){return a.isPrototypeOf(e)?this.macroName===e.macroName&&i(this.params,e.params)&&i(this.next,e.next):void 0},TwineScript_Clone:function(){return this.create(this.macroName,this.params,this.next)},run:function(e){o[this.macroName].apply(o,[e].concat(_toConsumableArray(this.params))),this.next&&this.next.run(e)},register:function(e,t){o[e]=t}};return Object.freeze(a)}),define("state",["utils","passages","datatypes/changercommand","internaltypes/twineerror","utils/operationutils"],function(e,t,n,r,i){function o(e){p=(l[f]||c).create(e)}var a=e.impossible,s=i.objectName,u={TwineScript_ObjectName:"this story's variables",TwineScript_VariableStore:!0},c={passage:"",variables:u,create:function(e,t){var n=Object.create(c);return n.passage=e||"",n.variables=Object.assign(Object.create(this.variables),t),n}},l=[],f=-1,p=c.create(),d=void 0,h={forward:[],back:[],load:[]},m=Object.assign({get passage(){return p.passage},get variables(){return p.variables},get pastLength(){return f},get futureLength(){return l.length-1-f},passageNameVisited:function(e){var n=0;if(!t.get(e))return 0;for(var r=0;f>=r;r++)n+=+(e===l[r].passage);return n},passageNameLastVisited:function(e){if(!t.get(e))return 1/0;if(e===p.passage)return 0;for(var n=f;n>0;n--)if(l[n].passage===e)return f-n+1;return 1/0},pastPassageNames:function(){for(var e=[],t=f-1;t>=0;t--)e.unshift(l[t].passage);return e},play:function(e){p||a("State.play","present is undefined!"),p.passage=e,l=l.slice(0,f+1).concat(p),f+=1,o(e),h.forward.forEach(function(t){return t(e)})},rewind:function(e){var t=1,n=!1;if(e)if("string"==typeof e){if(t=this.passageNameLastVisited(e),t===1/0)return}else"number"==typeof e&&(t=e);for(;t>0&&f>0;t--)n=!0,f-=1;return n&&(o(l[f].passage),h.back.forEach(function(e){return e()})),n},fastForward:function(e){var t=1,n=!1;for("number"==typeof e&&(t=e);t>0&&l.length>0;t--)n=!0,f+=1;return n&&(o(l[f].passage),h.forward.forEach(function(e){return e(l[f].passage,"fastForward")})),n},on:function(e,t){return e in h?("function"!=typeof t||h[e].includes(t)||h[e].push(t),m):void a("State.on","invalid event name")},reset:function(){window.jasmine&&(l=[],f=-1,p=c.create(),d=void 0,h.load.forEach(function(e){return e(l)}))}},function(){function e(t){return"number"==typeof t||"boolean"==typeof t||"string"==typeof t||null===t||Array.isArray(t)&&t.every(e)||t instanceof Set&&Array.from(t).every(e)||t instanceof Map&&Array.from(t.values()).every(e)||n.isPrototypeOf(t)}function t(e,t){return t instanceof Set?{"(dataset:)":Array.from(t)}:t instanceof Map?{"(datamap:)":Array.from(t)}:n.isPrototypeOf(t)?{changer:{name:t.macroName,params:t.params,next:t.next}}:t}function i(e,t){if(t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))){if(Array.isArray(t["(dataset:)"]))return new Set(t["(dataset:)"]);if(Array.isArray(t["(datamap:)"]))return new Map(t["(datamap:)"]);if(t.changer&&"object"===_typeof(t.changer)){var r=t.changer,i=r.name,o=r.params,a=r.next;return n.create(i,o,a)}}return t}function a(){var n=l.slice(0,f+1),i=n.map(function(t){return Object.keys(t.variables).filter(function(n){return t.variables[n]&&!e(t.variables[n])}).map(function(e){return[e,t.variables[e]]})});if(d||(d=i.reduce(function(e,t,n){var r=_slicedToArray(t,2),i=r[0],o=r[1];return e||i&&[i,o,n+1]},void 0)),d){var o=d,a=_slicedToArray(o,3),u=a[0],c=a[1],p=a[2];return r.create("saving","The variable $"+u+" holds "+s(c)+" (which is, or contains, a complex data value) on turn "+p+"; the game can no longer be saved.")}try{return JSON.stringify(n,t)}catch(e){return!1}}function p(e){var t=void 0,n=u;try{t=JSON.parse(e,i)}catch(e){return!1}return Array.isArray(t)?(t=t.map(function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&e.hasOwnProperty("passage")&&e.hasOwnProperty("variables")?(e.variables=Object.assign(Object.create(n),e.variables),n=e.variables,Object.assign(Object.create(c),e)):!1})).includes(!1)?!1:(l=t,h.load.forEach(function(e){return e(l)}),f=l.length-1,void o(l[f].passage)):!1}return{serialise:a,deserialise:p}}());return Object.seal(c),Object.freeze(m)}),define("datatypes/colour",["jquery"],function(e){function t(t){if(t in s)return s[t];var n=e("<p>").css("background-color",t).css("background-color");return n=n.startsWith("rgb")?n.match(/\d+/g).reduce(function(e,t,n){return e["rgb"[n]]=+t,e},{}):{r:192,g:192,b:192},s[t]=n,n}function n(e){return"string"!=typeof e?e:(e=e.replace("#",""),e=e.replace(o,"$1$1$2$2$3$3"),{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)})}function r(e){var t=e.r,n=e.g,r=e.b,i=e.a;t/=255,n/=255,r/=255;var o=Math.max(t,n,r),a=Math.min(t,n,r),s=(o+a)/2,u=o-a;if(o===a)return{h:0,s:0,l:s};var c=void 0;switch(o){case t:c=(n-r)/u+(r>n?6:0);break;case n:c=(r-t)/u+2;break;case r:c=(t-n)/u+4}c=Math.round(60*c);var l=s>.5?u/(2-o-a):u/(o+a);return{h:c,s:l,l:s,a:i}}function i(e){function t(e){return 0>e&&(e+=1),e>1&&(e-=1),1/6>e?u+6*(s-u)*e:.5>e?s:2/3>e?u+(s-u)*(2/3-e)*6:u}var n=e.h,r=e.s,i=e.l,o=e.a;if(0===r){var a=Math.floor(255*i);return{r:a,g:a,b:a}}n/=360;var s=.5>i?i*(1+r):i+r-i*r,u=2*i-s;return{r:Math.floor(255*t(n+1/3)),g:Math.floor(255*t(n)),b:Math.floor(255*t(n-1/3)),a:o}}var o=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,a=/^([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])([\da-fA-F])$/,s=Object.create(null),u=Object.freeze({TwineScript_TypeName:"a colour",TwineScript_ObjectName:"a colour","TwineScript_+":function(e){var t=this,n=e;return u.create({r:Math.min(Math.round(.6*(t.r+n.r)),255),g:Math.min(Math.round(.6*(t.g+n.g)),255),b:Math.min(Math.round(.6*(t.b+n.b)),255),a:(t.a+n.a)/2})},TwineScript_Print:function(){return"<tw-colour style='background-color:rgba("+[this.r,this.g,this.b,this.a].join(",")+");'></span>"},TwineScript_is:function(e){return u.isPrototypeOf(e)&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a},TwineScript_Clone:function(){return u.create(this)},toRGBAString:function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},get h(){return r(this).h},get s(){return r(this).s},get l(){return r(this).l},create:function(e){return"string"==typeof e?this.create(u.isHexString(e)?n(e):t(e)):!("h"in e&&"s"in e&&"l"in e)||"r"in e||"g"in e||"b"in e?("a"in e&&"number"==typeof e.a||(e.a=1),Object.assign(Object.create(this),e)):this.create(i(e))},isHexString:function(e){return"string"==typeof e&&"#"===e[0]&&(e.slice(1).match(o)||e.slice(1).match(a))},isCSS3Function:function(e){return"string"==typeof e&&/^(?:rgb|hsl)a?\(\s*\d+\s*,\s*\d+%?\s*,\s*\d+%?(?:,\s*\d+(?:\.\d+)?\s*)?\)$/.test(e)}});return u}),define("internaltypes/varref",["state","internaltypes/twineerror","utils","utils/operationutils","datatypes/hookset","datatypes/colour"],function(e,t,n,r,i,o){function a(e,n){var r=void 0;if(e instanceof Map&&(r=t.containsError(j(e,n))))return r;if(w(e)){var o=void 0;if("number"==typeof n){if(0===n)return t.create("property","You can't access elements at position 0 of "+x(e)+".","Only positive and negative position values exist.");n>0&&(n-=1)}else if("string"==typeof n&&(o=/(\d+)(?:st|[nr]d|th)last/i.exec(n)))n=-o[1]+"";else if("string"==typeof n&&(o=/(\d+)(?:st|[nr]d|th)/i.exec(n)))n=o[1]-1+"";else if("last"===n)n=-1;else if(!["length","any","all"].includes(n)||i.isPrototypeOf(e))return t.create("property","You can only access position strings/numbers ('4th', 'last', '2ndlast', (2), etc.)"+(i.isPrototypeOf(e)?"":", 'length', 'any' and 'all'")+" of "+x(e)+", not "+x(n)+".")}else if(e instanceof Set){if(!["length","any","all"].includes(n))return t.create("property","You can only get the 'length', 'any' and 'all' of a "+x(e)+".","To check contained values, use the 'contains' operator.");"length"===n&&(n="size")}else if("number"==typeof e||"boolean"==typeof e)return t.create("property","You can't get data values from "+x(e)+".");return n}function s(e,n){var r=n.reduce(function(r,i,o){i.computed&&(i=i.value),k.isPrototypeOf(i)&&(i=i.get()),i=Array.isArray(i)?i.map(function(t){return a(e,t)}):a(e,i);var s=void 0;return(s=t.containsError(r,i))?s:(o<n.length-1&&(e=g(e,i)),r.push(i),r)},[]);return{compiledPropertyChain:r,deepestObject:e}}function u(e,t){return 0>t-0&&Math.abs(t)<=e.length?e.length+(t-0):t}function c(e,t){var n={any:"'any' value of ",all:"'all' values of "}[t];return{determiner:t,array:[].concat(_toConsumableArray(e)),TwineScript_ObjectName:n+x(e),TwineScript_TypeName:n+"a data structure",TwineScript_Unstorable:!0,TwineScript_Print:function(){return"`["+this.TwineScript_TypeName+"]`"}}}function l(e,t){if(void 0===e)return e;if(e instanceof Map)return e.get(t);if(w(e)&&(t=u(e,t)),"any"===t||"all"===t)return c(e,t);if(e.TwineScript_GetElement&&Number.isFinite(+t))return e.TwineScript_GetElement(t);var n=e[t];return"function"!=typeof n?n:void 0}function f(e){return e.computed?"string"==typeof e.value?"('"+e.value+"')":"("+e.value+")":"'"+e+"'"}function p(e,n){if(Array.isArray(n))return n.map(function(t){return p(e,t)});if(i.isPrototypeOf(e))return t.create("operation","I can't modify "+x(e),"You should alter hooks indirectly using macros like (replace:) or (enchant:).");if(e instanceof Set)return t.create("operation","I can't modify "+x(e),"You should use an (array:) if you need to modify the data inside this dataset.");if(o.isPrototypeOf(e))return t.create("operation","I can't modify the components of "+x(e));if(e instanceof Map)return!0;if(w(e)){if(["length","any","all"].includes(n))return t.create("operation","I can't forcibly alter the '"+n+"' of "+x(e)+".");if(+n!==(0|n))return t.create("property",x(e)+" can only have position keys ('3rd', '1st', (5), etc.), not "+f(n)+".")}return e.TwineScript_Identifiers&&n in e?t.create("keyword","I can't alter the value of the '"+n+"' identifier.","You can only alter data in variables and hooks, not fixed identifiers."):"number"==typeof e||"boolean"==typeof e?t.create("operation","You can't alter the data values of "+x(e)+"."):!0}function d(e,t,n){var r=t;e instanceof Map?e.set(t,n):(w(e)&&(t=u(e,t)),e.TwineScript_Set?e.TwineScript_Set(t):e[t]=n),A.set.forEach(function(t){return t(e,r,n)})}function h(e,t){var n=t;w(e)&&(t=u(e,t)),Array.isArray(e)&&O.exec(t)?e.splice(t,1):e instanceof Map||e instanceof Set?e.delete(t):delete e[t],A.delete.forEach(function(t){return t(e,n)})}function m(e){function t(){return e}return{get:t,set:t,delete:t,varref:!0}}function g(n,r,o){if(Array.isArray(r))return i.isPrototypeOf(n)?n.TwineScript_GetElement(r):r.map(function(e){return g(n,e,e)})["string"==typeof n?"join":"valueOf"]("");"string"==typeof n&&(n=[].concat(_toConsumableArray(n)));var a=l(n,r);return void 0===a?n===e.variables?C:n.TwineScript_VariableStore?t.create("property","There isn't a temp variable named _"+o+" in this place.","Temp variables only exist inside the same passage and hook in which they're (set:)."):t.create("property","I can't find a "+f(o)+" data name in "+x(n)):a}function y(e,n){var r=this,i=this.compiledPropertyChain.reduce(function(e,t){var n=void 0;return n=0===e.length?r.object:g.apply(void 0,_toConsumableArray(e[e.length-1])),e.push([n,t])&&e},[]).reduceRight(e,n);return t.containsError(i)?i:void 0}var v=n.impossible,b=r.isObject,w=r.isSequential,x=r.objectName,T=r.typeName,S=r.clone,O=r.numericIndex,j=r.isValidDatamapName,k=void 0,C=0,A={set:[],delete:[]};return k=Object.freeze({varref:!0,get:function(){return g(this.deepestObject,this.compiledPropertyChain.slice(-1)[0],this.propertyChain.slice(-1)[0])},set:function(e){return!this.object||this.object.TwineScript_VariableStore||this.object.TwineScript_Identifiers?y.call(this,function(e,n,r){var i=_slicedToArray(n,2),o=i[0],a=i[1],s=void 0;if(s=t.containsError(e,o,a)||t.containsError(p(o,a)))return s;if(e&&e.TwineScript_Unstorable)return t.create("operation",T(e)+" can't be stored.");if(r>0&&(o=S(o)),"string"==typeof o){var u=function(){if("string"!=typeof e||e.length!==(Array.isArray(a)?a.length:1))return{v:t.create("datatype","I can't put this non-string value, "+x(e)+", in a string.")};o=[].concat(_toConsumableArray(o));var n=[].concat(_toConsumableArray(e));[].concat(a).forEach(function(e){0>0+e&&(e=o.length+(0+e)),o=[].concat(_toConsumableArray(o.slice(0,e)),[n.shift()],_toConsumableArray(o.slice(e+1)))}),o=o.join("")}();if("object"===("undefined"==typeof u?"undefined":_typeof(u)))return u.v}else b(o)&&(Array.isArray(a)&&w(e)?("string"==typeof e&&(e=[].concat(_toConsumableArray(e))),a.map(function(t,n){return[t,e[n]]}).forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return d(o,n,r)})):d(o,a,e));return o},e):t.create("macrocall","I can't (set:) "+x(this)+", if the "+(x(this.object).match(/ (.+$)/)||["","value"])[1]+" isn't stored in a variable.","Modifying data structures that aren't in variables won't change the game state at all.")},delete:function(){return y.call(this,function(e,n,r){var i=_slicedToArray(n,2),o=i[0],a=i[1],s=void 0;if(s=t.containsError(e,o,a)||t.containsError(p(o,a)))return s;if(r>0&&(o=S(o)),null===e){var c="string"==typeof o;c&&(o=[].concat(_toConsumableArray(o))),Array.isArray(a)?(w(o)&&(a=[].concat(_toConsumableArray(new Set(a))),a.sort(function(e,t){return u(o,t)-u(o,e)})),a.forEach(function(e){return h(o,e)})):h(o,a),c&&(o=o.join(""))}else d(o,a,e);return o},null)},create:function(e,n){var r=void 0;if(r=t.containsError(e))return m(r);n=[].concat(n),k.isPrototypeOf(e)&&(n=e.propertyChain.concat(n),e=e.object);var i=s(e,n),o=i.compiledPropertyChain,a=i.deepestObject;return(r=t.containsError(o,a))?m(r):Object.assign(Object.create(k),{object:e,propertyChain:n,compiledPropertyChain:o,deepestObject:a})},get TwineScript_ObjectName(){var t=this,n=function(n,r){return r||t.object!==e.variables&&!t.object.TwineScript_VariableStore?f(n):n};return(this.object===e.variables?"$":this.object.TwineScript_VariableStore?"_":x(this.object)+"'s ")+(1===this.propertyChain.length?n(this.propertyChain[0]):this.propertyChain.reduce(function(e,t,r){return e+"'s "+n(t,r)}))+(this.object.TwineScript_VariableStore?" in "+this.object.TwineScript_VariableStoreName:"")},on:function(e,t){return e in A?("function"!=typeof t||A[e].includes(t)||A[e].push(t),k):void v("VarRef.on","invalid event name")}})}),define("utils/naturalsort",[],function(){return function(e){return function t(n,r){var i,o,a,s,u=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,c=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,f=/^0x[0-9a-f]+$/i,p=/^0/,d=function(e){return t.insensitive&&(""+e).toLowerCase()||""+e},h=d(n).replace(c,"")||"",m=d(r).replace(c,"")||"",g=h.replace(u,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),y=m.replace(u,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),v=parseInt(h.match(f))||1!==g.length&&h.match(l)&&Date.parse(h),b=parseInt(m.match(f))||v&&m.match(l)&&Date.parse(m)||null;if(e&&window.Intl&&window.Intl.Collator&&(a=window.Intl.Collator(e)),b){if(b>v)return-1;if(v>b)return 1}for(var w=0,x=Math.max(g.length,y.length);x>w;w++){if(i=!(g[w]||"").match(p)&&parseFloat(g[w])||g[w]||0,o=!(y[w]||"").match(p)&&parseFloat(y[w])||y[w]||0,isNaN(i)!==isNaN(o))return isNaN(i)?1:-1;if(("undefined"==typeof i?"undefined":_typeof(i))!==("undefined"==typeof o?"undefined":_typeof(o)))i+="",o+="";else if("string"==typeof i&&a&&(s=a.compare(i,o),0!==s))return s;if(o>i)return-1;if(i>o)return 1}return 0}}}),define("internaltypes/varscope",[],function(){return{TwineScript_ObjectName:"the temporary variables",TwineScript_VariableStore:!0}}),define("datatypes/lambda",["utils","utils/operationutils","internaltypes/varscope","internaltypes/twineerror"],function(e,t,n,r){var i=e.toJSLiteral,o=e.insensitiveName,a=(e.plural,t.typeName,t.objectName,t.singleTypeCheck,Object.freeze({lambda:!0,TwineScript_TypeName:"a lambda",TwineScript_ObjectName:function(){return'a "'+("making"in this?"making ... ":"")+("with"in this?"with ... ":"")+("where"in this?"where ... ":"")+("via"in this?"via ... ":"")+'" lambda'},TwineScript_Print:function(){return"`[A lambda]`"},TwineScript_is:function(e){return e===this},TypeSignature:function(e){return{pattern:"lambda",innerType:a,clauses:e}},create:function(e,t,i){var s=void 0;if(r.containsError(e))return e;if(a.isPrototypeOf(e)){if(t in e&&("where"!==t||"true"!==e[t]))return r.create("syntax","This lambda has two '"+t+"' clauses.");s=e}else{if(void 0!==e&&(!e||!e.varref||!n.isPrototypeOf(e.object)||e.propertyChain.length>1))return r.create("syntax","This lambda needs to start with a single temporary variable.");s=Object.create(this),s.loop=e?e.propertyChain[0]:""}s[t]=i;var u=[s.making,s.with,s.loop].filter(function(e,t,n){return e&&n.indexOf(o(e))!==t});return u.length?r.create("syntax","This lambda has two variables named '"+u[0]+"'.","Lambdas should have all-unique parameter names."):s},apply:function(e,t){var o=t.loop,a=t.with,s=t.making,u=t.fail,c=t.pass,l=t.ignoreVia,f=Object.create(n);[[this.loop,o],[this.with,a],[this.making,s]].forEach(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return n&&(f[n]=r)}),e.stack.unshift(Object.assign(Object.create(null),{tempVariables:f})),e.eval("Operations").initialiseIt(!o||this.with||this.making?r.create("operation","I can't use 'it', or an implied 'it', in "+this.TwineScript_ObjectName()):o);var p=!l&&this.via,d=e.eval("where"in this?"Operations.where("+this.where+","+(p||i(c))+","+i(u)+")":p||i(c));return e.stack.shift(),d},filter:function(e,t){var n=this;return t.reduce(function(t,i){var o=void 0;if(o=r.containsError(t))return o;var a=n.apply(e,{loop:i,pass:!0,fail:!1,ignoreVia:!0});return(o=r.containsError(a))?o:t.concat(a?[i]:[])},[])}}));return a}),define("macros",["jquery","utils/naturalsort","utils","utils/operationutils","datatypes/changercommand","datatypes/lambda","datatypes/hookset","internaltypes/twineerror"],function(e,t,n,r,i,o,a,s){function u(e){return function(n){n=n.reduce(function(e,n){if(n&&n.spreader===!0){var r=n.value;if(Array.isArray(r)||"string"==typeof r)for(var i=0;i<r.length;i++)e.push(r[i]);else r instanceof Set?e.push.apply(e,_toConsumableArray(Array.from(r).sort(t("en")))):e.push(s.create("operation","I can't spread out "+g(r)+", because it is not a string, dataset, or array."))}else e.push(n);return e},[]);var r=s.containsError(n);return r?r:e.apply(void 0,_toConsumableArray(n))}}function c(e,t,n){n=[].concat(n||[]),e="("+(Array.isArray(e)&&e.length>1?e[0]:e)+":)";var r=void 0;return r=n.length>0?"The "+e+" macro must only be given "+n.map(y).reduce(function(e,t,n,r){return e+(0===n?"":n<r.length-1?", ":", and ")+t},"")+(n.length>1?", in that order":"."):"The macro must not be given any data - just write "+e+".",function(i){for(var a=arguments.length,u=Array(a>1?a-1:0),c=1;a>c;c++)u[c-1]=arguments[c];for(var l=void 0,f=(function(t){var i=n[t],a=u[t];return t>=n.length&&!l?{v:s.create("datatype",u.length-n.length+" too many values were given to this "+e+" macro.",r)}:(i||(i=l),!i.innerType||"rest"!==i.pattern&&"zero or more"!==i.pattern||(l=i.innerType,"rest"===i.pattern&&(i=i.innerType)),v(a,i)?void 0:void 0===a?{v:s.create("datatype","The "+e+" macro needs "+d(n.length-t,"more value")+".",r)}:a&&a.TwineScript_Unstorable&&(i===b.TypeSignature.Any||i.innerType&&i.innerType===b.TypeSignature.Any)?{v:s.create("datatype",e+"'s "+p(t+1)+" value, "+g(a)+", is not valid data for this macro.",r)}:a&&o.isPrototypeOf(a)&&"lambda"===i.pattern?{v:s.create("datatype",e+"'s "+p(t+1)+" value (a lambda) should have "+h(["where","making","via","with"].filter(function(e){return i.clauses.includes(e)}).map(function(e){return"a '"+e+"' clause"}))+", not "+h(["where","making","via","with"].filter(function(e){return e in a}).map(function(e){return"a '"+e+"' clause"}))+".")}:{v:s.create("datatype",e+"'s "+p(t+1)+" value is "+g(a)+", but should be "+y(i)+".",i.message||r)})}),m=0,w=Math.max(u.length,n.length);w>m;m+=1){var x=f(m,w);if("object"===("undefined"==typeof x?"undefined":_typeof(x)))return x.v}return t.apply(void 0,[i].concat(u))}}function l(e,t){Array.isArray(e)?e.forEach(function(e){return m(w,f(e),t)}):m(w,f(e),t)}var f=n.insensitiveName,p=n.nth,d=n.plural,h=n.andList,m=n.lockProperty,g=r.objectName,y=r.typeName,v=r.singleTypeCheck,b=void 0,w={};return b={has:function(e){return e=f(e),w.hasOwnProperty(e)},get:function(e){return e=f(e),w.hasOwnProperty(e)&&w[e]},add:function e(t,n,r){return l(t,u(c(t,n,r))),e},addChanger:function e(t,n,r,o){return l(t,u(c(t,n,o))),i.register(Array.isArray(t)?t[0]:t,r),e},TypeSignature:{optional:function(e){return{pattern:"optional",innerType:e}},zeroOrMore:function(e){return{pattern:"zero or more",innerType:e}},either:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return{pattern:"either",innerType:t}},rest:function(e){return{pattern:"rest",innerType:e}},wrapped:function(e,t){return{pattern:"wrapped",innerType:e,message:t}},Any:{TwineScript_TypeName:"anything"}},run:function(e,t){return s.containsError(e)?e:b.has(e)?b.get(e)(t):s.create("macrocall","I can't run the macro '"+e+"' because it doesn't exist.","Did you mean to run a macro? If you have a word written like (this:), it is regarded as a macro name.")}},Object.freeze(b)}),define("datatypes/assignmentrequest",["utils"],function(e){var t=e.assertMustHave,n=Object.freeze({assignmentRequest:!0,TwineScript_TypeName:"a 'to' or 'into' expression",TwineScript_ObjectName:"a 'to' or 'into' expression",TwineScript_Unstorable:!0,create:function(e,n,r){return t(e,["varref"]),Object.assign(Object.create(this),{dest:e,src:n,operator:r})}});return n}),define("twinescript/operations",["state","datatypes/colour","datatypes/assignmentrequest","utils/operationutils","internaltypes/twineerror"],function(e,t,n,r,i){function o(e,t,n,r){return n=n||"do this to",function(o,a){1===t.length&&(a=o);var s=void 0;return(s=i.containsError(o,a))?s:("undefined"==typeof o?"undefined":_typeof(o))!==e||("undefined"==typeof a?"undefined":_typeof(a))!==e?i.create("operation","I can only "+n+" "+e+"s, not "+m(("undefined"==typeof o?"undefined":_typeof(o))!==e?o:a)+".",r):t(o,a)}}function a(e){return function(t,n){var r=void 0;return(r=i.containsError(t,n))?r:t&&t.varref?i.create("operation","I can't give an expression a new value."):("undefined"==typeof t?"undefined":_typeof(t))!==("undefined"==typeof n?"undefined":_typeof(n))||c(t)!==c(n)?l(e,t,n)||i.create("operation",m(t)+" isn't the same type of data as "+m(n)):e(t,n)}}function s(e){var t=function t(n,r){var o=void 0;if(o=i.containsError(n,r))return o;if(y=n,n.determiner){var a=function(){var e="all"===n.determiner;return{v:n.array.reduce(function(n,o){var a=void 0,s=t(o,r);return(a=i.containsError(n,s))?a:e?n&&s:n||s},e)}}();if("object"===("undefined"==typeof a?"undefined":_typeof(a)))return a.v}else if(r.determiner){var s=function(){var e="all"===r.determiner;return{v:r.array.reduce(function(r,o){var a=void 0,s=t(n,o);return(a=i.containsError(r,s))?a:e?r&&s:r||s},e)}}();if("object"===("undefined"==typeof s?"undefined":_typeof(s)))return s.v}return e(n,r)};return t}var u=r.isObject,c=r.collectionType,l=r.coerceToString,f=r.is,p=r.clone,d=r.unique,h=r.contains,m=(r.typeName,r.objectName),g=void 0,y=0,v="If one of these values is a number, you may want to write a check that it 'is not 0'. Also, if one is a string, you may want to write a check that it 'is not \"\" '.";return g={create:function(e){var t=Object.create(this);return t.Identifiers={TwineScript_Identifiers:!0,get it(){return y},get time(){return Date.now()-e.timestamp}},t},elidedComparisonOperator:function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return r.reduce(function(n,r){return"boolean"==typeof r?r:g[e](n,g[t](y,r))},"and"===e)},and:o("boolean",a(function(e,t){return e&&t}),"use 'and' to join",v),or:o("boolean",a(function(e,t){return e||t}),"use 'or' to join",v),not:o("boolean",function(e){return!e},"use 'not' to invert",v),"+":a(function(e,t){if(Array.isArray(e))return[].concat(_toConsumableArray(e),_toConsumableArray(t));var n=void 0;return e instanceof Map?(n=new Map(e),t.forEach(function(e,t){return n.set(t,e)}),n):e instanceof Set?new Set([].concat(_toConsumableArray(e),_toConsumableArray(t)).filter(d).map(p)):"function"==typeof e["TwineScript_+"]?e["TwineScript_+"](t):"string|number|boolean".includes("undefined"==typeof e?"undefined":_typeof(e))?e+t:i.create("operation","I can't use + on "+m(e)+".")}),"-":a(function(e,t){if(Array.isArray(e))return e.filter(function(e){return!t.some(function(t){return f(e,t)})});if(e instanceof Set){var n=function(){var n=[].concat(_toConsumableArray(t));return{v:new Set([].concat(_toConsumableArray(e)).filter(function(e){return!n.some(function(t){return f(e,t)})}))}}();if("object"===("undefined"==typeof n?"undefined":_typeof(n)))return n.v}return"string"==typeof e?e.split(t).join(""):"number"==typeof e?e-t:i.create("operation","I can't use - on "+m(e)+".")}),"*":o("number",a(function(e,t){return e*t}),"multiply"),"/":o("number",a(function(e,t){return 0===t?i.create("operation","I can't divide "+m(e)+" by zero."):e/t}),"divide"),"%":o("number",a(function(e,t){return 0===t?i.create("operation","I can't modulo "+m(e)+" by zero."):e%t}),"modulus"),"<":s(o("number",a(function(e,t){return t>e}),"do < to")),">":s(o("number",a(function(e,t){return e>t}),"do > to")),"<=":s(o("number",a(function(e,t){return t>=e}),"do <= to")),">=":s(o("number",a(function(e,t){return e>=t}),"do >= to")),is:s(f),isNot:s(function(e,t){return!g.is(e,t)}),contains:s(h),isIn:s(function(e,t){return h(t,e)}),where:function(e,t,n){var r=void 0;return(r=i.containsError(e))?r:"boolean"!=typeof e?i.create("operation","This lambda's 'where' clause must evaluate to true or false, not "+m(e)+"."):e?t:n},makeSpreader:function(e){return{value:e,spreader:!0}},makeAssignmentRequest:function(e,t,r){var o=i.containsError(e,t);return o?o:u(e)&&"varref"in e?n.create(e,t,r):i.create("operation","I can't store a new value inside "+m(e)+".")},setIt:function(e){return i.containsError(e)?e:e.varref?(y=e.get(),e):i.create("operation","I can't put a new value into "+m(e)+".")},initialiseIt:function(e){y=e}},Object.freeze(g)}),define("twinescript/environ",["macros","state","utils","datatypes/colour","datatypes/hookset","datatypes/lambda","internaltypes/varref","internaltypes/twineerror","twinescript/operations"],function(Macros,State,Utils,Colour,HookSet,Lambda,VarRef,TwineError,OperationsProto){return function(section){"object"===("undefined"==typeof section?"undefined":_typeof(section))&&section||Utils.impossible("TwineScript.environ","no Section argument was given!");var Operations=OperationsProto.create(section);return section.eval=function(){try{for(var _len5=arguments.length,args=Array(_len5),_key5=0;_len5>_key5;_key5++)args[_key5]=arguments[_key5];return eval(args.join(""))}catch(e){return e}},section}}),define("internaltypes/twinenotifier",["jquery","utils"],function(e,t){var n=t.impossible,r={create:function(e){return e||n("TwineNotifier.create","called with only 1 string."),Object.assign(Object.create(r),{message:e})},render:function(){return e("<tw-notifier>").attr("message",this.message)}};return r}),define("section",["jquery","utils","utils/selectors","renderer","twinescript/environ","twinescript/operations","state","utils/operationutils","datatypes/changercommand","datatypes/hookset","datatypes/colour","internaltypes/changedescriptor","internaltypes/varscope","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,i,o,a,s,u,c,l,f,p,d,h){function m(e,n,r){if(n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&n.changer){var i=this.renderInto(r.popAttr("source"),r,n);if(!i){var o=t.insensitiveName(e.attr("name"));return void(["if","elseif","unless","else"].includes(o)&&(e.addClass("false"),"elseif"!==o&&(this.stack[0].lastHookShown=!1)))}}else if(n&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&n.live)x.call(this,r,n.delay,n.event);else{if(n===!1)return r.attr("source")&&r.data("hiddenSource",r.popAttr("source")),e.addClass("false"),void(this.stack[0].lastHookShown=!1);n!==!0&&e.replaceWith(d.create("datatype",S(n)+" cannot be attached to this hook.","Only Booleans, changer commands, and the (live:) macro can be attached to hooks.").render(e.attr("title")))}this.stack[0].lastHookShown=!0}function g(t){var n=t instanceof e?t[0]:t,r=n.nextSibling;if(r&&(r instanceof Text&&!r.textContent.trim()||"br"===(r.tagName||"").toLowerCase())){var i=g(r),o=i.whitespace,a=i.nextElem;return{whitespace:e(r).add(o),nextElem:a}}return{whitespace:e(),nextElem:e(r)}}function y(r){var i=this.eval(r.popAttr("js")||""),a=void 0,s=void 0,c=e();for(s=r;u.isPrototypeOf(i);){var f=g(s);if(a=f.whitespace,s=f.nextElem,s[0]instanceof Text&&"+"===s[0].textContent.trim()){var p=void 0,y=s,v=g(y);if(p=v.whitespace,s=v.nextElem,s.is(n.expression)){var b=this.eval(s.popAttr("js"));if(d.containsError(b)){i=b;break}var w=o["+"](i,b);e(a).add(y).add(p).remove(),i=d.containsError(w)?d.create("operation","I can't combine "+S(i)+" with "+S(b)+"."):w;continue}}if(s.is(n.hook)){a.remove(),c=s;break}r.replaceWith(d.create("syntax","The ("+i.macroName+":) command should be assigned to a variable or attached to a hook.","Macros like this should appear to the left of a hook: "+r.attr("title")+"[Some text]").render(r.attr("title")));break}c=c.length?c:g(r).nextElem.filter(n.hook);var x=void 0;if(x=d.containsError(i))x instanceof Error&&(x=d.fromError(x)),r.replaceWith(x.render(r.attr("title"),r));else if(h.isPrototypeOf(i))r.append(i.render());else if(!c.length&&("string"==typeof i||"number"==typeof i||i instanceof Map||i instanceof Set||Array.isArray(i)||l.isPrototypeOf(i))||i&&i.TwineScript_Print&&!i.changer){if(i=T(i),i.earlyExit)return"earlyexit";i instanceof e?r.append(i):d.containsError(i)?(i instanceof Error&&(i=d.fromError(i)),r.replaceWith(i.render(r.attr("title"),r))):this.renderInto(i,r)}else c.length?m.call(this,r,i,c):i.changer||"boolean"==typeof i||t.impossible("Section.runExpression","The expression evaluated to an unknown value: "+i.toSource())}function v(e){var t=e.first()[0],n=e.parent();if(!n.length)return null;var r=n.textNodes().filter(function(e){var n=e.compareDocumentPosition(t);return 4&n&&!(8&n)});return r=r[r.length-1],r?r:v(n)}function b(e){var t=e.last()[0],n=e.parent();if(!n.length)return null;var r=n.textNodes().filter(function(e){var n=e.compareDocumentPosition(t);return 2&n&&!(8&n)})[0];return r?r:b(n)}function w(t){function n(t){return 0===e(this||t).parentsUntil("tw-collapsed").filter("tw-verbatim, tw-expression, [collapsing=false]").length}var r=v(t);e(r).parents("tw-collapsed").length||(r=null);



var i=b(t);e(i).parents("tw-collapsed").length||(i=null),t.findAndFilter("br:not([data-raw])").filter(n).replaceWith(document.createTextNode(" "));var o=t.textNodes(),a=0;o.reduce(function(e,t){return n(t)?(t.textContent=t.textContent.replace(/\s+/g," ")," "!==t.textContent[0]||e&&e.textContent&&!(e.textContent.search(/\s$/)>-1)||(t.textContent=t.textContent.slice(1)),t):document.createTextNode("A")},r),[].concat(_toConsumableArray(o)).reverse().every(function(e){return n(e)?e.textContent.match(/^\s*$/)?(a+=e.textContent.length,e.textContent="",!0):(e.textContent=e.textContent.replace(/\s+$/,function(e){return a+=e.length,""}),!1):!1}),a>0&&i&&(o[o.length-1].textContent+=" "),t[0]&&j()&&t[0].normalize()}function x(e,t){var r=this,i=e.popAttr("source")||"";t=void 0===t?20:t;var o=function o(){r.inDOM()&&(r.renderInto(i,e,{append:"replace"}),e.find(n.expression+"[name='stop']").length||r.inDOM()&&setTimeout(o,t))};setTimeout(o,t)}var T=s.printBuiltinValue,S=s.objectName,O=void 0,j=function(){var t=void 0;return function(){if(void 0!==t)return t;var n=e("<p>");return n[0].normalize?(n.append(document.createTextNode("0-"),document.createTextNode("2"),document.createTextNode(""))[0].normalize(),t=1===n.contents().length):t=!1}}();return O={create:function(n){n instanceof e&&1===n.length||t.impossible("Section.create","called with no DOM element");var r=Object.assign(Object.create(this),{timestamp:Date.now(),dom:n||t.storyElement,stack:[],enchantments:[]});return r=i(r)},inDOM:function(){return e(t.storyElement).find(this.dom).length>0},evaluateTwineMarkup:function(t){var n=e("<p>");this.renderInto(t,n);var r=void 0;return(r=n.find("tw-error")).length>0?r:n.text()},renderInto:function(t,r){for(var i=this,o=f.create({target:r,source:t,section:this}),a=arguments.length,s=Array(a>2?a-2:0),u=2;a>u;u++)s[u-2]=arguments[u];s.forEach(function(e){e.changer?e.run(o):Object.assign(o,e)}),r=o.target,this.stack.length>=50&&d.create("infinite","Printing this expression may have trapped me in an infinite loop.").render(r.attr("title")).replaceAll(r);var c=function(t,o){var a=t.render();i.stack.unshift(o);var s=i;a.findAndFilter(n.hook+","+n.expression).each(function(){var t=e(this);switch(t.tag()){case n.hook:if(t.attr("hidden")&&(t.removeAttr("hidden"),t.data("hiddenSource",t.popAttr("source"))),t.attr("source")&&s.renderInto(t.popAttr("source"),t),t.find("[earlyexit]").length)return!1;break;case n.expression:if(t.attr("js")){var r=y.call(s,t);return"earlyexit"===r?(a.attr("earlyexit",!0),!1):r}}}),a.length&&r instanceof e&&r.is(n.hook)&&r.parents("tw-collapsed").length>0&&w(a),a.findAndFilter(n.collapsed).each(function(){w(e(this))}),i.stack.shift()},l=Object.create(this.stack.length?this.stack[0].tempVariables:p),h=r&&r.tag();return l.TwineScript_VariableStoreName=h===n.hook?r.attr("name")?"?"+r.attr("name"):"an unnamed hook":h===n.expression?"a "+r.attr("type")+" expression":h===n.passage?"this passage":"an unknown scope",Object.keys(o.loopVars).length?!function(){for(var e=Object.assign({},o.loopVars),t=Math.min.apply(Math,_toConsumableArray(Object.keys(e).map(function(t){return e[t].length})));t>0;t-=1)c(o,{tempVariables:Object.keys(e).reduce(function(t,n){return t[n]=e[n].shift(),t},Object.create(l))})}():c(o,{tempVariables:l}),0===this.stack.length&&this.updateEnchantments(),o.enabled},updateEnchantments:function(){this.enchantments.forEach(function(e){e.disenchant(),e.enchantScope()})}},Object.preventExtensions(O)}),define("engine",["jquery","utils","utils/selectors","state","section","passages"],function(e,t,n,r,i,o){function a(){var t=e("<tw-passage><tw-sidebar>"),i=t.children(n.sidebar);h.permalink&&r.save&&i.append('<tw-icon tabindex=0 class="permalink" title="Permanent link to this passage"><a href="#'+r.save()+'">&sect;');var o=e('<tw-icon tabindex=0 class="undo" title="Undo">&#8630;</tw-icon>').click(d.goBack),a=e('<tw-icon tabindex=0 class="redo" title="Redo">&#8631;</tw-icon>').click(d.goForward);return r.pastLength<=0&&o.css("visibility","hidden"),r.futureLength<=0&&a.css("visibility","hidden"),i.append(o).append(a),t}function s(e,t){return"<tw-include type="+e+" title='"+c(t.get("name"))+"'>"+t.get("source")+"</tw-include>"}function u(u){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.assertOnlyHas(c,["stretch","transitionIn","transitionOut"]);var d=o.get(u),m=t.storyElement,g=m.parent(),y=c.stretch,v=c.transitionOut,b=c.transitionIn;if(v=v||"instant",g.is(n.enchantment)){var w=g.data("enchantedProperties");w&&m.css(w.reduce(function(e,t){return e[t]="",e},{})),g=m.unwrap().parent()}d&&d instanceof Map&&d.has("source")||l("Engine.showPassage","There's no passage with the name \""+u+'"!'),m.detach();var x=t.$(m.children(f));!y&&v&&(p(x,v),x.css("position","absolute"));var T=(d.get("tags")||[]).join(" "),S=a().appendTo(m).attr({tags:T});m.attr({tags:T});var O=i.create(S),j=d.get("source");j=o.getTagged("header").map(s.bind(0,"header")).join("")+(h.debug?o.getTagged("debug-header").map(s.bind(0,"debug-header")).join(""):"")+j+o.getTagged("footer").map(s.bind(0,"footer")).join("")+(h.debug?o.getTagged("debug-footer").map(s.bind(0,"debug-footer")).join(""):""),r.pastLength<=0&&(h.debug&&(j=o.getTagged("debug-startup").map(s.bind(0,"debug-startup")).join("")+j),j=o.getTagged("startup").map(s.bind(0,"startup")).join("")+j),O.renderInto(j,S,{transition:b||"dissolve"}),g.append(m.parents().length?m.parents().last():m),scroll(0,y?S.offset().top-.05*e(window).height():m.offset().top)}var c=t.escape,l=t.impossible,f=t.passageSelector,p=t.transitionOut,d=void 0,h=Object.create(null);return d={goBack:function(){r.rewind()&&u(r.passage)},goForward:function(){r.fastForward()&&u(r.passage)},goToPassage:function(e,t){r.play(e),u(e,{stretch:t})},showPassage:u,options:h},Object.freeze(d)}),define("debugmode",["jquery","utils","state","internaltypes/varref","utils/operationutils","engine"],function(e,t,n,r,i,o){{var a=i.objectName;i.typeName}return function(){function t(t,n,r){var i=l.children('[data-name="'+t+'"]'),o=a(n);i.length||(i=e('<div class="variable-row" data-name="'+t+'" data-value="'+o+'"></div>').appendTo(l)),i.empty().append("<span class='variable-name "+(r?"temporary":"")+"'>"+t+(r?"<span class='temporary-variable-scope'>"+r+"</span>":"")+"</span><span class='variable-value'>"+a(n)+"</span>");var s=l.children();c.text(s.length+" Variable"+(1!==s.length?"s":""))}function i(){var r=[];l.children().each(function(i,o){o=e(o);var s=o.attr("data-name"),u=o.attr("data-value");s.startsWith("TwineScript")||(s in n.variables?(r.push(s),a(n.variables[s])!==u&&t(s,n.variables[s])):o.remove())});for(var i in n.variables)i.startsWith("TwineScript")||r.includes(i)||t(i,n.variables[i])}var s=e("<tw-debugger><div class='variables'></div>Turns: <select disabled></select><button class='show-invisibles'>Debug View</button><button class='show-variables enabled'>0 Variables</button></tw-debugger>"),u=s.find(".show-invisibles");u.click(function(){e(document.documentElement).toggleClass("debug-mode"),u.toggleClass("enabled")});var c=s.find(".show-variables"),l=s.find(".variables");c.click(function(){l[c.is(".enabled")?"attr":"removeAttr"]("hidden",""),c.toggleClass("enabled")});var f=s.find("select");f.change(function(e){var t=e.target.value,r=t-n.pastLength;0!==r&&(n[0>r?"rewind":"fastForward"](Math.abs(r)),o.showPassage(n.passage))}),n.on("forward",function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,i=n.pastLength;i>1&&f.removeAttr("disabled"),r||(f.children().each(function(t,n){t>=i&&e(n).remove()}),f.append("<option value="+i+">"+(i+1)+": "+t+"</option>").val(i))}).on("back",function(){n.pastLength<=1&&f.attr("disabled"),f.find("[selected]").removeAttr("selected"),f.val(n.pastLength)}).on("load",function(e){f.empty(),f[e.length<=1?"attr":"removeAttr"]("disabled"),e.forEach(function(e,t){return f.append("<option value="+t+">"+(t+1)+": "+e.passage+"</option>")})}),n.on("forward",i).on("back",i),r.on("set",function(e,r,i){(e===n.variables||e.TwineScript_VariableStore)&&t(r,i,e===n.variables?"":e.TwineScript_VariableStoreName)}).on("delete",function(e,t){e===n.variables&&l.find('[data-name="'+t+'"]:not(.temporary)').remove()}),e(document.body).append(s)}}),define("macrolib/values",["macros","utils","utils/operationutils","datatypes/colour","internaltypes/twineerror"],function(e,t,n,r,i){function o(e){return function(){var t=e.apply(void 0,arguments);return"number"!=typeof t||isNaN(t)?i.create("macrocall","This mathematical expression doesn't compute!"):t}}var a=t.realWhitespace,s=t.anyRealLetter,u=n.subset,c=n.objectName,l=e.TypeSignature,f=l.rest,p=l.zeroOrMore,d=l.Any;e.add(["text","string"],function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return t.join("")},[p(e.TypeSignature.either(String,Number,Boolean,Array))])("substring",function(e,t,n,r){return u(t,n,r)},[String,parseInt,parseInt])("lowercase",function(e,t){return t.toLowerCase()},[String])("uppercase",function(e,t){return t.toUpperCase()},[String])("lowerfirst",function(e,t){return t.replace(new RegExp(s+"+"),function(e){return e=Array.from(e),e[0].toLowerCase()+e.slice(1).join("").toLowerCase()})},[String])("upperfirst",function(e,t){return t.replace(new RegExp(s+"+"),function(e){return e=Array.from(e),e[0].toUpperCase()+e.slice(1).join("").toLowerCase()})},[String])("words",function(e,t){return t.split(new RegExp(a+"+")).filter(Boolean)},[String])(["num","number"],function(e,t){return Number.isNaN(+t)?i.create("macrocall","I couldn't convert "+c(t)+" to a number."):+t},[String])("rgb",function(){for(var e,t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1)if(e=arguments.length<=t+1?void 0:arguments[t+1],0>e||e>255)return i.create("macrocall","RGB values must be whole numbers between 0 and 255, not "+c(e)+".");return r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3]})},[parseInt,parseInt,parseInt])("rgba",function(){for(var e,t=0;3>t;t+=1)if(e=arguments.length<=t+1?void 0:arguments[t+1],0>e||e>255)return i.create("macrocall","RGB values must be whole numbers between 0 and 255, not "+c(e)+".");return(arguments.length<=4?void 0:arguments[4])<0||(arguments.length<=4?void 0:arguments[4])>1?i.create("macrocall","Alpha values must be numbers between 0 and 1 inclusive, not "+c(arguments.length<=4?void 0:arguments[4])+"."):r.create({r:arguments.length<=1?void 0:arguments[1],g:arguments.length<=2?void 0:arguments[2],b:arguments.length<=3?void 0:arguments[3],a:arguments.length<=4?void 0:arguments[4]})},[parseInt,parseInt,parseInt,Number])("hsl",function(e,t,n,o){var a=" values must be numbers between 0 and 1 inclusive, not ";return 0>n||n>1?i.create("macrocall","Saturation"+a+c(n)+"."):0>o||o>1?i.create("macrocall","Lightness"+a+c(o)+"."):(t=Math.round(t)%360,0>t&&(t+=360),r.create({h:t,s:n,l:o}))},[Number,Number,Number])("hsla",function(e,t,n,o,a){var s=" values must be numbers between 0 and 1 inclusive, not ";return 0>n||n>1?i.create("macrocall","Saturation"+s+c(n)+"."):0>o||o>1?i.create("macrocall","Lightness"+s+c(o)+"."):0>a||a>1?i.create("macrocall","Alpha"+s+c(o)+"."):(t=Math.round(t)%360,0>t&&(t+=360),r.create({h:t,s:n,l:o,a:a}))},[Number,Number,Number,Number]),{weekday:[function(){return["Sun","Mon","Tues","Wednes","Thurs","Fri","Satur"][(new Date).getDay()]+"day"},null],monthday:[function(){return(new Date).getDate()},null],currenttime:[function(){var e=new Date,t=e.getHours()<12,n=e.getHours()%12||12,r=(e.getMinutes()<10?"0":"")+e.getMinutes();return n+":"+r+" "+(t?"A":"P")+"M"},null],currentdate:[function(){return(new Date).toDateString()},null],min:[Math.min,f(Number)],max:[Math.max,f(Number)],abs:[Math.abs,Number],sign:[Math.sign,Number],sin:[Math.sin,Number],cos:[Math.cos,Number],tan:[Math.tan,Number],floor:[Math.floor,Number],round:[Math.round,Number],ceil:[Math.ceil,Number],pow:[o(Math.pow),[Number,Number]],exp:[Math.exp,Number],sqrt:[o(Math.sqrt),Number],log:[o(Math.log),Number],log10:[o(Math.log10),Number],log2:[o(Math.log2),Number],random:[function(e,t){var n=void 0,r=void 0;return t?(n=Math.min(e,t),r=Math.max(e,t)):(n=0,r=e),r+=1,~~(Math.random()*(r-n))+n},[parseInt,e.TypeSignature.optional(parseInt)]],either:[function(){var e;return e=~~(Math.random()*arguments.length),arguments.length<=e?void 0:arguments[e]},f(d)],"":function(){var t=this;Object.keys(this).forEach(function(n){n&&!function(){var r=t[n][0],i=t[n][1];e.add(n,function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return r.apply(void 0,t)},i)}()})}}[""]()}),function(e){!function(){if(!e.requestAnimationFrame){if(e.webkitRequestAnimationFrame)return e.requestAnimationFrame=e.webkitRequestAnimationFrame,void(e.cancelAnimationFrame=e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame);var t=0;e.requestAnimationFrame=function(n){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=e.setTimeout(function(){n(r+i)},i);return t=r+i,o},e.cancelAnimationFrame=function(e){clearTimeout(e)}}}(),"function"==typeof define&&define("requestAnimationFrame",[],function(){return e.requestAnimationFrame})}(window),define("macrolib/commands",["requestAnimationFrame","macros","utils","state","passages","engine","internaltypes/twineerror","datatypes/hookset","utils/operationutils"],function(e,t,n,r,i,o,a,s,u){function c(e){return"("+e+" "+o.options.ifid+") "}var l=n.toJSLiteral,f=n.unescape,p=u.printBuiltinValue,d=t.TypeSignature,h=d.Any,m=d.rest,g=d.optional,y=!!localStorage&&function(){try{return localStorage.setItem("test","1"),localStorage.removeItem("test"),!0}catch(e){return!1}}();t.add("display",function(e,t){return{TwineScript_ObjectName:"a (display: "+l(t)+") command",TwineScript_TypeName:"a (display:) command",TwineScript_Print:function(){return i.has(t)?f(i.get(t).get("source")):a.create("macrocall","I can't (display:) the passage '"+t+"' because it doesn't exist.")}}},[String])("print",function(e,t){return{TwineScript_ObjectName:"a (print:) command",TwineScript_TypeName:"a (print:) command",TwineScript_Print:function(){return p(t)}}},[h])("show",function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return{TwineScript_ObjectName:"a (show:) command",TwineScript_TypeName:"a (show:) command",TwineScript_Print:function(){return n.forEach(function(t){return t.forEach(e,function(t){var n=t.data("hiddenSource");return void 0===n?a.create("operation","I can't reveal a hook which is already visible."):void e.renderInto(n,t)})}),""}}},[m(s)])("goto",function(t,n){return{TwineScript_ObjectName:"a (go-to: "+l(n)+") command",TwineScript_TypeName:"a (go-to:) command",TwineScript_Print:function(){return i.has(n)?(e(function(){return o.goToPassage(n)}),{earlyExit:1}):a.create("macrocall","I can't (go-to:) the passage '"+n+"' because it doesn't exist.")}}},[String])("goto-transition",function(t,n,r){return{TwineScript_ObjectName:"a (goto-transition: "+l(n)+","+l(r)+") command",TwineScript_TypeName:"a (goto-transition:) command",TwineScript_Print:function(){return i.has(n)?(e(function(){return o.goToPassage(n,{transitionIn:r,transitionOut:r})}),{earlyExit:1}):a.create("macrocall","I can't (goto-transition:) the passage '"+r+"' because it doesn't exist.")}}},[String,String])("undo",function(){return{TwineScript_ObjectName:"a (undo:) command",TwineScript_TypeName:"a (undo:) command",TwineScript_Print:function(){return r.pastLength<1?a.create("macrocall","I can't (undo:) on the first turn."):(e(function(){return o.goBack()}),{earlyExit:1})}}},[])("live",function(e,t){return{TwineScript_ObjectName:"a (live: "+t+") command",TwineScript_TypeName:"a (live:) command",live:!0,delay:t}},[g(Number)])("stop",function(){return{TwineScript_ObjectName:"a (stop:) command",TwineScript_TypeName:"a (stop:) command",TwineScript_Print:function(){return""}}},[])("savegame",function(e,t,n){if(n=n||"",!y)return!1;var i=r.serialise();if(a.containsError(i))return i;try{return localStorage.setItem(c("Saved Game")+t,i),localStorage.setItem(c("Saved Game Filename")+t,n),!0}catch(e){return!1}},[String,g(String)])("loadgame",function(t,n){return{TwineScript_ObjectName:"a (load-game:) command",TwineScript_TypeName:"a (load-game:) command",TwineScript_Print:function(){var t=localStorage.getItem(c("Saved Game")+n);return t?(r.deserialise(t),e(o.showPassage.bind(o,r.passage,!1)),{earlyExit:1}):a.create("saving","I can't find a save slot named '"+n+"'!")}}},[String])("alert",function(e,t){return{TwineScript_ObjectName:"an (alert:) command",TwineScript_TypeName:"an (alert:) command",TwineScript_Print:function(){return window.alert(t),""}}},[String])("prompt",function(e,t,n){return window.prompt(t,n)||""},[String,String])("confirm",function(e,t){return window.confirm(t)},[String])("openURL",function(e,t){return{TwineScript_ObjectName:"an (open-url:) command",TwineScript_TypeName:"an (open-url:) command",TwineScript_Print:function(){return window.open(t,""),""}}},[String])("reload",function(){return{TwineScript_ObjectName:"a (reload:) command",TwineScript_TypeName:"a (reload:) command",TwineScript_Print:function(){return r.pastLength<1?a.create("infinite","I mustn't (reload:) the page in the starting passage."):(window.location.reload(),{earlyExit:1})}}},[])("gotoURL",function(e,t){return{TwineScript_ObjectName:"a (goto-url:) command",TwineScript_TypeName:"a (goto-url:) command",TwineScript_Print:function(){return window.location.assign(t),{earlyExit:1}}}},[String])("pageURL",function(){return window.location.href},[])}),define("macrolib/datastructures",["jquery","utils/naturalsort","macros","utils/operationutils","state","engine","passages","datatypes/lambda","datatypes/assignmentrequest","internaltypes/twineerror","internaltypes/twinenotifier"],function(e,t,n,r,i,o,a,s,u,c,l){var f=r.objectName,p=(r.typeName,r.subset),d=r.collectionType,h=r.isValidDatamapName,m=r.is,g=r.unique,y=r.clone,v=n.TypeSignature,b=v.optional,w=v.rest,x=v.either,T=v.zeroOrMore,S=v.Any;n.add("set",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"===n.operator)return c.create("macrocall","Please say 'to' when using the (set:) macro.");var r=void 0;if(n.src&&n.src.varref){var i=n.src.get(),a=void 0;if(a=c.containsError(i))return a;r=n.dest.set(i)}else r=n.dest.set(n.src);if(c.isPrototypeOf(r))return r;o.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (set:) operation",TwineScript_ObjectName:"a (set:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(u)])("put",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return c.create("macrocall","Please say 'into' when using the (put:) macro.");var r=n.dest.set(n.src);if(c.isPrototypeOf(r))return r;o.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (put:) operation",TwineScript_ObjectName:"a (put:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(u)])("move",function(){for(var e="",t=0;t<(arguments.length<=1?0:arguments.length-1);t+=1){var n=arguments.length<=t+1?void 0:arguments[t+1];if("into"!==n.operator)return c.create("macrocall","Please say 'into' when using the (move:) macro.");var r=void 0,i=void 0;if(n.src&&n.src.varref){var a=n.src.get();if(i=c.containsError(a))return i;if(r=n.dest.set(a),i=c.containsError(r))return i;n.src.delete()}else if(r=n.dest.set(n.src),i=c.containsError(r))return i;o.options.debug&&(e+=(e?"; ":"")+f(n.dest)+" is now "+f(n.src))}return{TwineScript_TypeName:"a (move:) operation",TwineScript_ObjectName:"a (move:) operation",TwineScript_Unstorable:!0,TwineScript_Print:function(){return e&&l.create(e).render()}}},[w(u)])(["a","array"],function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return t},T(S))("range",function e(t,n,r){if(n>r)return e(t,r,n);var i=[n];for(r-=n;r-->0;)i.push(++n);return i},[parseInt,parseInt])("subarray",function(e,t,n,r){return p(t,n,r)},[Array,parseInt,parseInt])("shuffled",function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return t.reduce(function(e,t,n){var r=Math.random()*(n+1)|0;return r===n?e.push(t):(e.push(e[r]),e[r]=t),e},[]).map(y)},[S,w(S)])("sorted",function(){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return n.sort(t("en"))},[x(Number,String),w(x(Number,String))])("rotated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return t*=-1,0===t?c.create("macrocall","I can't rotate these values by 0 positions."):Math.abs(t)>=r.length?c.create("macrocall","I can't rotate these "+r.length+" values by "+t+" positions."):r.slice(t).concat(r.slice(0,t)).map(y)},[parseInt,S,w(S)])("repeated",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];if(0>=t)return c.create("macrocall","I can't repeat these values "+t+" times.");for(var o=[];t-->0;)o.push.apply(o,r);return o.map(y)},[parseInt,w(S)])("interlaced",function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];for(var r=Math.min.apply(Math,_toConsumableArray(t.map(function(e){return e.length}))),i=[],o=0;r>o;o+=1)for(var a=0;a<t.length;a+=1)i.push(y(t[a][o]));return i},[Array,w(Array)]),n.add("altered",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return r.map(function(n){return t.apply(e,{loop:n})})},[s.TypeSignature("via"),w(S)])("find",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return t.filter(e,r)},[s.TypeSignature("where"),w(S)])("all-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return c.containsError(o)||o.length===r.length},[s.TypeSignature("where"),w(S)])("some-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return c.containsError(o)||o.length>0},[s.TypeSignature("where"),w(S)])("none-pass",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];var o=t.filter(e,r);return c.containsError(o)||0===o.length},[s.TypeSignature("where"),w(S)])("folded",function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return"where"in t&&(r=t.filter(e,r)),c.containsError(r)||r.reduce(function(n,r){return t.apply(e,{making:n,loop:r})})},[x(s.TypeSignature("where via making"),s.TypeSignature("via making")),w(S)]),n.add("datanames",function(e,n){return Array.from(n.keys()).sort(t("en"))},[Map])("datavalues",function(e,n){return Array.from(n.entries()).sort(function(e,n){return[e[0],n[0]].sort(t("en"))[0]===e[0]?-1:1}).map(function(e){return y(e[1])})},[Map])("dataentries",function(e,n){return Array.from(n.entries()).sort(function(e,n){return[e[0],n[0]].sort(t("en"))[0]===e[0]?-1:1}).map(function(e){return new Map([["name",e[0]],["value",y(e[1])]])})},[Map])("history",function(){return i.pastPassageNames()},[])("passage",function(e,t){return y(a.get(t||i.passage))||c.create("macrocall","There's no passage named '"+t+"' in this story.")},[b(String)])("savedgames",function(){function e(e){return"("+e+" "+o.options.ifid+") "}var t=0,n=void 0,r=new Map;do{n=localStorage.key(t),t+=1;var i=e("Saved Game");n&&n.startsWith(i)&&(n=n.slice(i.length),r.set(n,localStorage.getItem(e("Saved Game Filename")+n)))}while(n);return r},[])(["datamap","dm"],function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];var r=void 0,i=new Map,o=t.reduce(function(e,t){var n=void 0;if(c.containsError(e))return e;if(void 0===r)r=t;else{if(n=c.containsError(h(i,r)))return n;if(i.has(r))return c.create("macrocall","You used the same data name ("+f(r)+") twice in the same (datamap:) call.");i.set(r,y(t)),r=void 0}return e},!0);return c.containsError(o)?o:void 0!==r?c.create("macrocall","This datamap has a data name without a value."):i},T(S))(["dataset","ds"],function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return new Set(t.filter(g).map(y))},T(S))("count",function e(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;r>o;o++)i[o-2]=arguments[o];if(i.length>1){var a=void 0,s=i.map(function(r){return e(t,n,r)});return(a=c.containsError(s))?a:s.reduce(function(e,t){return e+t},0)}var u=i[0];switch(d(n)){case"dataset":case"datamap":return c.create("macrocall","(count:) shouldn't be given a datamap or dataset.","You should use the 'contains' operator instead. For instance, write: $variable contains 'value'.");case"string":return"string"!=typeof u?c.create("macrocall",f(n)+" can't contain  "+f(u)+" because it isn't a string."):u?n.split(u).length-1:0;case"array":return n.reduce(function(e,t){return e+m(t,u)},0);default:return c.create("macrocall",f(n)+" can't contain values, let alone "+f(u)+".")}},[S,w(S)])}),define("macrolib/stylechangers",["jquery","macros","utils","utils/selectors","datatypes/colour","datatypes/changercommand","datatypes/lambda","internaltypes/changedescriptor","internaltypes/twineerror"],function(e,t,n,r,i,o,a,s,u){var c=t.TypeSignature,l=c.either,f=c.wrapped,p=c.rest,d=c.Any,h=[f(Boolean,'If you gave a number, you may instead want to check that the number is not 0. If you gave a string, you may instead want to check that the string is not "".')];e(function(){return e(n.storyElement).on("mouseenter.hover-macro","[hover=false]",function(){var t=e(this),n=t.data("hoverChanger");t.data({mouseoutStyle:t.attr("style")||""}),s.create({target:t},n).update(),t.attr("hover",!0)}).on("mouseleave.hover-macro","[hover=true]",function(){var t=e(this),n=t.data("mouseoutStyle");t.attr("style",n).removeData("mouseoutStyle").attr("hover",!1)})});var m=["dissolve","shudder","pulse"];t.addChanger("if",function(e,t){return o.create("if",[t])},function(e,t){return e.enabled=e.enabled&&t},h)("unless",function(e,t){return o.create("unless",[!t])},function(e,t){return e.enabled=e.enabled&&t},h)("elseif",function(e,t){return"lastHookShown"in e.stack[0]?o.create("elseif",[e.stack[0].lastHookShown===!1&&!!t]):u.create("macrocall","There's no (if:) or something else before this to do (else-if:) with.")},function(e,t){return e.enabled=e.enabled&&t},h)("else",function(e){return"lastHookShown"in e.stack[0]?o.create("else",[e.stack[0].lastHookShown===!1]):u.create("macrocall","There's nothing before this to do (else:) with.")},function(e,t){return e.enabled=e.enabled&&t},null)("hidden",function(){return o.create("hidden")},function(e){return e.enabled=!1},null)("hook",function(e,t){return o.create("hook",[t])},function(e,t){return e.attr.push({name:t})},[String])(["for","loop"],function(e,t){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;n>i;i++)r[i-2]=arguments[i];return t.loop?o.create("for",[t,r]):u.create("macrocall","The lambda provided to (for:) must refer to a temp variable, not just 'it'.")},function(e,t,n){return e.loopVars[t.loop]=t.filter(e.section,n)},[a.TypeSignature("where"),p(d)])(["transition","t8n"],function(e,t){return t=n.insensitiveName(t),-1===m.indexOf(t)?u.create("macrocall","'"+t+"' is not a valid (transition:)","Only the following names are recognised (capitalisation and hyphens ignored): "+m.join(", ")):o.create("transition",[t])},function(e,t){return e.transition=t,e},[String])(["transition-time","t8n-time"],function(e,t){return 0>=t?u.create("macrocall","(transition-time:) should be a positive number of (milli)seconds, not "+t):o.create("transition-time",[t])},function(e,t){return e.transitionTime=t,e},[Number])("font",function(e,t){return o.create("font",[t])},function(e,t){return e.styles.push({"font-family":t}),e},[String])("align",function(e,t){var n=void 0,r=t.indexOf("><");if(!/^(==+>|<=+|=+><=+|<==+>)$/.test(t))return u.create("macrocall",'The (align:) macro requires an alignment arrow ("==>", "<==", "==><=" etc.) be provided, not "'+t+'"');if(~r){var i=Math.round(r/(t.length-2)*50);n=Object.assign({"text-align":"center","max-width":"50%"},25===i?{"margin-left":"auto","margin-right":"auto"}:{"margin-left":i+"%"})}else n="<"===t[0]&&">"===t.slice(-1)?{"text-align":"justify","max-width":"50%"}:t.includes(">")?{"text-align":"right"}:{"text-align":"left"};return n.display="block",o.create("align",[n])},function(e,t){e.styles.push(t)},[String])(["text-colour","text-color","color","colour"],function(e,t){return i.isPrototypeOf(t)&&(t=t.toRGBAString(t)),o.create("text-colour",[t])},function(e,t){return e.styles.push({color:t}),e},[l(String,i)])("text-rotate",function(e,t){return o.create("text-rotate",[t])},function(t,n){return t.styles.push({display:"inline-block",transform:function(){var t=e(this).css("transform")||"";return"none"===t&&(t=""),t+" rotate("+n+"deg)"}}),t},[Number])("background",function(e,t){return i.isPrototypeOf(t)&&(t=t.toRGBAString(t)),o.create("background",[t])},function(t,r){var o=void 0;return o=i.isHexString(r)||i.isCSS3Function(r)?{"background-color":r}:{"background-size":"cover","background-image":"url("+r+")"},t.styles.push(o,{display:function(){return n.childrenProbablyInline(e(this))?"initial":"block"}}),t},[l(String,i)]).apply(void 0,_toConsumableArray(function(){var t={color:"transparent"},r=Object.assign(Object.create(null),{none:{},bold:{"font-weight":"bold"},italic:{"font-style":"italic"},underline:{"text-decoration":"underline"},strike:{"text-decoration":"line-through"},superscript:{"vertical-align":"super","font-size":".83em"},subscript:{"vertical-align":"sub","font-size":".83em"},blink:{animation:"fade-in-out 1s steps(1,end) infinite alternate"},shudder:{animation:"shudder linear 0.1s 0s infinite",display:"inline-block"},mark:{"background-color":"hsla(60, 100%, 50%, 0.6)"},condense:{"letter-spacing":"-0.08em"},expand:{"letter-spacing":"0.1em"},outline:[{"text-shadow":function(){var t=e(this).css("color");return"-1px -1px 0 "+t+", 1px -1px 0 "+t+",-1px  1px 0 "+t+", 1px  1px 0 "+t}},{color:function(){for(var t=e(this);t.length&&t[0]!==document;t=t.parent()){var n=t.css("background-color");if("transparent"!==n&&!n.match(/^\w+a\(.+?,\s*0\s*\)$/))return n}return"#fff"}}],shadow:{"text-shadow":function(){return"0.08em 0.08em 0.08em "+e(this).css("color")}},emboss:{"text-shadow":function(){return"0.08em 0.08em 0em "+e(this).css("color")}},smear:[{"text-shadow":function(){var t=e(this).css("color");return"0em   0em 0.02em "+t+",-0.2em 0em  0.5em "+t+", 0.2em 0em  0.5em "+t}},t],blur:[{"text-shadow":function(){return"0em 0em 0.08em "+e(this).css("color")}},t],blurrier:[{"text-shadow":function(){return"0em 0em 0.2em "+e(this).css("color")},"user-select":"none"},t],mirror:{display:"inline-block",transform:"scaleX(-1)"},upsidedown:{display:"inline-block",transform:"scaleY(-1)"},fadeinout:{animation:"fade-in-out 2s ease-in-out infinite alternate"},rumble:{animation:"rumble linear 0.1s 0s infinite",display:"inline-block"}});return["text-style",function(e,t){return t=n.insensitiveName(t),t in r?o.create("text-style",[t]):u.create("macrocall","'"+t+"' is not a valid (text-style:)","Only the following names are recognised (capitalisation and hyphens ignored): "+Object.keys(r).join(", "))},function(e,t){return n.assertMustHave(r,[t]),e.styles="none"===t?[]:e.styles.concat(r[t]),e}]}()).concat([[String]]))("hover-style",function(e,t){var n=s.create(),r=(t.run(n),n.summary());return r+""=="styles"||r.every(function(e){return"styles"===e||"attr"===e})&&n.attr.every(function(e){return Object.keys(e)+""=="style"})?o.create("hover-style",[t]):u.create("macrocall","The changer given to (hover-style:) must only change the hook's style.")},function(e,t){return e.data.hoverChanger=t,e.attr.push({hover:!1}),e},[o])("css",function(e,t){return t.trim().endsWith(";")||(t+=";"),o.create("css",[t])},function(t,n){return t.attr.push({

style:function(){return(e(this).attr("style")||"")+n}}),t},[String])}),define("internaltypes/enchantment",["jquery","utils","internaltypes/changedescriptor"],function(e,t,n){var r={create:function(n){return t.assertOnlyHas(n,["scope","section","attr","data","changer","functions"]),Object.assign(Object.create(this),{enchantments:e()},n)},enchantScope:function(){var r=this,i=this.attr,o=this.data,a=this.functions,s=this.section,u=this.changer,c=this.scope;c instanceof e&&(c=Array.prototype.map.call(c,function(t){return e(t)})),this.enchantments=e(),c.forEach(s,function(e){var c=e.wrapAll("<tw-enchantment>").parent();if(i&&c.attr(i),o&&c.data(o),a&&a.forEach(function(e){return e(c)}),u){var l=n.create({section:s,target:c});if(u.run(l),l.update(),e.is(t.storyElement)){var f=Object.keys(Object.assign.apply(Object,[{}].concat(_toConsumableArray(l.styles))));e.css(f.reduce(function(e,t){return e[t]="inherit",e},{})),c.data({enchantedProperties:f})}}e.is(t.storyElement)&&c.css({width:"100%",height:"100%"}),r.enchantments=r.enchantments.add(c)})},disenchant:function(){this.enchantments.each(function(){var n=e(this).contents();n.unwrap();var r=e(this).data("enchantedProperties");r&&n.has(t.storyElement)&&t.storyElement.css(r.reduce(function(e,t){return e[t]="",e},{}))})}};return Object.freeze(r)}),define("macrolib/enchantments",["jquery","utils","utils/selectors","utils/operationutils","macros","datatypes/hookset","datatypes/changercommand","internaltypes/enchantment","internaltypes/twineerror"],function(e,t,n,r,i,o,a,s,u){function c(n,r){return e(function(){t.storyElement.on(n.event+".enchantment","."+n.classList.replace(/ /g,"."),function(){var t=e(this),n=t.data("enchantmentEvent");n&&n(t)})}),[function(){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;e>n;n++)t[n-1]=arguments[n];return t.every(Boolean)?a.create(r,t.map(o.from)):u.create("datatype","A string given to this ("+r+":) macro was empty.")},function(e,t){e.enabled=!1,n.rerender&&(e.newTargets=(e.newTargets||[]).concat({target:t,append:n.rerender}));var r=s.create({functions:[function(e){e.attr("class",e.children().is("tw-story, tw-sidebar, tw-passage")?n.blockClassList:n.classList)}],attr:(n.classList+"").match(/\b(?:link|enchantment-clickblock)\b/)?{tabIndex:"0"}:{},data:{enchantmentEvent:function(){if(n.once){var t=e.section.enchantments.indexOf(r);e.section.enchantments.splice(t,1),r.disenchant()}e.section.renderInto(e.source,null,Object.assign({},e,{enabled:!0}))}},scope:t,section:e.section});return e.section.enchantments.push(r),r.enchantScope(),e},p(o,String)]}var l=r.is,f=i.TypeSignature,p=f.either,d=f.rest;i.add("enchant",function(e,t,n){return{TwineScript_ObjectName:"an (enchant:) command",TwineScript_TypeName:"an (enchant:) command",TwineScript_Print:function(){var r=n.summary();if(r.includes("newTargets")||r.includes("target"))return u.create("macrocall","The changer given to (enchant:) can't include a revision command like (replace:) or (append:).");var i=s.create({scope:o.from(t),changer:n,section:e});return e.enchantments.push(i),i.enchantScope(),""}}},[p(o,String),a]);var h=["replace","append","prepend"];h.forEach(function(t){i.addChanger(t,function(){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return n.every(Boolean)?a.create(t,n.map(o.from)):u.create("datatype","A string given to this ("+t+":) macro was empty.")},function(n){for(var r,i=arguments.length,o=Array(i>1?i-1:0),a=1;i>a;a++)o[a-1]=arguments[a];var s=e(n.target).parents().filter("tw-collapsed").length>0;return s||(n.attr=[].concat(_toConsumableArray(n.attr),[{collapsing:!1}])),n.newTargets=n.newTargets||[],(r=n.newTargets).push.apply(r,_toConsumableArray(o.filter(function(e){return!n.newTargets.some(function(n){var r=n.target,i=n.append;return l(e,r)&&t===i})}).map(function(e){return{target:e,append:t}}))),n},d(p(o,String)))}),e(function(){t.storyElement.on("click.enchantment",function(){Array.from(e(this).parents(".enchantment-clickblock")).sort(function(e,t){return 8&e.compareDocumentPosition(t)?1:-1}).forEach(function(t){var n=e(t).data("enchantmentEvent");n&&n()})})});var m=[{name:"click",enchantDesc:{event:"click",once:!0,rerender:"",classList:"link enchantment-link",blockClassList:"enchantment-clickblock"}},{name:"mouseover",enchantDesc:{event:"mouseenter",once:!0,rerender:"",classList:"enchantment-mouseover"}},{name:"mouseout",enchantDesc:{event:"mouseleave",once:!0,rerender:"",classList:"enchantment-mouseout"}}];m.forEach(function(e){return i.addChanger.apply(i,[e.name].concat(_toConsumableArray(c(e.enchantDesc,e.name))))}),h.forEach(function(e){m.forEach(function(t){var n=Object.assign({},t.enchantDesc,{rerender:e}),r=t.name+"-"+e;i.addChanger.apply(i,[r].concat(_toConsumableArray(c(n,r))))})})}),define("macrolib/links",["jquery","macros","utils","utils/selectors","state","passages","engine","datatypes/changercommand","internaltypes/twineerror"],function(e,t,n,r,i,o,a,s,u){var c=t.TypeSignature.optional,l="Links can't have empty strings for their displayed text.";e(function(){return e(n.storyElement).on("click.passage-link",r.internalLink,function(){var t=e(this),n=t.parent().data("clickEvent");if(n)return void n(t);var r=t.attr("passage-name");return r?void a.goToPassage(r,!1):t.is("[undo]")?void a.goBack():void 0})}),[["link","link-replace"],["link-reveal"],["link-repeat"]].forEach(function(e){return t.addChanger(e,function(t,n){return n?s.create(e[0],[n]):u.create("macrocall",l)},function(t,n){t.innerSource||(t.innerSource=t.source),t.source="<tw-link tabindex=0>"+n+"</tw-link>",t.append="link"===e[0]?"replace":"append",t.data.clickEvent=function(n){t.source=t.innerSource,t.section.renderInto(t.innerSource+"",null,t),"link-reveal"===e[0]&&n.contents().unwrap()}},[String])}),t.add(["link-goto"],function(t,r,a){return r?{TwineScript_TypeName:"a (link-goto: "+n.toJSLiteral(r)+", "+n.toJSLiteral(a)+") command",TwineScript_ObjectName:"a (link-goto:) command",TwineScript_Print:function(){var s=t.evaluateTwineMarkup(n.unescape(a||r));if(s instanceof e)return s;if(!o.has(s))return'<tw-broken-link passage-name="'+n.escape(s)+'">'+(r||a)+"</tw-broken-link>";var u=i.passageNameVisited(s);return"<tw-link tabindex=0 "+(u>0?'class="visited" ':"")+'passage-name="'+n.escape(s)+'">'+(r||a)+"</tw-link>"}}:u.create("macrocall",l)},[String,c(String)])("link-undo",function(e,t){return t?{TwineScript_ObjectName:"a (link-undo:"+n.toJSLiteral(t)+") command",TwineScript_TypeName:"a (link-undo:) command",TwineScript_Print:function(){return i.pastLength<1?u.create("macrocall","I can't use (link-undo:) on the first turn."):"<tw-link tabindex=0 undo>"+t+"</tw-link>"}}:u.create("macrocall",l)},[String])}),define("repl",["utils","markup","twinescript/compiler","twinescript/environ"],function(e,t,n,r){window.REPL=function(e){var i=n(t.lex("(print:"+e+")"));console.log(i);var o=r({}).eval(i);return o.TwineScript_Print?o.TwineScript_Print():o},window.LEX=function(e){var n=t.lex(e);return 1===n.length?n[0]:n}}),require.config({paths:{jquery:"../node_modules/jquery/dist/jquery",almond:"../node_modules/almond/almond","es6-shim":"../node_modules/es6-shim/es6-shim",requestAnimationFrame:"../node_modules/requestanimationframe/app/requestAnimationFrame",jqueryplugins:"utils/jqueryplugins",markup:"./markup/markup",lexer:"./markup/lexer",patterns:"./markup/patterns"},deps:["jquery","es6-shim","jqueryplugins"]}),require(["jquery","debugmode","renderer","state","engine","passages","utils/selectors","macros","macrolib/values","macrolib/commands","macrolib/datastructures","macrolib/stylechangers","macrolib/enchantments","macrolib/links","repl"],function($,DebugMode,Renderer,State,Engine,Passages,Selectors){function _eval(text){return eval(text+"")}var _installHandlers=function(){var e=$(document.documentElement);e.on("keydown",function(e){13===e.which&&"0"===e.target.getAttribute("tabindex")&&$(e.target).trigger("click")}),Engine.options.debug&&DebugMode(),_installHandlers=null};!function(e){window.onerror=function(t,n,r,i,o){var a=o&&o.stack&&"\n"+o.stack.replace(/\([^\)]+\)/g,"")+"\n"||"("+t+")\n";alert("Sorry to interrupt, but this page's code has got itself in a mess. "+a+"(This is probably due to a bug in the Harlowe game engine.)"),window.onerror=e,"function"==typeof e&&e.apply(void 0,arguments)}}(window.onerror),$(function(){var e=$(Selectors.storyData);if(0!==e.length){var t=e.attr("options");t&&t.split(/\s/).forEach(function(e){Renderer.options[e]=Engine.options[e]=!0});var n=e.attr("startnode");return Renderer.options.ifid=Engine.options.ifid=e.attr("ifid"),n||(n=[].reduce.call($(Selectors.passageData),function(e,t){var n=t.getAttribute("pid");return e>n?n:e},1/0)),n=$(Selectors.passageData+"[pid="+n+"]").attr("name"),_installHandlers(),$(Selectors.script).each(function(e){try{_eval($(this).html())}catch(t){alert("There is a problem with this story's script (#"+(e+1)+"):\n\n"+t.message)}}),$(Selectors.stylesheet).each(function(e){$(document.head).append('<style data-title="Story stylesheet '+(e+1)+'">'+$(this).html())}),window.location.hash&&!window.location.hash.includes("stories")&&State.load(window.location.hash)?void Engine.showPassage(State.passage):void Engine.goToPassage(n)}})}),define("harlowe",function(){}),require(["harlowe"])}();</script>





</body>

</html>
